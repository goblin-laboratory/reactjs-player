{"version":3,"sources":["App.js","../../dist/GrindPlayer.swf","../../dist/flashlsOSMF.swf","PlaybackRate.js","FouceLive.js","blank16x9.png","reportWebVitals.js","index.js","../../src/Flvjs/useFlvjs.js","../../src/Flvjs/index.js","../../src/Hlsjs/useHlsjs.js","../../src/Hlsjs/index.js","../../src/Native/index.js","../../src/Native/useNative.js","../../src/SRSWebRTC/SRSPlayer.js","../../src/SRSWebRTC/index.js","../../src/SRSWebRTC/useSRSWebRTC.js","../../src/PlayerContext/index.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/PlayerSkin/PreventedTip/index.js","../../src/PlayerSkin/VideoMask/index.js","../../src/PlayerSkin/PlayState/index.js","../../src/PlayerSkin/TopState/index.js","../../src/PlayerSkin/Controls/bg.png","../../src/PlayerSkin/Controls/index.js","../../src/PlayerSkin/ControlBar/index.js","../../src/PlayerSkin/TimeSlider/index.js","../../src/PlayerSkin/Controls/PlayButton.js","../../src/PlayerSkin/Volume/index.js","../../src/PlayerSkin/PlayTime/index.js","../../src/PlayerSkin/Controls/PlayRate.js","../../src/PlayerSkin/Controls/FullscreenButton.js","../../src/PlayerSkin/Controls/PictureInPicture.js","../../src/PlayerSkin/usePlayerSkin.js","../../src/PlayerSkin/index.js","../../src/PlayerSkin/useAutoHide.js","../../src/PlayerSkinWapper/index.js","../../src/hooks/usePlayerReducer.js","../../src/ReactjsPlayer/useReactjsPlayer.js","../../src/hooks/useVideoState.js","../../src/hooks/useTime.js","../../src/hooks/useVolume.js","../../src/hooks/usePlaybackRate.js","../../src/hooks/usePiP.js","../../src/hooks/useFullscreen.js","../../src/ReactjsPlayer/index.js","../../src/GrindPlayer/GrindPlayer.js","../../src/GrindPlayer/useGrindPlayer.js","../../src/GrindPlayer/index.js","../../src/GrindPlayer/useState.js","../../src/GrindPlayer/useTime.js","../../src/GrindPlayer/useVolume.js","../../src/index.js"],"names":["GrindPlayer","ReactjsPlayer","delay","timeout","Promise","resolve","global","setTimeout","App","React","memo","useState","list","setList","info","setInfo","src","setSrc","videoProps","setVideoProps","ref","useRef","Form","useForm","form","onChange","useCallback","v","item","find","it","key","setFieldsValue","onSubmit","values","a","current","type","useEffect","ua","UAParser","navigator","userAgent","device","playsInline","supportedList","kernel","live","Hls","flvjs","isSupported","getFeatureList","networkStreamIO","push","config","isLive","enableStashBuffer","autoCleanupSourceBuffer","stashInitialSize","fixAudioTimestampGap","os","name","getSupportedList","onVideoEvent","e","log","console","length","className","layout","onFinish","initialValues","Item","map","Option","value","htmlType","blank16x9","alt","onCanPlay","onDurationChange","onPause","onPlay","onPlaying","onEnded","onSeeked","onSeeking","onCanPlayThrough","onEmptied","onEncrypted","onError","onLoadedData","onLoadedMetadata","onLoadStart","onRateChange","onStalled","onSuspend","onVolumeChange","onWaiting","onAbort","grindPlayerSwf","flashlsOSMFSwf","defaultActiveKey","TabPane","tab","title","column","size","label","href","PlaybackRate","playbackRate","useContext","PlayerContext","changeRate","rate","FouceLive","getVideoElement","changeCurrentTime","id","setInterval","el","paused","buffered","end","currentTime","clearInterval","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","getFlvjs","script","debug","Flvjs","props","onMsgChange","cleanup","errMsg","loadSource","target","player","url","detail","useFlvjs","PropTypes","isRequired","p","n","getHls","Hlsjs","details","useHlsjs","Native","loaded","onUnload","msg","useNative","SRSPlayer","matched","this","protocol","pathname","pc","RTCPeerConnection","iceTransportPolicy","bundlePolicy","rtcpMuxPolicy","iceCandidatePoolSize","sdpSemantics","tcpCandidatePolicy","IceTransportsType","direction","event","sdp","offer","RTCSessionDescription","track","sendRequest","method","body","JSON","api","streamurl","clientip","tid","Number","parseInt","Date","getTime","Math","fetch","mode","headers","response","Error","text","MediaStream","SRSWebRTC","stream","useSRSWebRTC","styleInject","css","insertAt","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","PreventedTip","prevented","styles","Icon","component","MutedSvg","VideoMask","showControls","opacity","background","onMouseMove","onClick","PlayState","loading","ended","seeking","waiting","kernelMsg","onPlayClick","LoadingOutlined","PlayCircleOutlined","TopState","object","Controls","hiding","dispatch","children","onMouseEnter","payload","controlsHovering","onMouseLeave","backgroundImage","transform","ControlBar","extra","getValue","rect","duration","w","getEventXCoordinate","MouseTooltip","tooltip","translateX","getMouseTranslateX","numeral","TimeSlider","sliding","sliderRef","onMouseDown","react","left","width","update","onMouseUp","onSliderMouseOver","onSliderMouseMove","onResize","bufferedScaleX","i","getBufferedEnd","getBufferedScaleX","trackTranslateX","getTrackTranslateX","role","tabIndex","onKeyDown","onMouseOver","onFocus","onTouchStart","PlayButton","onPauseClick","CaretRightOutlined","PauseOutlined","Volume","muted","volume","changeVolume","onMutedClick","UnmutedSvg","Slider","max","PlayTime","PlayRate","changePlaybackRate","visible","show","rateMenuVisible","hide","onMenuClick","parseFloat","Dropdown","overlay","Menu","selectedKeys","placement","trigger","FullscreenButton","fullscreen","requestFullscreen","exitFullscreen","FullscreenExitOutlined","FullscreenOutlined","PictureInPicture","pictureInPictureEnabled","pip","exitPictureInPicture","requestPictureInPicture","initialState","reducer","state","action","PlayerSkin","usePlayerSkin","animationFrameCallback","timestamp","startAutoHide","stopAutoHide","useAutoHide","PlayerSkinWapper","enabled","onKernelError","videoRef","playerRef","clearUpdateTimeout","timeoutCallback","updateState","sync","usePlayerReducer","getPlayerElement","promise","onDocumentClick","once","useVideoState","onTimeUpdate","onProgress","useTime","useVolume","usePlaybackRate","onEnterPictureInPicture","onLeavePictureInPicture","usePiP","videoEl","fullscreenElement","useFullscreen","controls","playerProps","useReactjsPlayer","kernelProps","emitter","index","EventEmitter","data","args","token","addListener","fn","eventMap","filter","onJSBridge","playerId","javascriptCallbackFunction","useGrindPlayer","stateProps","timeProps","volumeProps","ReactSWF","height","wmode","allowFullScreen","allowScriptAccess","bgcolor","flashVars","autoPlay","bufferTime","streamType","plugin_hls","string"],"mappings":"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","file":"static/js/main.bfff19de.chunk.js","sourcesContent":["import React from 'react';\nimport UAParser from 'ua-parser-js';\nimport Hls from 'hls.js';\nimport flvjs from 'flv.js';\nimport { Form, Select, Input, Button, Tabs, Descriptions } from 'antd';\nimport { GithubOutlined } from '@ant-design/icons';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport ReactjsPlayer from 'reactjs-player';\nimport grindPlayerSwf from 'reactjs-player/dist/GrindPlayer.swf';\nimport flashlsOSMFSwf from 'reactjs-player/dist/flashlsOSMF.swf';\nimport PlaybackRate from './PlaybackRate';\nimport FouceLive from './FouceLive';\nimport blank16x9 from './blank16x9.png';\nimport './App.css';\n\nconst GrindPlayer = ReactjsPlayer.GrindPlayer;\n// const ReactPlayerContext = ReactjsPlayer.ReactPlayerContext;\n\nconst delay = (timeout) =>\n  new Promise((resolve) => {\n    global.setTimeout(resolve, timeout);\n  });\n\nconst getSupportedList = (ua) => {\n  if (ua.device.type) {\n    // 非 PC 浏览器\n    return [\n      {\n        key: 'native',\n        kernel: 'native',\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n      {\n        key: 'srswebrtc',\n        kernel: 'srswebrtc',\n        live: true,\n        src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n        type: '',\n      },\n    ];\n  }\n\n  global.Hls = Hls;\n  global.flvjs = flvjs;\n\n  const list = [];\n  if (flvjs.isSupported()) {\n    const featureList = flvjs.getFeatureList();\n    if (featureList.networkStreamIO) {\n      list.push({\n        key: 'flvjs',\n        kernel: 'flvjs',\n        live: true,\n        src: 'http://192.168.0.225/flv_srs/quick/ClpheNxgRBy_XDhXXDq_CQ.flv',\n        type: 'video/x-flv',\n        config: {\n          isLive: true,\n          enableStashBuffer: false,\n          autoCleanupSourceBuffer: true,\n          stashInitialSize: 16 * 1024,\n          fixAudioTimestampGap: false,\n        },\n      });\n    }\n  }\n  if (Hls.isSupported()) {\n    list.push({\n      key: 'hlsjs',\n      kernel: 'hlsjs',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    });\n  }\n\n  // mac OS 没有测试环境，暂且认为没有问题\n  if ('Mac OS' === ua.os.name) {\n    list.push(\n      {\n        key: 'native',\n        kernel: 'native',\n        live: false,\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n    );\n  }\n  list.push(\n    { key: 'rtmp', kernel: 'flash', live: true, src: 'rtmp://livetv.dhtv.cn:1935/live/news', type: 'video/rtmp' },\n    {\n      key: 'flashls',\n      kernel: 'flash',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    },\n    {\n      key: 'native',\n      kernel: 'native',\n      live: false,\n      src: 'https://www.w3schools.com/html/mov_bbb.mp4',\n      type: 'video/mp4',\n    },\n    {\n      key: 'srswebrtc',\n      kernel: 'srswebrtc',\n      live: true,\n      src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n      type: '',\n    },\n  );\n  return list;\n};\n\nconst App = React.memo(() => {\n  const [list, setList] = React.useState(null);\n  const [info, setInfo] = React.useState(null);\n  const [src, setSrc] = React.useState('');\n  const [videoProps, setVideoProps] = React.useState(null);\n  const ref = React.useRef(list);\n\n  const [form] = Form.useForm();\n\n  const onChange = React.useCallback(\n    (v) => {\n      const item = list.find((it) => it.key === v);\n      form.setFieldsValue({ src: item.src });\n    },\n    [form, list],\n  );\n\n  const onSubmit = React.useCallback(async (values) => {\n    setSrc('');\n    await delay(50);\n    const item = ref.current.find((it) => it.key === values.type);\n    setInfo(item);\n    setSrc(values.src);\n  }, []);\n\n  React.useEffect(() => {\n    ref.current = list;\n  }, [list]);\n\n  React.useEffect(() => {\n    const ua = UAParser(global.navigator.userAgent);\n    if (ua.device.type) {\n      setVideoProps({\n        playsInline: true,\n        'webkit-playsinline': 'true',\n        'x5-video-player-type': 'h5-page',\n        'x5-video-orientation': 'landscape|portrait',\n      });\n    }\n    const supportedList = getSupportedList(ua);\n    setList(supportedList);\n    ref.current = supportedList;\n    setInfo(supportedList[0]);\n    // debugger;\n    onSubmit({ type: supportedList[0].key, src: supportedList[0].src });\n  }, [onSubmit]);\n\n  const onVideoEvent = React.useCallback((e) => {\n    const log = console.log;\n    log(`e.type: ${e.type}`);\n    // if ('durationchange' === e.type) {\n    //   log(`durationchange: ${e.target.duration}`);\n    // }\n  }, []);\n\n  if (!list || 0 === list.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"container\">\n      <header className=\"header\">\n        <Form\n          className=\"form\"\n          layout=\"inline\"\n          form={form}\n          onFinish={onSubmit}\n          initialValues={{\n            type: list[0].key,\n            src: list[0].src,\n          }}\n        >\n          <Form.Item className=\"type\" name=\"type\">\n            <Select onChange={onChange}>\n              {list.map((it) => (\n                <Select.Option key={it.key} value={it.key}>\n                  {it.key}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          <Form.Item className=\"src\" name=\"src\">\n            <Input />\n          </Form.Item>\n          <Form.Item className=\"submit\">\n            <Button type=\"primary\" htmlType=\"submit\">\n              播放\n            </Button>\n          </Form.Item>\n        </Form>\n      </header>\n      <main className=\"main\">\n        <div className=\"player\">\n          <img className=\"blankImg\" src={blank16x9} alt=\"\" />\n          {'flash' !== info.kernel && (\n            <ReactjsPlayer\n              live={info.live}\n              kernel={info.kernel}\n              type={info.type}\n              config={info.config || {}}\n              src={src}\n              videoProps={{\n                ...videoProps,\n                onCanPlay: onVideoEvent,\n                onDurationChange: onVideoEvent,\n                onPause: onVideoEvent,\n                onPlay: onVideoEvent,\n                onPlaying: onVideoEvent,\n                onEnded: onVideoEvent,\n                onSeeked: onVideoEvent,\n                onSeeking: onVideoEvent,\n                onCanPlayThrough: onVideoEvent,\n                onEmptied: onVideoEvent,\n                onEncrypted: onVideoEvent,\n                onError: onVideoEvent,\n                onLoadedData: onVideoEvent,\n                onLoadedMetadata: onVideoEvent,\n                onLoadStart: onVideoEvent,\n                onRateChange: onVideoEvent,\n                onStalled: onVideoEvent,\n                onSuspend: onVideoEvent,\n                onVolumeChange: onVideoEvent,\n                onWaiting: onVideoEvent,\n                onAbort: onVideoEvent,\n              }}\n            >\n              <PlaybackRate></PlaybackRate>\n              {'flvjs' === info.kernel && info.live && <FouceLive></FouceLive>}\n            </ReactjsPlayer>\n          )}\n          {'flash' === info.kernel && (\n            <GrindPlayer {...info} src={src} grindPlayerSwf={grindPlayerSwf} flashlsOSMFSwf={flashlsOSMFSwf} />\n          )}\n        </div>\n        <aside className=\"aside\">\n          <div className=\"asideContainer\">\n            <Tabs className=\"asideTabs\" defaultActiveKey=\"info\">\n              <Tabs.TabPane tab=\"信息\" key=\"info\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">\n                    <Descriptions title=\"参数\" column={1} size=\"small\">\n                      <Descriptions.Item label=\"kernel\">{info.kernel}</Descriptions.Item>\n                      <Descriptions.Item label=\"live\">{info.live ? '是' : '否'}</Descriptions.Item>\n                      <Descriptions.Item label=\"src\">\n                        <span className=\"srcValue\">{src}</span>\n                      </Descriptions.Item>\n                      <Descriptions.Item label=\"type\">{info.type}</Descriptions.Item>\n                    </Descriptions>\n                  </div>\n                </Scrollbars>\n              </Tabs.TabPane>\n              <Tabs.TabPane tab=\"接口测试\" key=\"interface\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">暂时删除接口测试功能</div>\n                </Scrollbars>\n              </Tabs.TabPane>\n            </Tabs>\n            <div className=\"asideFooter\">\n              <a href=\"https://github.com/goblin-laboratory/reactjs-player\">\n                <GithubOutlined />\n                &nbsp; Github\n              </a>\n            </div>\n          </div>\n        </aside>\n      </main>\n    </div>\n  );\n});\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/GrindPlayer.2a08c30c.swf\";","export default __webpack_public_path__ + \"static/media/flashlsOSMF.54c6b059.swf\";","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\nimport log from 'loglevel';\n\nconst PlaybackRate = () => {\n  const { playbackRate } = React.useContext(ReactjsPlayer.PlayerContext);\n  const changeRate = React.useCallback((rate) => {\n    log.info(`Current playback rate is ${rate}.`);\n  }, []);\n\n  React.useEffect(() => {\n    changeRate(playbackRate);\n  }, [playbackRate, changeRate]);\n\n  return null;\n};\n\nexport default React.memo(PlaybackRate, () => true);\n","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\n\nconst FouceLive = () => {\n  const { getVideoElement, changeCurrentTime } = React.useContext(ReactjsPlayer.PlayerContext);\n  React.useEffect(() => {\n    const id = global.setInterval(() => {\n      if (!getVideoElement) {\n        return;\n      }\n      const el = getVideoElement();\n      if (!el || el.paused || !el.buffered) {\n        return;\n      }\n      const end = el.buffered.end(el.buffered.length - 1);\n      if (2 < end - el.currentTime) {\n        changeCurrentTime(end - 0.5);\n      }\n    }, 10 * 1000);\n    return () => {\n      global.clearInterval(id);\n    };\n  }, [getVideoElement, changeCurrentTime]);\n\n  return null;\n};\n\nexport default React.memo(FouceLive, () => true);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMi0yOFQxODoyNDozNCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDljYTEwNTMtNTU4Ny1lYjQ4LWEyMzEtZWY0MTUzNjRjYmY2IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Y2QyYjVhMTMtN2E2NC1lZDQ3LWE2NDctZWQwNDExMDgxMTFmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2NkZWQyZmItOWFmMi1lODQ2LWE5MGYtNTdhOGUyYzk3OGY2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozY2RlZDJmYi05YWYyLWU4NDYtYTkwZi01N2E4ZTJjOTc4ZjYiIHN0RXZ0OndoZW49IjIwMTgtMDItMjhUMTg6MjQ6MzQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5Y2ExMDUzLTU1ODctZWI0OC1hMjMxLWVmNDE1MzY0Y2JmNiIgc3RFdnQ6d2hlbj0iMjAxOC0wOC0yMFQxNDozODozOSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7p7qgTAAAAFklEQVQokWP4//8/AyWYIs2jBgwbAwCgra5gnLDJrQAAAABJRU5ErkJggg==\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\n\nconst getFlvjs = (src) =>\n  new Promise((resolve) => {\n    if (global.flvjs) {\n      resolve(global.flvjs);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.flvjs);\n    script.onerror = () => resolve(global.flvjs);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.pause();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.unload();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.detachMediaElement();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(async () => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    await getFlvjs('https://unpkg.com/flv.js/dist/flv.min.js');\n    if (!global.flvjs || !ref.current || ref.current.src !== target) {\n      debug('useFlvjs: 加载 hls.js 失败或者 src 已经变更');\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      debug('useFlvjs: video 元素不存在');\n      // TOOD: 显示错误\n      return;\n    }\n    const player = global.flvjs.createPlayer({ isLive: true, type: 'flv', url: target }, { ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    player.attachMediaElement(el);\n    player.load();\n    player.on(global.flvjs.Events.ERROR, (type, detail) => {\n      if (ref.current && ref.current.onMsgChange) {\n        ref.current.onMsgChange({ type, detail });\n      }\n    });\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useFlvjs from './useFlvjs';\n\nconst Flvjs = (props) => {\n  // console.log(`Flvjs`);\n  useFlvjs(props);\n  return null;\n};\n\nFlvjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nFlvjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Flvjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nconst getHls = (src) =>\n  new Promise((resolve) => {\n    if (global.Hls) {\n      resolve(global.Hls);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.Hls);\n    script.onerror = () => resolve(global.Hls);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(async () => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    await getHls('https://unpkg.com/hls.js/dist/hls.min.js');\n    if (!global.Hls || !ref.current || ref.current.src !== target) {\n      debug('useHlsjs: 加载 hls.js 失败或者 src 已经变更');\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      debug('useHlsjs: video 元素不存在');\n      // TOOD: 显示错误\n      return;\n    }\n    const player = new global.Hls({ debug: false, ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    player.attachMedia(el);\n    player.once(global.Hls.Events.MEDIA_ATTACHED, () => {\n      if (ref.current && ref.current.src === target) {\n        player.loadSource(target);\n      }\n    });\n    player.on(global.Hls.Events.ERROR, (e, info) => {\n      if (ref.current && ref.current.onMsgChange && info && info.fatal) {\n        ref.current.onMsgChange({ type: info.type, detail: info.details });\n      }\n    });\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useHlsjs from './useHlsjs';\n\nconst Hlsjs = (props) => {\n  useHlsjs(props);\n  return null;\n};\n\nHlsjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nHlsjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Hlsjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useNative from './useNative';\n\nconst Native = (props) => {\n  useNative(props);\n  return null;\n};\n\nNative.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nNative.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(\n  Native,\n  (p, n) => p.getVideoElement === n.getVideoElement && p.src === n.src && p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nexport default ({ getVideoElement, src, onMsgChange }) => {\n  const ref = React.useRef({ getVideoElement, src: '', onMsgChange, loaded: false });\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    ref.current.getVideoElement = getVideoElement;\n  }, [src, getVideoElement]);\n\n  React.useEffect(() => {\n    // ref.current.onMsgChange(null);\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = src;\n    // el.play().catch(() => {});\n    el.load();\n  }, [src]);\n\n  // 页面切换时强制停止播放\n  const onUnload = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = '';\n    try {\n      el.load();\n    } catch (errMsg) {}\n  }, []);\n\n  const onError = React.useCallback((e) => {\n    const msg = { type: 'Error', detail: 'Unknown exception' };\n    if (e.target && e.target.error && e.target.error.code) {\n      msg.detail = `Code ${e.target.error.code}`;\n    }\n    ref.current.onMsgChange(msg);\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('beforeunload', onUnload);\n    global.addEventListener('pagehide', onUnload);\n    global.addEventListener('unload', onUnload);\n    return () => {\n      onUnload({ type: 'useEffect' });\n    };\n  }, [onUnload]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('error', onError);\n\n    return () => {\n      el.removeEventListener('error', onError);\n    };\n  }, [onError]);\n  return null;\n};\n","export default class SRSPlayer {\n  static isSupported() {\n    if (!MediaStream || !RTCPeerConnection || !RTCSessionDescription) {\n      return false;\n    }\n    if (!RTCPeerConnection.prototype.addTransceiver) {\n      return false;\n    }\n    return true;\n  }\n\n  constructor(url, config) {\n    // webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY\n    const matched = url.match(/^webrtc:\\/\\/([^/]+)(\\/.*)?$/);\n    if (!matched) {\n      return null;\n    }\n    this.url = url;\n    const protocol = 'string' === typeof config.protocol ? config.protocol : global.location.protocol;\n    const pathname = 'string' === typeof config.pathname ? config.pathname : '/rtc/v1/play/';\n    this.api = `${protocol}//${matched[1]}${pathname}`;\n    this.stream = new MediaStream();\n    this.trackList = [];\n    return this;\n  }\n\n  subscribe() {\n    if (!this.url) {\n      return null;\n    }\n    this.unsubscribe();\n    this.createRTCPeerConnection();\n    this.connectPeerConnection();\n    return this.stream;\n  }\n\n  unsubscribe() {\n    if (!this.pc) {\n      return;\n    }\n    this.closeRTCPeerConnection();\n  }\n\n  destroy() {\n    this.unsubscribe();\n\n    delete this.url;\n    delete this.api;\n    delete this.stream;\n    delete this.trackList;\n  }\n\n  createRTCPeerConnection() {\n    const pc = new RTCPeerConnection({\n      iceTransportPolicy: 'all',\n      bundlePolicy: 'max-bundle',\n      rtcpMuxPolicy: 'require',\n      iceCandidatePoolSize: '0',\n      sdpSemantics: 'unified-plan',\n      tcpCandidatePolicy: 'disable',\n      IceTransportsType: 'nohost',\n    });\n    // const pc = new RTCPeerConnection(null);\n    pc.addTransceiver('audio', { direction: 'recvonly' });\n    pc.addTransceiver('video', { direction: 'recvonly' });\n\n    // pc.onnegotiationneeded = (event) => console.log(event.type);\n    // pc.onicecandidate = (event) => console.log(event.type);\n    // pc.onicecandidateerror = (event) => console.log(event.type);\n    // pc.onsignalingstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.onicegatheringstatechange = (event) => console.log(event.type);\n\n    pc.ontrack = (event) => {\n      // console.log(event.type);\n      this.stream.addTrack(event.track);\n      this.trackList.push(event.track);\n    };\n\n    // pc.onconnectionstatechange = (event) => {\n    //   console.log(`${event.type}: ${event.target.connectionState}`);\n    //   // if ('disconnected' === event.target.connectionState) {\n    //   //   onDisconnect();\n    //   // }\n    // };\n\n    this.pc = pc;\n    return this.pc;\n  }\n\n  connectPeerConnection() {\n    const { pc } = this;\n    return pc\n      .createOffer()\n      .then((offer) => pc.setLocalDescription(offer).then(() => offer))\n      .then((offer) => this.getSessionInfo({ sdp: offer.sdp }))\n      .then((sdp) => pc.setRemoteDescription(new RTCSessionDescription({ type: 'answer', sdp })));\n  }\n\n  closeRTCPeerConnection() {\n    if (this.trackList) {\n      this.trackList.forEach((track) => {\n        try {\n          this.stream.removeTrack(track);\n        } catch (errMsg) {}\n        try {\n          track.stop();\n        } catch (errMsg) {}\n      });\n      this.trackList = [];\n    }\n\n    if (!this.pc) {\n      return;\n    }\n    const { pc } = this;\n    delete this.pc;\n    pc.ontrack = () => {};\n    pc.onconnectionstatechange = () => {};\n\n    try {\n      pc.getSenders().forEach((it) => pc.removeTrack(it));\n    } catch (errMsg) {}\n    try {\n      pc.close();\n    } catch (errMsg) {}\n  }\n\n  getSessionInfo({ sdp }) {\n    return this.sendRequest(this.api, {\n      method: 'POST',\n      body: JSON.stringify({\n        api: this.api,\n        sdp,\n        streamurl: this.url,\n        clientip: null,\n        tid: Number(parseInt(new Date().getTime() * Math.random() * 100, 10))\n          .toString(16)\n          .substr(0, 7),\n      }),\n    }).then((info) => {\n      if (!info.sdp) {\n        return Promise.reject(info);\n      }\n      return info.sdp;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  sendRequest(url, opts) {\n    return fetch(url, {\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n      ...opts,\n    })\n      .then((response) => {\n        if (200 <= response.status && 300 > response.status) {\n          return response;\n        }\n        const errMsg = new Error(response.statusText);\n        errMsg.response = response;\n        return Promise.reject(errMsg);\n      })\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          return text ? JSON.parse(text) : {};\n        } catch (errMsg) {\n          return Promise.reject(errMsg);\n        }\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useSRSWebRTC from './useSRSWebRTC';\n\nconst SRSWebRTC = (props) => {\n  useSRSWebRTC(props);\n  return null;\n};\n\nSRSWebRTC.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nSRSWebRTC.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  SRSWebRTC,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport SRSPlayer from './SRSPlayer';\n// import SrsRtcPlayerAsync from './SrsRtcPlayerAsync';\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.getVideoElement) {\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.srcObject = null;\n      }\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(() => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    const player = new SRSPlayer(target, { ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    const stream = player.subscribe();\n    el.pause();\n    el.srcObject = stream;\n    el.load();\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\n\nconst PlayerContext = React.createContext([{}, () => {}]);\n\nexport default PlayerContext;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon from '@ant-design/icons';\nimport { ReactComponent as MutedSvg } from '../Volume/muted.svg';\nimport styles from './index.module.less';\n\nconst PreventedTip = ({ src, prevented }) => {\n  if (!src || !prevented) {\n    return null;\n  }\n  return (\n    <div className={styles.preventedTip}>\n      <Icon className={styles.mutedSvg} component={MutedSvg} />\n      点击取消静音\n    </div>\n  );\n  // return <div className={styles.preventedTip}>视频播放被阻止</div>;\n};\n\nPreventedTip.propTypes = {\n  src: PropTypes.string,\n  prevented: PropTypes.bool.isRequired,\n};\n\nPreventedTip.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(PreventedTip, (p, n) => p.src === n.src && p.prevented === n.prevented);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst VideoMask = ({ src, showControls }) => {\n  return (\n    <button\n      type=\"button\"\n      className={styles.videoMask}\n      style={src ? { opacity: 0, background: 'transparent' } : {}}\n      onMouseMove={showControls}\n      onClick={showControls}\n    />\n  );\n};\n\nVideoMask.propTypes = {\n  src: PropTypes.string,\n  showControls: PropTypes.func.isRequired,\n};\n\nVideoMask.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(VideoMask, (p, n) => p.src === n.src && p.showControls === n.showControls);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined, PlayCircleOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst PlayState = ({ src, loading, paused, ended, seeking, waiting, kernelMsg, onPlayClick }) => {\n  if (!src || loading || kernelMsg) {\n    return null;\n  }\n\n  if (waiting || seeking) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  if (paused || ended) {\n    return (\n      <button type=\"button\" className={styles.play} onClick={onPlayClick}>\n        <PlayCircleOutlined />\n      </button>\n    );\n  }\n  return null;\n};\n\nPlayState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  kernelMsg: PropTypes.object,\n  onPlayClick: PropTypes.func.isRequired,\n};\n\nPlayState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.kernelMsg === n.kernelMsg &&\n    p.onPlayClick === n.onPlayClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst TopState = ({ src, loading, kernelMsg }) => {\n  if (!src) {\n    return null;\n  }\n\n  if (kernelMsg) {\n    return (\n      <div className={styles.kernelMsg}>\n        {kernelMsg.type}: {kernelMsg.detail}\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  return null;\n};\n\nTopState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  // duration: PropTypes.number.isRequired,\n  // currentTime: PropTypes.number.isRequired,\n  kernelMsg: PropTypes.object,\n};\n\nTopState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  TopState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.kernelMsg === n.kernelMsg,\n);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\nimport bgImg from './bg.png';\n\nconst Controls = ({ hiding, dispatch, children }) => {\n  const onMouseEnter = React.useCallback(() => {\n    if (global.matchMedia) {\n      const matched = global.matchMedia('(hover: none), (pointer: coarse)');\n      if (matched && matched.matches) {\n        return;\n      }\n    }\n    dispatch({ type: 'update', payload: { controlsHovering: true } });\n  }, [dispatch]);\n\n  const onMouseLeave = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { controlsHovering: false } });\n  }, [dispatch]);\n\n  return (\n    <div\n      className={styles.controls}\n      style={{ backgroundImage: `url(${bgImg})`, transform: hiding ? 'translate(0, 48px)' : 'translate(0, 0)' }}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n    </div>\n  );\n};\n\nControls.propTypes = {\n  hiding: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nControls.defaultProps = {\n  // buffered: null,\n};\n\nexport default React.memo(\n  Controls,\n  (p, n) => p.hiding === n.hiding && p.dispatch === n.dispatch && p.children === n.children,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst ControlBar = ({ children, extra }) => {\n  return (\n    <div className={styles.controlBar}>\n      <div className={styles.flexItem}>{children}</div>\n      {extra}\n    </div>\n  );\n};\n\nControlBar.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  extra: PropTypes.node.isRequired,\n};\n\n// ControlBar.defaultProps = {\n//   // buffered: null,\n// };\n\nexport default React.memo(ControlBar, (p, n) => p.children === n.children && p.extra === n.extra);\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\nimport styles from './index.module.less';\n\nconst getBufferedEnd = (currentTime, buffered) => {\n  if (!buffered) {\n    return 0;\n  }\n  for (let i = buffered.length - 1; 0 <= i; i -= 1) {\n    const end = buffered.end(i);\n    if (currentTime <= end && buffered.start(i) <= currentTime) {\n      return end;\n    }\n  }\n  return 0;\n};\n\nconst getEventXCoordinate = (e) => {\n  if (e.changedTouches && 1 <= e.changedTouches.length) {\n    return e.changedTouches[0].pageX;\n  }\n  return e.clientX || 0;\n};\n\nconst getValue = (e, rect, duration) => {\n  const w = getEventXCoordinate(e) - rect.left;\n  if (0 >= w) {\n    return 0;\n  }\n  if (w >= rect.width) {\n    return duration;\n  }\n  return Math.round((duration * w) / rect.width);\n};\n\nconst getBufferedScaleX = ({ buffered, currentTime, sliding, duration }) => {\n  if (0 >= duration || sliding) {\n    return 0;\n  }\n  const e = getBufferedEnd(currentTime, buffered);\n  return (e / duration).toFixed(3);\n};\n\nconst getTrackTranslateX = ({ duration, currentTime }) => {\n  if (0 === duration) {\n    return -100;\n  }\n  return ((100 * currentTime) / duration - 100).toFixed(1);\n};\n\nconst getMouseTranslateX = ({ duration, tooltip }) => {\n  if (0 >= duration) {\n    return 0;\n  }\n  return ((100 * tooltip) / duration).toFixed(1);\n};\n\nconst MouseTooltip = React.memo(({ duration, tooltip }) => {\n  const translateX = getMouseTranslateX({ duration, tooltip });\n  return (\n    <div className={styles.tooltip} style={{ transform: `translateX(${translateX}%)` }}>\n      <div className={styles.tip}>{numeral(tooltip).format('00:00:00')}</div>\n    </div>\n  );\n});\n\nMouseTooltip.propTypes = {\n  duration: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n};\n\nconst TimeSlider = React.memo(({ currentTime, duration, buffered, onChange, sliding, value, tooltip, dispatch }) => {\n  const ref = React.useRef({});\n  const sliderRef = React.useRef(null);\n\n  const onClick = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n\n      const rect = e.currentTarget.getBoundingClientRect();\n      const v = getValue(e, rect, duration);\n      onChange(v);\n    },\n    [onChange, duration, dispatch],\n  );\n\n  const onMouseDown = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      const react = sliderRef.current.getBoundingClientRect();\n      ref.current.react = { left: react.left, width: react.width };\n      dispatch({ type: 'update', payload: { sliding: true } });\n    },\n    [dispatch],\n  );\n\n  const update = React.useCallback(() => {\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const onMouseUp = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n      if (ref.current.react) {\n        const v = getValue(e, ref.current.react, duration);\n        ref.current.payload = { value: v };\n        update();\n        onChange(v);\n      }\n    },\n    [onChange, duration, update, dispatch],\n  );\n\n  const onMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.value = v;\n      } else {\n        ref.current.payload = { value: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  React.useEffect(() => {\n    if (sliding) {\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchcancel', onMouseUp);\n      document.addEventListener('touchend', onMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', onMouseMove);\n        document.removeEventListener('mouseup', onMouseUp);\n\n        document.removeEventListener('touchmove', onMouseMove);\n        document.removeEventListener('touchcancel', onMouseUp);\n        document.removeEventListener('touchend', onMouseUp);\n      };\n    }\n    return () => {};\n  }, [sliding, onMouseMove, onMouseUp]);\n\n  const onSliderMouseOver = React.useCallback((e) => {\n    e.preventDefault();\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  const onSliderMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.tooltip = v;\n      } else {\n        ref.current.payload = { tooltip: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  const onResize = React.useCallback((e) => {\n    e.preventDefault();\n    if (!sliderRef || !sliderRef.current) {\n      return;\n    }\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('resize', onResize);\n    return () => {\n      global.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = {};\n    };\n  }, []);\n\n  const bufferedScaleX = getBufferedScaleX({ buffered, currentTime, sliding, duration });\n  const trackTranslateX = getTrackTranslateX({ duration, currentTime: sliding ? value : currentTime });\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={sliding ? styles.slidingSlider : styles.slider}\n      ref={sliderRef}\n      onClick={onClick}\n      onKeyDown={() => {}}\n      onMouseOver={onSliderMouseOver}\n      onMouseMove={onSliderMouseMove}\n      onFocus={() => {}}\n    >\n      <button type=\"button\" className={styles.sliderButton} onTouchStart={onMouseDown}>\n        <span className={styles.slidingTip} style={{ opacity: sliding ? 1 : 0 }}>\n          快进到：{numeral(value).format('00:00:00')}\n        </span>\n      </button>\n      <div className={styles.sliderRail}>\n        <div className={styles.sliderBuffered} style={{ transform: `scaleX(${bufferedScaleX})` }} />\n        <div className={styles.sliderTrack} style={{ transform: `translateX(${trackTranslateX}%)` }} />\n      </div>\n      <div className={styles.sliderHandleRail} style={{ transform: `translateX(${trackTranslateX}%)` }}>\n        <button type=\"button\" className={styles.sliderHandle} onMouseDown={onMouseDown} onTouchStart={onMouseDown} />\n      </div>\n      <MouseTooltip duration={duration} tooltip={sliding ? value : tooltip} />\n    </div>\n  );\n});\n\nTimeSlider.propTypes = {\n  currentTime: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  sliding: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nTimeSlider.defaultProps = {\n  buffered: null,\n};\n\nexport default React.memo(\n  TimeSlider,\n  (p, n) =>\n    p.currentTime === n.currentTime &&\n    p.duration === n.duration &&\n    p.buffered === n.buffered &&\n    p.onChange === n.onChange &&\n    p.sliding === n.sliding &&\n    p.value === n.value &&\n    p.tooltip === n.tooltip &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CaretRightOutlined, PauseOutlined } from '@ant-design/icons';\n// import styles from './index.module.less';\n\nconst PlayButton = ({ paused, ended, onPlayClick, onPauseClick }) => {\n  return paused || ended ? (\n    <button type=\"button\" onClick={onPlayClick}>\n      <CaretRightOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={onPauseClick}>\n      <PauseOutlined />\n    </button>\n  );\n};\n\nPlayButton.propTypes = {\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayButton,\n  (p, n) =>\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onPauseClick === n.onPauseClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from 'antd';\nimport Icon from '@ant-design/icons';\n// import 'antd/lib/slider/style/index.css';\nimport styles from './index.module.less';\n\nimport { ReactComponent as MutedSvg } from './muted.svg';\nimport { ReactComponent as UnmutedSvg } from './unmuted.svg';\n\nconst Volume = ({ muted, volume, changeVolume, onMutedClick }) => {\n  return (\n    <span className={styles.volume}>\n      {(muted || 0 === volume) && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={MutedSvg} />\n        </button>\n      )}\n      {!muted && 0 !== volume && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={UnmutedSvg} />\n        </button>\n      )}\n      <span className={styles.volumeSlider}>\n        <Slider value={volume * 100} onChange={(v) => changeVolume(v / 100)} max={100} />\n      </span>\n    </span>\n  );\n};\n\nVolume.propTypes = {\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  Volume,\n  (p, n) =>\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolum,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\n\nimport styles from './index.module.less';\n\nconst PlayTime = ({ live, duration, currentTime }) => {\n  return (\n    <span className={styles.controlText}>\n      {numeral(Math.round(currentTime)).format('00:00:00')}\n      {live ? (\n        <span className={styles.controlText}>\n          <span className={styles.liveDot} />\n          直播\n        </span>\n      ) : (\n        ` / ${numeral(Math.round(duration)).format('00:00:00')}`\n      )}\n    </span>\n  );\n};\n\nPlayTime.propTypes = {\n  live: PropTypes.bool.isRequired,\n  duration: PropTypes.number.isRequired,\n  currentTime: PropTypes.number.isRequired,\n};\n\nexport default React.memo(\n  PlayTime,\n  (p, n) => p.live === n.live && p.duration === n.duration && p.currentTime === n.currentTime,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, Menu } from 'antd';\n\nimport styles from './index.module.less';\n\nconst PlayRate = ({ live, playbackRate, changePlaybackRate, visible, dispatch }) => {\n  const show = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      dispatch({ type: 'update', payload: { rateMenuVisible: true } });\n    },\n    [dispatch],\n  );\n\n  const hide = React.useCallback(() => dispatch({ type: 'update', payload: { rateMenuVisible: false } }), [dispatch]);\n\n  const onMenuClick = React.useCallback(\n    (e) => {\n      changePlaybackRate(parseFloat(e.key, 10));\n      dispatch({ type: 'update', payload: { rateMenuVisible: false } });\n    },\n    [changePlaybackRate, dispatch],\n  );\n\n  React.useEffect(() => {\n    document.body.addEventListener('click', hide);\n    return () => document.body.removeEventListener('click', hide);\n  }, [hide]);\n\n  if (live) {\n    return null;\n  }\n\n  return (\n    <Dropdown\n      visible={visible}\n      overlay={\n        <Menu selectedKeys={[playbackRate.toString()]} onClick={onMenuClick}>\n          <Menu.Item key=\"0.25\">&nbsp;&nbsp;0.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"0.5\">&nbsp;&nbsp;0.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1\">&nbsp;&nbsp;1 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.25\">&nbsp;&nbsp;1.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.5\">&nbsp;&nbsp;1.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"2\">&nbsp;&nbsp;2 倍速&nbsp;&nbsp;</Menu.Item>\n        </Menu>\n      }\n      placement=\"topRight\"\n      trigger={[]}\n    >\n      <button type=\"button\" className={styles.textBtn} onClick={show}>\n        倍速\n      </button>\n    </Dropdown>\n  );\n};\n\nPlayRate.propTypes = {\n  live: PropTypes.bool.isRequired,\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  visible: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayRate,\n  (p, n) =>\n    p.live === n.live &&\n    p.playbackRate === n.playbackRate &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.visible === n.visible &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FullscreenExitOutlined, FullscreenOutlined } from '@ant-design/icons';\n\nconst FullscreenButton = ({ fullscreen, requestFullscreen, exitFullscreen }) => {\n  return fullscreen ? (\n    <button type=\"button\" onClick={exitFullscreen}>\n      <FullscreenExitOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={requestFullscreen}>\n      <FullscreenOutlined />\n    </button>\n  );\n};\n\nFullscreenButton.propTypes = {\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  FullscreenButton,\n  (p, n) =>\n    p.fullscreen === n.fullscreen &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './index.module.less';\n\nconst PictureInPicture = ({ pictureInPictureEnabled, pip, exitPictureInPicture, requestPictureInPicture }) => {\n  if (!pictureInPictureEnabled) {\n    return null;\n  }\n  return (\n    <button type=\"button\" className={styles.textBtn} onClick={pip ? exitPictureInPicture : requestPictureInPicture}>\n      画中画\n    </button>\n  );\n};\n\nPictureInPicture.propTypes = {\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PictureInPicture,\n  (p, n) =>\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestPictureInPicture === n.requestPictureInPicture,\n);\n","import React from 'react';\n\nconst initialState = {\n  controlsHovering: false,\n  sliding: false,\n  value: 0,\n  tooltip: 0,\n  hiding: false,\n  rateMenuVisible: false,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default () => {\n  const [{ controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible }, dispatch] = React.useReducer(\n    reducer,\n    initialState,\n  );\n  // const ref = React.useRef({});\n\n  React.useEffect(() => {\n    // console.log('usePlayerSkin');\n    return () => {\n      dispatch({ type: 'reset' });\n    };\n  }, []);\n\n  return {\n    dispatch,\n    controlsHovering,\n    hiding,\n    sliding,\n    value,\n    tooltip,\n    rateMenuVisible,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PreventedTip from './PreventedTip';\nimport VideoMask from './VideoMask';\nimport PlayState from './PlayState';\nimport TopState from './TopState';\n\nimport Controls from './Controls';\nimport ControlBar from './ControlBar';\nimport TimeSlider from './TimeSlider';\nimport PlayButton from './Controls/PlayButton';\nimport Volume from './Volume';\nimport PlayTime from './PlayTime';\nimport PlayRate from './Controls/PlayRate';\nimport FullscreenButton from './Controls/FullscreenButton';\nimport PictureInPicture from './Controls/PictureInPicture';\n\nimport usePlayerSkin from './usePlayerSkin';\nimport useAutoHide from './useAutoHide';\nimport 'antd/lib/tooltip/style/index.css';\nimport 'antd/lib/slider/style/index.css';\nimport 'antd/lib/dropdown/style/index.css';\nimport styles from './index.module.less';\n\nconst PlayerSkin = ({\n  live,\n  src,\n  prevented,\n  loading,\n  paused,\n  ended,\n  seeking,\n  waiting,\n  onPlayClick,\n  onPauseClick,\n  duration,\n  buffered,\n  currentTime,\n  changeCurrentTime,\n  muted,\n  volume,\n  changeVolume,\n  onMutedClick,\n  playbackRate,\n  changePlaybackRate,\n  pictureInPictureEnabled,\n  pip,\n  requestPictureInPicture,\n  exitPictureInPicture,\n  fullscreen,\n  requestFullscreen,\n  exitFullscreen,\n  kernelMsg,\n}) => {\n  const { dispatch, controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible } = usePlayerSkin();\n\n  const { show } = useAutoHide({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    kernelMsg,\n    dispatch,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n  });\n\n  return (\n    <div className={styles.playerSkin}>\n      <VideoMask src={src} showControls={show} />\n      <PlayState\n        src={src}\n        loading={loading}\n        paused={paused}\n        ended={ended}\n        waiting={waiting}\n        seeking={seeking}\n        kernelMsg={kernelMsg}\n        onPlayClick={onPlayClick}\n      />\n      <Controls hiding={hiding} dispatch={dispatch}>\n        {false === live && (\n          <TimeSlider\n            currentTime={currentTime}\n            duration={duration}\n            buffered={buffered}\n            onChange={changeCurrentTime}\n            sliding={sliding}\n            value={value}\n            tooltip={tooltip}\n            dispatch={dispatch}\n          />\n        )}\n        <ControlBar\n          extra={\n            <>\n              <PictureInPicture\n                pictureInPictureEnabled={pictureInPictureEnabled}\n                pip={pip}\n                requestPictureInPicture={requestPictureInPicture}\n                exitPictureInPicture={exitPictureInPicture}\n              />\n              <PlayRate\n                live={live}\n                playbackRate={playbackRate}\n                changePlaybackRate={changePlaybackRate}\n                dispatch={dispatch}\n                visible={rateMenuVisible}\n              />\n              <FullscreenButton\n                fullscreen={fullscreen}\n                requestFullscreen={requestFullscreen}\n                exitFullscreen={exitFullscreen}\n              />\n            </>\n          }\n        >\n          <PlayButton paused={paused} ended={ended} onPauseClick={onPauseClick} onPlayClick={onPlayClick} />\n          <Volume muted={muted} volume={volume} onMutedClick={onMutedClick} changeVolume={changeVolume} />\n          <PlayTime live={live} currentTime={currentTime} duration={duration} />\n        </ControlBar>\n      </Controls>\n      <PreventedTip src={src} prevented={prevented} />\n      <TopState src={src} loading={loading} kernelMsg={kernelMsg} />\n    </div>\n  );\n};\n\nPlayerSkin.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string,\n  // controls: PropTypes.bool.isRequired,\n  // state\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n  // time\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  currentTime: PropTypes.number.isRequired,\n  changeCurrentTime: PropTypes.func.isRequired,\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  // playbackRate\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  // pip\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n  // kernel\n  kernelMsg: PropTypes.object,\n};\n\nPlayerSkin.defaultProps = {\n  live: false,\n  src: '',\n  buffered: null,\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayerSkin,\n  (p, n) =>\n    p.live === n.live &&\n    p.src === n.src &&\n    // p.controls === n.controls &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.buffered === n.buffered &&\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.playbackRate === n.playbackRate &&\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.fullscreen === n.fullscreen &&\n    p.kernelMsg === n.kernelMsg &&\n    p.getVideoElement === n.getVideoElement &&\n    p.onPauseClick === n.onPauseClick &&\n    p.onPlayClick === n.onPlayClick &&\n    p.changeCurrentTime === n.changeCurrentTime &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolume &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.requestPictureInPicture === n.requestPictureInPicture &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\n\nexport default ({\n  src,\n  loading,\n  prevented,\n  paused,\n  ended,\n  waiting,\n  seeking,\n  kernelMsg,\n  controlsHovering,\n  sliding,\n  rateMenuVisible,\n  dispatch,\n}) => {\n  const ref = React.useRef({});\n\n  const animationFrameCallback = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.requestID || true === ref.current.hiding) {\n        return;\n      }\n      if (!ref.current.timestamp) {\n        ref.current.timestamp = timestamp;\n      }\n      if (3 * 1000 > timestamp - ref.current.timestamp) {\n        ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n        return;\n      }\n      dispatch({ type: 'update', payload: { hiding: true } });\n      ref.current.hiding = true;\n      delete ref.current.requestID;\n      delete ref.current.timestamp;\n    },\n    [dispatch],\n  );\n\n  const startAutoHide = React.useCallback(() => {\n    if (false !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    delete ref.current.timestamp;\n    if (ref.current.requestID) {\n      return;\n    }\n    ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n  }, [dispatch, animationFrameCallback]);\n\n  const stopAutoHide = React.useCallback(() => {\n    if (true !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    if (ref.current.requestID) {\n      global.cancelAnimationFrame(ref.current.requestID);\n    }\n    delete ref.current.requestID;\n    delete ref.current.timestamp;\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    if (\n      !src ||\n      loading ||\n      prevented ||\n      paused ||\n      ended ||\n      waiting ||\n      seeking ||\n      sliding ||\n      rateMenuVisible ||\n      controlsHovering ||\n      kernelMsg\n    ) {\n      stopAutoHide();\n    } else {\n      startAutoHide();\n    }\n  }, [\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n    kernelMsg,\n    startAutoHide,\n    stopAutoHide,\n  ]);\n\n  return { show: startAutoHide };\n};\n","import React from 'react';\nimport PlayerContext from '../PlayerContext';\nimport PlayerSkin from '../PlayerSkin';\n\nconst PlayerSkinWapper = () => {\n  const props = React.useContext(PlayerContext);\n  return <PlayerSkin {...props} />;\n};\n\nexport default PlayerSkinWapper;\n","import React from 'react';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  playbackRate: 1,\n  enabled: !!document.pictureInPictureEnabled,\n  pictureInPictureEnabled: !!document.pictureInPictureEnabled,\n  pip: false,\n  fullscreen: false,\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      playbackRate,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n  const ref = React.useRef({ src });\n\n  const clearUpdateTimeout = React.useCallback(() => {\n    if (ref.current && ref.current.timeout) {\n      global.clearTimeout(ref.current.timeout);\n      delete ref.current.timeout;\n    }\n  }, []);\n\n  const timeoutCallback = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    delete ref.current.timeout;\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const updateState = React.useCallback(\n    (payload, sync = false) => {\n      if (!ref.current) {\n        return;\n      }\n      ref.current.payload = { ...ref.current.payload, ...payload };\n      if (sync) {\n        timeoutCallback();\n        return;\n      }\n      if (ref.current.timeout) {\n        return;\n      }\n      ref.current.timeout = global.setTimeout(timeoutCallback, 100);\n    },\n    [timeoutCallback],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      clearUpdateTimeout();\n      ref.current = null;\n    };\n  }, [clearUpdateTimeout]);\n\n  React.useEffect(() => {\n    clearUpdateTimeout();\n    dispatch({ type: 'reset' });\n  }, [src, clearUpdateTimeout]);\n\n  return {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  };\n};\n","import React from 'react';\nimport usePlayerReducer from '../hooks/usePlayerReducer';\nimport useVideoState from '../hooks/useVideoState';\nimport useTime from '../hooks/useTime';\nimport useVolume from '../hooks/useVolume';\nimport usePlaybackRate from '../hooks/usePlaybackRate';\nimport usePiP from '../hooks/usePiP';\nimport useFullscreen from '../hooks/useFullscreen';\n\nexport default ({ src, live, onKernelError }) => {\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n\n  const {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  } = usePlayerReducer({ src });\n\n  const getVideoElement = React.useCallback(() => videoRef && videoRef.current, []);\n  const getPlayerElement = React.useCallback(() => playerRef && playerRef.current, []);\n\n  const onMsgChange = React.useCallback(\n    (msg) => {\n      // debugger;\n      updateState({ kernelMsg: msg });\n      if (onKernelError) {\n        onKernelError(msg);\n      }\n    },\n    [updateState, onKernelError],\n  );\n\n  const { onPauseClick, onPlayClick } = useVideoState({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    updateState,\n    getVideoElement,\n  });\n\n  const { changeCurrentTime } = useTime({ src, duration, currentTime, buffered, updateState, getVideoElement });\n  const { onMutedClick, changeVolume } = useVolume({ src, prevented, muted, volume, updateState, getVideoElement });\n  const { changePlaybackRate } = usePlaybackRate({ src, live, playbackRate, updateState, getVideoElement });\n  const { requestPictureInPicture, exitPictureInPicture } = usePiP({ src, pip, updateState, getVideoElement });\n  const { requestFullscreen, exitFullscreen } = useFullscreen({ updateState, getVideoElement, getPlayerElement });\n\n  return {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  };\n};\n","import React from 'react';\n\nexport default ({ src, loading, prevented, ended, updateState, getVideoElement }) => {\n  const ref = React.useRef({ getVideoElement, loading, prevented, ended });\n\n  const onPlayClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      if (ref.current.ended) {\n        el.currentTime = 0;\n      }\n      const promise = el.play();\n      if (!promise || !promise.then) {\n        return;\n      }\n      promise\n        // .then(() => updateState({ loading: false }))\n        .catch((e) => {\n          if (!ref.current) {\n            return;\n          }\n          if ('NotAllowedError' === e.name) {\n            updateState({ prevented: true });\n            el.muted = true;\n            el.play();\n          }\n        });\n    }\n    updateState({ paused: false }, true);\n  }, [updateState]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.pause();\n    }\n    updateState({ paused: true }, true);\n  }, [updateState]);\n\n  const onCanPlay = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ loading: false, waiting: false });\n    if (ref.current.loading) {\n      onPlayClick();\n    }\n  }, [updateState, onPlayClick]);\n\n  const onPause = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: true });\n  }, [updateState]);\n\n  const onPlay = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onPlaying = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onEnded = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ ended: true });\n  }, [updateState]);\n\n  const onSeeked = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ seeking: false });\n  }, [updateState]);\n\n  const onSeeking = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ seeking: true });\n  }, [updateState]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ waiting: false });\n  }, [updateState]);\n\n  const onWaiting = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ waiting: true });\n  }, [updateState]);\n\n  const onDocumentClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    // NOTE: addEventListener 使用了 once ，理论上是不需要 remove 的，这里做个保护\n    document.removeEventListener('click', onDocumentClick);\n    // NOTE: 自动播放已被阻止的情况下将静音取消\n    if (ref.current.prevented) {\n      if (el.muted) {\n        el.muted = false;\n      }\n      return;\n    }\n    // NOTE: 未出现播放阻止的两种情况，一是已经在正常播放了，此时不要处理了，二是页面还未调用播放\n    if (ref.current.src) {\n      // NOTE: 未出现播放\n      return;\n    }\n    // NOTE: 页面发生点击的时候调用一下 video play，后续的自动播放可以成功\n    el.src = '';\n    try {\n      const p = el.play();\n      if (p) {\n        p.catch((e) => {\n          // eslint-disable-next-line no-console\n          console.log('useAutoplay[onDocumentClick]: load empty src for autoPlay, %o', e);\n        });\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log('useAutoplay[onDocumentClick]: load empty src for autoPlay, %o', e);\n    }\n    // el.pause();\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    if (src) {\n      updateState({ loading: true }, true);\n    }\n  }, [src, updateState]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.loading = loading;\n    ref.current.prevented = prevented;\n    ref.current.ended = ended;\n  }, [loading, prevented, ended]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('canplay', onCanPlay);\n    el.addEventListener('pause', onPause);\n    el.addEventListener('play', onPlay);\n    el.addEventListener('playing', onPlaying);\n    el.addEventListener('ended', onEnded);\n    el.addEventListener('seeked', onSeeked);\n    el.addEventListener('seeking', onSeeking);\n    el.addEventListener('canplaythrough', onCanPlayThrough);\n    el.addEventListener('waiting', onWaiting);\n    document.addEventListener('click', onDocumentClick, { once: true });\n    return () => {\n      el.removeEventListener('canplay', onCanPlay);\n      el.removeEventListener('pause', onPause);\n      el.removeEventListener('play', onPlay);\n      el.removeEventListener('playing', onPlaying);\n      el.removeEventListener('ended', onEnded);\n      el.removeEventListener('seeked', onSeeked);\n      el.removeEventListener('seeking', onSeeking);\n      el.removeEventListener('canplaythrough', onCanPlayThrough);\n      el.removeEventListener('waiting', onWaiting);\n      document.removeEventListener('click', onDocumentClick);\n    };\n  }, [\n    onCanPlay,\n    onPause,\n    onPlay,\n    onPlaying,\n    onEnded,\n    onSeeked,\n    onSeeking,\n    onCanPlayThrough,\n    onWaiting,\n    onDocumentClick,\n  ]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ src, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement, timestamp: 0, payload: null });\n  // const updateRef = React.useRef(null);\n\n  const onDurationChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      const v = e.target.duration;\n      // TODO: 同步更新\n      updateState({ duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 });\n    },\n    [updateState],\n  );\n\n  const update = React.useCallback(\n    (timestamp) => {\n      if (!ref.current || !ref.current.payload) {\n        return;\n      }\n      if (ref.current.timestamp && !Number.isNaN(ref.current.timestamp) && 200 > timestamp - ref.current.timestamp) {\n        global.requestAnimationFrame(update);\n        return;\n      }\n      updateState(ref.current.payload);\n      ref.current.timestamp = timestamp;\n      delete ref.current.payload;\n    },\n    [updateState],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (!ref.current || Number.isNaN(e.target.currentTime)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.currentTime = e.target.currentTime;\n      } else {\n        ref.current.payload = { currentTime: e.target.currentTime };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => {\n      if (!ref.current || !(e.target.buffered instanceof TimeRanges)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.buffered = e.target.buffered;\n      } else {\n        ref.current.payload = { buffered: e.target.buffered };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      if (!ref.current) {\n        return;\n      }\n      const v = parseFloat(t);\n      if (Number.isNaN(v)) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.currentTime = v;\n      }\n      delete ref.current.payload;\n      updateState({ currentTime: v });\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    ref.current.timestamp = 0;\n    ref.current.payload = null;\n  }, [src]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('durationchange', onDurationChange);\n    el.addEventListener('timeupdate', onTimeUpdate);\n    el.addEventListener('progress', onProgress);\n    return () => {\n      el.removeEventListener('durationchange', onDurationChange);\n      el.removeEventListener('timeupdate', onTimeUpdate);\n      el.removeEventListener('progress', onProgress);\n    };\n  }, [onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ src, prevented, muted, volume, updateState, getVideoElement }) => {\n  const ref = React.useRef({ prevented, muted, volume, getVideoElement });\n\n  const onVolumeChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      const payload = { volume: e.target.volume, muted: e.target.muted };\n      if (false === payload.muted && ref.current.prevented) {\n        payload.prevented = false;\n      }\n      if (0 === payload.volume) {\n        payload.muted = true;\n      }\n      updateState(payload);\n    },\n    [updateState],\n  );\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      const payload = { muted: !ref.current.muted };\n      el.muted = payload.muted;\n      if (0 === ref.current.volume && ref.current.muted) {\n        payload.volume = 1;\n        el.volume = payload.volume;\n      }\n      updateState(payload, true);\n    }\n  }, [updateState]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (!ref.current) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      const payload = { volume: v };\n      if (el) {\n        el.volume = v;\n      }\n      if (0 !== v && ref.current.muted) {\n        payload.muted = false;\n      }\n      updateState(payload, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      el.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [onVolumeChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.prevented = prevented;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [prevented, muted, volume]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.muted = false;\n      el.volume = 1;\n    }\n  }, [src]);\n\n  return { onMutedClick, changeVolume };\n};\n","import React from 'react';\n\nexport default ({ src, live, updateState, getVideoElement }) => {\n  const ref = React.useRef({ live, getVideoElement });\n\n  const onRateChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      if (Number.isNaN(e.target.playbackRate)) {\n        return;\n      }\n      updateState({ playbackRate: e.target.playbackRate });\n    },\n    [updateState],\n  );\n\n  const changePlaybackRate = React.useCallback(\n    (r) => {\n      if (!ref.current) {\n        return;\n      }\n      if (Number.isNaN(r)) {\n        return;\n      }\n      const v = ref.current.live ? 1 : r;\n      const el = ref.current.getVideoElement();\n      if (!el) {\n        return;\n      }\n      el.playbackRate = v;\n      updateState({ playbackRate: v }, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.live = live;\n    if (live) {\n      changePlaybackRate(1);\n    }\n  }, [live, changePlaybackRate]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('ratechange', onRateChange);\n    return () => {\n      el.removeEventListener('ratechange', onRateChange);\n    };\n  }, [getVideoElement, onRateChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.playbackRate = 1;\n    }\n  }, [src]);\n\n  return { changePlaybackRate };\n};\n","import React from 'react';\n\nexport default ({ src, pip, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement });\n\n  const requestPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el && el.requestPictureInPicture && ref.current.src) {\n      el.requestPictureInPicture();\n    }\n  }, []);\n\n  const exitPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (document.exitPictureInPicture) {\n      document.exitPictureInPicture();\n    }\n  }, []);\n\n  const onEnterPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ pip: true });\n  }, [updateState]);\n\n  const onLeavePictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ pip: false });\n  }, [updateState]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('enterpictureinpicture', onEnterPictureInPicture);\n    el.addEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    return () => {\n      el.removeEventListener('enterpictureinpicture', onEnterPictureInPicture);\n      el.removeEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    };\n  }, [onEnterPictureInPicture, onLeavePictureInPicture]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    if (pip && !src) {\n      exitPictureInPicture();\n    }\n  }, [src, pip, exitPictureInPicture]);\n\n  return { requestPictureInPicture, exitPictureInPicture };\n};\n","import React from 'react';\n\nexport default ({ updateState, getVideoElement, getPlayerElement }) => {\n  const requestFullscreen = React.useCallback(() => {\n    const el = getPlayerElement();\n    if (!el) {\n      // debug('useVideoFullscreen: 全屏异常，unmounted');\n      return;\n    }\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.msRequestFullscreen) {\n      // 兼容 IE11\n      el.msRequestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      // 兼容微信 PC 版内置浏览器\n      el.webkitRequestFullscreen();\n    } else {\n      const videoEl = getVideoElement();\n      if (videoEl && videoEl.webkitEnterFullScreen) {\n        // 兼容 iOS Safari\n        videoEl.webkitEnterFullScreen();\n      } else {\n        // 异常分支，不应该进入\n        // debug('useVideoFullscreen: 全屏异常，浏览器不支持 requestFullscreen');\n      }\n    }\n  }, [getVideoElement, getPlayerElement]);\n\n  const exitFullscreen = React.useCallback(() => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else {\n      // 异常分支，不应该进入\n      // debug('useVideoFullscreen: 退出全屏异常，浏览器不支持 exitFullscreen');\n    }\n  }, []);\n\n  const onChange = React.useCallback(() => {\n    const el = getPlayerElement();\n    const fullscreenElement =\n      document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n    updateState({ fullscreen: !!el && fullscreenElement === el });\n  }, [updateState, getPlayerElement]);\n\n  React.useEffect(() => {\n    document.addEventListener('fullscreenchange', onChange);\n    document.addEventListener('webkitfullscreenchange', onChange);\n    document.onmsfullscreenchange = onChange;\n    return () => {\n      document.removeEventListener('fullscreenchange', onChange);\n      document.removeEventListener('webkitfullscreenchange', onChange);\n      document.onmsfullscreenchange = null;\n    };\n  }, [onChange]);\n\n  return { requestFullscreen, exitFullscreen };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Flvjs from '../Flvjs';\nimport Hlsjs from '../Hlsjs';\nimport Native from '../Native';\nimport SRSWebRTC from '../SRSWebRTC';\nimport PlayerSkinWapper from '../PlayerSkinWapper';\nimport PlayerContext from '../PlayerContext';\nimport useReactjsPlayer from './useReactjsPlayer';\nimport styles from './index.module.less';\n\nconst ReactjsPlayer = ({\n  kernel,\n  live,\n  config,\n  onKernelError,\n  src,\n  type,\n  controls,\n  className,\n  videoProps,\n  playerProps,\n  children,\n}) => {\n  const {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  } = useReactjsPlayer({ src, live, onKernelError });\n\n  const kernelProps = { getVideoElement, src, config, onMsgChange };\n\n  return (\n    <div className={`${styles.reactjsPlayer} ${className}`} ref={playerRef} {...playerProps}>\n      {'flvjs' === kernel && <Flvjs {...kernelProps} />}\n      {'hlsjs' === kernel && <Hlsjs {...kernelProps} />}\n      {'native' === kernel && <Native {...kernelProps} />}\n      {'srswebrtc' === kernel && <SRSWebRTC {...kernelProps} />}\n      {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n      <video className={styles.video} ref={videoRef} controls={'controls' === controls} type={type} {...videoProps} />\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          loading,\n          prevented,\n          paused,\n          ended,\n          seeking,\n          waiting,\n          duration,\n          currentTime,\n          buffered,\n          muted,\n          volume,\n          playbackRate,\n          pictureInPictureEnabled,\n          pip,\n          fullscreen,\n          kernelMsg,\n          getVideoElement,\n          onPauseClick,\n          onPlayClick,\n          changeCurrentTime,\n          onMutedClick,\n          changeVolume,\n          changePlaybackRate,\n          requestPictureInPicture,\n          exitPictureInPicture,\n          requestFullscreen,\n          exitFullscreen,\n        }}\n      >\n        {true === controls && <PlayerSkinWapper />}\n        {children}\n      </PlayerContext.Provider>\n    </div>\n  );\n};\n\nReactjsPlayer.propTypes = {\n  kernel: PropTypes.oneOf(['hlsjs', 'flvjs', 'native', 'srswebrtc']).isRequired,\n  live: PropTypes.bool.isRequired,\n  config: PropTypes.object,\n  onKernelError: PropTypes.func,\n\n  src: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  controls: PropTypes.oneOf([false, true, 'controls']),\n\n  className: PropTypes.string,\n  videoProps: PropTypes.object,\n  playerProps: PropTypes.object,\n\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nReactjsPlayer.defaultProps = {\n  config: null,\n  onKernelError: null,\n\n  src: '',\n  controls: true,\n\n  className: '',\n  videoProps: null,\n  playerProps: null,\n\n  children: null,\n};\n\nexport default React.memo(\n  ReactjsPlayer,\n  (p, n) =>\n    p.kernel === n.kernel &&\n    p.live === n.live &&\n    p.config === n.config &&\n    p.onKernelError === n.onKernelError &&\n    p.src === n.src &&\n    p.type === n.type &&\n    p.controls === n.controls &&\n    p.className === n.className &&\n    p.videoProps === n.videoProps &&\n    p.playerProps === n.playerProps &&\n    p.children === n.children,\n);\n","import { EventEmitter } from 'fbemitter';\n\nlet emitter = null;\nlet index = 0;\n\nclass GrindPlayer {\n  /**\n   * 创建 GrindPlayer 实例\n   */\n  constructor(id) {\n    this.id = id;\n    this.el = null;\n    this.emitter = new EventEmitter();\n    this.tokenList = [];\n    this.eventMap = [];\n\n    this.addListener();\n  }\n\n  addListener() {\n    if (!emitter) {\n      emitter = new EventEmitter();\n    }\n\n    this.tokenList = [\n      emitter.addListener(`${this.id}.onJavaScriptBridgeCreated`, () => {\n        this.el = document.getElementById(this.id);\n        // this.el.addEventListener('mediaError', () => );\n      }),\n      emitter.addListener(`${this.id}.mediaSize`, (data) => {\n        if (0 === data.videoHeight && 0 === data.videoWidth) {\n          this.emitter.emit('canplay');\n        } else {\n          this.emitter.emit('canplaythrough');\n        }\n      }),\n      emitter.addListener(`${this.id}.paused`, () => this.emitter.emit('pause')),\n      emitter.addListener(`${this.id}.playing`, () => this.emitter.emit('playing')),\n      emitter.addListener(`${this.id}.seeking`, () => this.emitter.emit('seeking')),\n      emitter.addListener(`${this.id}.seeked`, () => this.emitter.emit('seeked')),\n      emitter.addListener(`${this.id}.complete`, () => this.emitter.emit('ended')),\n      emitter.addListener(`${this.id}.buffering`, () => this.emitter.emit('waiting')),\n\n      emitter.addListener(`${this.id}.durationChange`, (e) => this.emitter.emit('durationchange', e)),\n      emitter.addListener(`${this.id}.timeChange`, (e) => this.emitter.emit('timeupdate', e)),\n      emitter.addListener(`${this.id}.progress`, (e) => this.emitter.emit('progress', e)),\n\n      emitter.addListener(`${this.id}.volumeChange`, (e) => this.emitter.emit('volumechange', e)),\n    ];\n  }\n\n  invoker(methodName, ...args) {\n    if (!this.el) {\n      return;\n    }\n    this.el[methodName](...args);\n  }\n\n  addEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    const token = this.emitter.addListener(event, fn);\n    this.eventMap.push({ token, event, fn });\n  }\n\n  removeEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    this.eventMap = this.eventMap.filter((it) => {\n      if (it.event !== event) {\n        return true;\n      }\n      if (!fn && it.fn !== fn) {\n        return true;\n      }\n      it.token.remove();\n      return false;\n    });\n  }\n\n  destroy() {\n    if (this.eventMap) {\n      this.eventMap.map((it) => it.token.remove());\n      delete this.eventMap;\n    }\n\n    if (this.tokenList) {\n      this.tokenList.map((it) => it.remove());\n      delete this.tokenList;\n    }\n\n    if (this.emitter) {\n      this.emitter.removeAllListeners();\n    }\n    delete this.emitter;\n\n    delete this.id;\n    delete this.el;\n  }\n}\n\nconst onJSBridge = (playerId, event, data) => {\n  if (!emitter) {\n    emitter = new EventEmitter();\n  }\n  console.log(`${event}: ${JSON.stringify(data)}`);\n  emitter.emit(`${playerId}.${event}`, data);\n};\n\nexport default {\n  getPlayerId: () => `grindPlayer${index++}`,\n\n  getGrindPlayer: (id, javascriptCallbackFunction) => {\n    if (!global[javascriptCallbackFunction]) {\n      global[javascriptCallbackFunction] = onJSBridge;\n    }\n    return new GrindPlayer(id);\n  },\n};\n","import React from 'react';\nimport GrindPlayer from './GrindPlayer';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  pictureInPictureEnabled: false,\n  pip: false,\n  fullscreen: false,\n  playbackRate: 1,\n  javascriptCallbackFunction: 'onJSBridge',\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      playbackRate,\n      javascriptCallbackFunction,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n\n  const id = React.useMemo(() => GrindPlayer.getPlayerId(), []);\n  const ref = React.useRef({});\n\n  React.useEffect(() => {\n    const player = GrindPlayer.getGrindPlayer(id, javascriptCallbackFunction);\n    ref.current.player = player;\n    return () => {\n      player.destroy();\n      ref.current = null;\n    };\n  }, [id, javascriptCallbackFunction]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.ended = ended;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [loading, ended, muted, volume]);\n\n  React.useEffect(() => {\n    dispatch({ type: 'reset', payload: { loading: !!src } });\n  }, [src]);\n\n  return {\n    ref,\n    dispatch,\n    id,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    playbackRate,\n    javascriptCallbackFunction,\n    kernelMsg,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactSWF from 'react-swf';\nimport './GrindPlayer.swf';\nimport './flashlsOSMF.swf';\nimport PlayerContext from '../PlayerContext';\nimport useGrindPlayer from './useGrindPlayer';\nimport useState from './useState';\nimport useTime from './useTime';\nimport useVolume from './useVolume';\nimport styles from './index.module.less';\n\nconst GrindPlayer = ({ live, src, type, grindPlayerSwf, flashlsOSMFSwf }) => {\n  const { ref, dispatch, id, javascriptCallbackFunction, ...state } = useGrindPlayer({ src });\n\n  const stateProps = useState({ ref, dispatch });\n  const timeProps = useTime({ ref, dispatch });\n  const volumeProps = useVolume({ ref, dispatch });\n\n  return (\n    <div className={styles.grindPlayer}>\n      {src && (\n        <ReactSWF\n          id={id}\n          src={grindPlayerSwf}\n          width=\"100%\"\n          height=\"100%\"\n          wmode=\"opaque\"\n          allowFullScreen\n          allowScriptAccess=\"always\"\n          bgcolor=\"#000000\"\n          flashVars={{\n            src,\n            autoPlay: true,\n            bufferTime: 0.5,\n            streamType: live ? 'live' : 'recorded',\n            plugin_hls: 'application/x-mpegURL' === type ? flashlsOSMFSwf : undefined,\n            javascriptCallbackFunction,\n          }}\n        />\n      )}\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          ...state,\n          ...stateProps,\n          ...timeProps,\n          ...volumeProps,\n        }}\n      />\n    </div>\n  );\n};\n\nGrindPlayer.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  grindPlayerSwf: PropTypes.string,\n  flashlsOSMFSwf: PropTypes.string,\n};\n\nGrindPlayer.defaultProps = {\n  live: true,\n  grindPlayerSwf: 'http://unpkg.com/reactjs-player/dist/GrindPlayer.swf',\n  flashlsOSMFSwf: 'http://unpkg.com/reactjs-player/dist/flashlsOSMF.swf',\n};\n\nexport default React.memo(GrindPlayer);\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onPlayClick = React.useCallback(() => {\n    if (ref.current.player) {\n      if (ref.current.ended) {\n        ref.current.player.invoker('seek', 0);\n      }\n      ref.current.player.invoker('play2');\n    }\n    dispatch({ type: 'update', payload: { paused: false } });\n  }, [ref, dispatch]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (ref.current.player) {\n      ref.current.player.invoker('pause');\n    }\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [ref, dispatch]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (ref.current.loading) {\n      dispatch({ type: 'update', payload: { loading: false } });\n    }\n    dispatch({ type: 'update', payload: { waiting: false } });\n  }, [ref, dispatch]);\n\n  const onPause = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [dispatch]);\n\n  const onPlaying = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: false, ended: false } });\n  }, [dispatch]);\n\n  const onEnded = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { ended: true } });\n  }, [dispatch]);\n\n  const onSeeked = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: false } });\n  }, [dispatch]);\n\n  const onSeeking = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: true } });\n  }, [dispatch]);\n\n  const onWaiting = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { waiting: true } });\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('canplaythrough', onCanPlayThrough);\n    player.addEventListener('pause', onPause);\n    player.addEventListener('playing', onPlaying);\n    player.addEventListener('ended', onEnded);\n    player.addEventListener('seeked', onSeeked);\n    player.addEventListener('seeking', onSeeking);\n    player.addEventListener('waiting', onWaiting);\n    return () => {\n      player.removeEventListener('canplaythrough', onCanPlayThrough);\n      player.removeEventListener('pause', onPause);\n      player.removeEventListener('playing', onPlaying);\n      player.removeEventListener('ended', onEnded);\n      player.removeEventListener('seeked', onSeeked);\n      player.removeEventListener('seeking', onSeeking);\n      player.removeEventListener('waiting', onWaiting);\n    };\n  }, [ref, onCanPlayThrough, onPause, onPlaying, onEnded, onSeeked, onSeeking, onWaiting]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.duration;\n      dispatch({ type: 'update', payload: { duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 } });\n    },\n    [dispatch],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.currentTime)) {\n        return;\n      }\n      dispatch({ type: 'update', payload: { currentTime: e.currentTime } });\n    },\n    [dispatch],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => dispatch({ type: 'update', payload: { buffered: e.buffered } }),\n    [dispatch],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v) || !ref.current || !ref.current.player) {\n        return;\n      }\n      ref.current.player.invoker('seek', v);\n      dispatch({ type: 'update', payload: { currentTime: v } });\n    },\n    [ref, dispatch],\n  );\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('durationchange', onDurationChange);\n    player.addEventListener('timeupdate', onTimeUpdate);\n    player.addEventListener('progress', onProgress);\n    return () => {\n      player.removeEventListener('durationchange', onDurationChange);\n      player.removeEventListener('timeupdate', onTimeUpdate);\n      player.removeEventListener('progress', onProgress);\n    };\n  }, [ref, onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onVolumeChange = React.useCallback((e) => dispatch({ type: 'update', payload: e }), [dispatch]);\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current || !ref.current.player) {\n      return;\n    }\n    const { muted } = ref.current;\n    ref.current.player.invoker('setMuted', !muted);\n    if (0 === ref.current.volume && muted) {\n      ref.current.player.invoker('setVolume', 1.0);\n    }\n  }, [ref]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (ref.current && ref.current.player) {\n        ref.current.player.invoker('setVolume', v);\n      }\n    },\n    [ref],\n  );\n\n  React.useEffect(() => {\n    if (!ref.current || !ref.current.player) {\n      return () => {};\n    }\n    const { player } = ref.current;\n    player.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      player.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [ref, onVolumeChange]);\n\n  return { onMutedClick, changeVolume };\n};\n","import ReactjsPlayer from './ReactjsPlayer';\nimport GrindPlayer from './GrindPlayer';\nimport PlayerContext from './PlayerContext';\nimport PlayerSkin from './PlayerSkin';\n\nReactjsPlayer.GrindPlayer = GrindPlayer;\nReactjsPlayer.PlayerContext = PlayerContext;\nReactjsPlayer.PlayerSkin = PlayerSkin;\n\nexport default ReactjsPlayer;\n"],"sourceRoot":""}