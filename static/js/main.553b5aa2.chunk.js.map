{"version":3,"sources":["App.js","../../dist/GrindPlayer.swf","../../dist/flashlsOSMF.swf","PlaybackRate.js","FouceLive.js","blank16x9.png","reportWebVitals.js","index.js","../../src/Flvjs/useFlvjs.js","../../src/Flvjs/index.js","../../src/Hlsjs/useHlsjs.js","../../src/Hlsjs/index.js","../../src/Native/index.js","../../src/Native/useNative.js","../../src/SRSWebRTC/SRSPlayer.js","../../src/SRSWebRTC/index.js","../../src/SRSWebRTC/useSRSWebRTC.js","../../src/PlayerContext/index.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/PlayerSkin/PreventedTip/index.js","../../src/PlayerSkin/VideoMask/index.js","../../src/PlayerSkin/PlayState/index.js","../../src/PlayerSkin/TopState/index.js","../../src/PlayerSkin/Controls/bg.png","../../src/PlayerSkin/Controls/index.js","../../src/PlayerSkin/ControlBar/index.js","../../src/PlayerSkin/TimeSlider/index.js","../../src/PlayerSkin/Controls/PlayButton.js","../../src/PlayerSkin/Volume/index.js","../../src/PlayerSkin/PlayTime/index.js","../../src/PlayerSkin/Controls/PlayRate.js","../../src/PlayerSkin/Controls/FullscreenButton.js","../../src/PlayerSkin/Controls/PictureInPicture.js","../../src/PlayerSkin/usePlayerSkin.js","../../src/PlayerSkin/index.js","../../src/PlayerSkin/useAutoHide.js","../../src/PlayerSkinWapper/index.js","../../src/hooks/usePlayerReducer.js","../../src/ReactjsPlayer/useReactjsPlayer.js","../../src/hooks/useVideoState.js","../../src/hooks/useTime.js","../../src/hooks/useVolume.js","../../src/hooks/usePlaybackRate.js","../../src/hooks/usePiP.js","../../src/hooks/useFullscreen.js","../../src/ReactjsPlayer/index.js","../../src/GrindPlayer/GrindPlayer.js","../../src/GrindPlayer/useGrindPlayer.js","../../src/GrindPlayer/index.js","../../src/GrindPlayer/useState.js","../../src/GrindPlayer/useTime.js","../../src/GrindPlayer/useVolume.js","../../src/index.js"],"names":["GrindPlayer","ReactjsPlayer","delay","timeout","Promise","resolve","global","setTimeout","App","React","memo","useState","list","setList","info","setInfo","src","setSrc","videoProps","setVideoProps","ref","useRef","Form","useForm","form","onChange","useCallback","v","item","find","it","key","setFieldsValue","onSubmit","values","a","current","type","useEffect","ua","UAParser","navigator","userAgent","device","playsInline","supportedList","kernel","live","Hls","flvjs","isSupported","push","getFeatureList","networkStreamIO","config","isLive","enableStashBuffer","autoCleanupSourceBuffer","stashInitialSize","fixAudioTimestampGap","os","name","getSupportedList","console","log","onVideoEvent","e","length","className","layout","onFinish","initialValues","Item","map","Option","value","htmlType","blank16x9","alt","onCanPlay","onDurationChange","onPause","onPlay","onPlaying","onEnded","onSeeked","onSeeking","onCanPlayThrough","onEmptied","onEncrypted","onError","onLoadedData","onLoadedMetadata","onLoadStart","onRateChange","onStalled","onSuspend","onVolumeChange","onWaiting","onAbort","grindPlayerSwf","flashlsOSMFSwf","defaultActiveKey","TabPane","tab","title","column","size","label","href","PlaybackRate","playbackRate","useContext","PlayerContext","changeRate","rate","FouceLive","getVideoElement","changeCurrentTime","id","setInterval","el","paused","buffered","end","currentTime","clearInterval","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","VConsole","ReactDOM","render","StrictMode","document","getElementById","getFlvjs","script","debug","Flvjs","props","onMsgChange","cleanup","errMsg","loadSource","target","player","url","detail","useFlvjs","PropTypes","isRequired","p","n","getHls","Hlsjs","details","useHlsjs","Native","onPlayClick","msg","useNative","SRSPlayer","matched","this","protocol","pathname","pc","RTCPeerConnection","iceTransportPolicy","bundlePolicy","rtcpMuxPolicy","iceCandidatePoolSize","sdpSemantics","tcpCandidatePolicy","IceTransportsType","direction","event","sdp","offer","RTCSessionDescription","track","sendRequest","method","body","JSON","api","streamurl","clientip","tid","Number","parseInt","Date","getTime","Math","fetch","mode","headers","response","Error","text","MediaStream","SRSWebRTC","stream","useSRSWebRTC","styleInject","css","insertAt","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","PreventedTip","prevented","muted","styles","Icon","component","MutedSvg","PlayCircleOutlined","VideoMask","showControls","opacity","background","onMouseMove","onClick","PlayState","loading","ended","seeking","waiting","kernelMsg","LoadingOutlined","TopState","object","Controls","hiding","dispatch","children","onMouseEnter","payload","controlsHovering","onMouseLeave","backgroundImage","transform","ControlBar","extra","getValue","rect","duration","w","getEventXCoordinate","MouseTooltip","tooltip","translateX","getMouseTranslateX","numeral","TimeSlider","sliding","sliderRef","onMouseDown","react","left","width","update","onMouseUp","onSliderMouseOver","onSliderMouseMove","onResize","bufferedScaleX","i","getBufferedEnd","getBufferedScaleX","trackTranslateX","getTrackTranslateX","role","tabIndex","onKeyDown","onMouseOver","onFocus","onTouchStart","PlayButton","onPauseClick","CaretRightOutlined","PauseOutlined","Volume","volume","changeVolume","onMutedClick","UnmutedSvg","Slider","max","PlayTime","PlayRate","changePlaybackRate","visible","show","rateMenuVisible","hide","onMenuClick","parseFloat","Dropdown","overlay","Menu","selectedKeys","placement","trigger","FullscreenButton","fullscreen","requestFullscreen","exitFullscreen","FullscreenExitOutlined","FullscreenOutlined","PictureInPicture","pictureInPictureEnabled","pip","exitPictureInPicture","requestPictureInPicture","initialState","reducer","state","action","PlayerSkin","usePlayerSkin","animationFrameCallback","timestamp","startAutoHide","stopAutoHide","useAutoHide","PlayerSkinWapper","enabled","onKernelError","videoRef","playerRef","clearUpdateTimeout","timeoutCallback","updateState","sync","usePlayerReducer","getPlayerElement","onDocumentClick","once","useVideoState","onTimeUpdate","onProgress","useTime","useVolume","usePlaybackRate","onEnterPictureInPicture","onLeavePictureInPicture","usePiP","videoEl","fullscreenElement","useFullscreen","controls","playerProps","useReactjsPlayer","kernelProps","autoPlay","preload","emitter","index","EventEmitter","data","args","token","addListener","fn","eventMap","filter","onJSBridge","playerId","javascriptCallbackFunction","useGrindPlayer","stateProps","timeProps","volumeProps","ReactSWF","height","wmode","allowFullScreen","allowScriptAccess","bgcolor","flashVars","bufferTime","streamType","plugin_hls","string"],"mappings":"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","file":"static/js/main.553b5aa2.chunk.js","sourcesContent":["import React from 'react';\nimport UAParser from 'ua-parser-js';\nimport Hls from 'hls.js';\nimport flvjs from 'flv.js';\nimport { Form, Select, Input, Button, Tabs, Descriptions } from 'antd';\nimport { GithubOutlined } from '@ant-design/icons';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport ReactjsPlayer from 'reactjs-player';\nimport grindPlayerSwf from 'reactjs-player/dist/GrindPlayer.swf';\nimport flashlsOSMFSwf from 'reactjs-player/dist/flashlsOSMF.swf';\nimport PlaybackRate from './PlaybackRate';\nimport FouceLive from './FouceLive';\nimport blank16x9 from './blank16x9.png';\nimport './App.css';\n\nconst GrindPlayer = ReactjsPlayer.GrindPlayer;\n// const ReactPlayerContext = ReactjsPlayer.ReactPlayerContext;\n\nconst delay = (timeout) =>\n  new Promise((resolve) => {\n    global.setTimeout(resolve, timeout);\n  });\n\nconst getSupportedList = (ua) => {\n  if (ua.device.type) {\n    // 非 PC 浏览器\n    return [\n      {\n        key: 'nativelive',\n        kernel: 'native',\n        live: true,\n        src: 'https://ivt.demo.qulubo.net/hls_srs/quick/IV9x5jjUSbycqi0PtSiqpw.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      {\n        key: 'native',\n        kernel: 'native',\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      {\n        key: 'srswebrtc',\n        kernel: 'srswebrtc',\n        live: true,\n        src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n        type: '',\n      },\n    ];\n  }\n\n  global.Hls = Hls;\n  global.flvjs = flvjs;\n\n  const list = [];\n\n  if (Hls.isSupported()) {\n    list.push(\n      {\n        key: 'hlsjs-live',\n        kernel: 'hlsjs',\n        live: true,\n        src: 'http://192.168.0.222/hls_srs/quick/1VU0lHXqSva4TFvmJyqVqg.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      {\n        key: 'hlsjs',\n        kernel: 'hlsjs',\n        live: false,\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n    );\n  }\n  // https://ivt.demo.qulubo.net/hls_srs/quick/IV9x5jjUSbycqi0PtSiqpw.m3u8\n  if (flvjs.isSupported()) {\n    const featureList = flvjs.getFeatureList();\n    if (featureList.networkStreamIO) {\n      list.push({\n        key: 'flvjs',\n        kernel: 'flvjs',\n        live: true,\n        src: 'http://192.168.0.222/flv_srs/quick/1VU0lHXqSva4TFvmJyqVqg.flv',\n        type: 'video/x-flv',\n        config: {\n          isLive: true,\n          enableStashBuffer: false,\n          autoCleanupSourceBuffer: true,\n          stashInitialSize: 16 * 1024,\n          fixAudioTimestampGap: false,\n        },\n      });\n    }\n  }\n\n  // mac OS 没有测试环境，暂且认为没有问题\n  if ('Mac OS' === ua.os.name) {\n    list.push(\n      {\n        key: 'native',\n        kernel: 'native',\n        live: false,\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n    );\n  }\n  list.push(\n    { key: 'rtmp', kernel: 'flash', live: true, src: 'rtmp://livetv.dhtv.cn:1935/live/news', type: 'video/rtmp' },\n    {\n      key: 'flashls',\n      kernel: 'flash',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    },\n    {\n      key: 'native',\n      kernel: 'native',\n      live: false,\n      src: 'https://www.w3schools.com/html/mov_bbb.mp4',\n      type: 'video/mp4',\n    },\n    {\n      key: 'srswebrtc',\n      kernel: 'srswebrtc',\n      live: true,\n      src: 'webrtc://192.168.0.222/quick/1VU0lHXqSva4TFvmJyqVqg',\n      type: '',\n    },\n  );\n  return list;\n};\n\nconst App = React.memo(() => {\n  const [list, setList] = React.useState(null);\n  const [info, setInfo] = React.useState(null);\n  const [src, setSrc] = React.useState('');\n  const [videoProps, setVideoProps] = React.useState(null);\n  const ref = React.useRef(list);\n\n  const [form] = Form.useForm();\n\n  const onChange = React.useCallback(\n    (v) => {\n      const item = list.find((it) => it.key === v);\n      form.setFieldsValue({ src: item.src });\n    },\n    [form, list],\n  );\n\n  const onSubmit = React.useCallback(async (values) => {\n    setSrc('');\n    await delay(50);\n    const item = ref.current.find((it) => it.key === values.type);\n    setInfo(item);\n    setSrc(values.src);\n  }, []);\n\n  React.useEffect(() => {\n    ref.current = list;\n  }, [list]);\n\n  React.useEffect(() => {\n    const ua = UAParser(global.navigator.userAgent);\n    if (ua.device.type) {\n      setVideoProps({\n        playsInline: true,\n        'webkit-playsinline': 'true',\n        'x5-video-player-type': 'h5-page',\n        'x5-video-orientation': 'landscape|portrait',\n      });\n    }\n    const supportedList = getSupportedList(ua);\n    setList(supportedList);\n    ref.current = supportedList;\n    setInfo(supportedList[0]);\n    // NOTE: 测试自动播放的情况\n    console.log(`type: ${supportedList[0].key}`);\n    onSubmit({ type: supportedList[0].key, src: supportedList[0].src });\n  }, [onSubmit]);\n\n  const onVideoEvent = React.useCallback((e) => {\n    const log = console.log;\n    log(`e.type: ${e.type}`);\n    // if ('durationchange' === e.type) {\n    //   log(`durationchange: ${e.target.duration}`);\n    // }\n  }, []);\n\n  if (!list || 0 === list.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"container\">\n      <header className=\"header\">\n        <Form\n          className=\"form\"\n          layout=\"inline\"\n          form={form}\n          onFinish={onSubmit}\n          initialValues={{\n            type: list[0].key,\n            src: list[0].src,\n          }}\n        >\n          <Form.Item className=\"type\" name=\"type\">\n            <Select onChange={onChange}>\n              {list.map((it) => (\n                <Select.Option key={it.key} value={it.key}>\n                  {it.key}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          <Form.Item className=\"src\" name=\"src\">\n            <Input />\n          </Form.Item>\n          <Form.Item className=\"submit\">\n            <Button type=\"primary\" htmlType=\"submit\">\n              播放\n            </Button>\n          </Form.Item>\n        </Form>\n      </header>\n      <main className=\"main\">\n        <div className=\"player\">\n          <img className=\"blankImg\" src={blank16x9} alt=\"\" />\n          {'flash' !== info.kernel && (\n            <ReactjsPlayer\n              live={info.live}\n              kernel={info.kernel}\n              type={info.type}\n              config={info.config || {}}\n              src={src}\n              videoProps={{\n                ...videoProps,\n                onCanPlay: onVideoEvent,\n                onDurationChange: onVideoEvent,\n                onPause: onVideoEvent,\n                onPlay: onVideoEvent,\n                onPlaying: onVideoEvent,\n                onEnded: onVideoEvent,\n                onSeeked: onVideoEvent,\n                onSeeking: onVideoEvent,\n                onCanPlayThrough: onVideoEvent,\n                onEmptied: onVideoEvent,\n                onEncrypted: onVideoEvent,\n                onError: onVideoEvent,\n                onLoadedData: onVideoEvent,\n                onLoadedMetadata: onVideoEvent,\n                onLoadStart: onVideoEvent,\n                onRateChange: onVideoEvent,\n                onStalled: onVideoEvent,\n                onSuspend: onVideoEvent,\n                onVolumeChange: onVideoEvent,\n                onWaiting: onVideoEvent,\n                onAbort: onVideoEvent,\n              }}\n            >\n              <PlaybackRate></PlaybackRate>\n              {'flvjs' === info.kernel && info.live && <FouceLive></FouceLive>}\n            </ReactjsPlayer>\n          )}\n          {'flash' === info.kernel && (\n            <GrindPlayer {...info} src={src} grindPlayerSwf={grindPlayerSwf} flashlsOSMFSwf={flashlsOSMFSwf} />\n          )}\n        </div>\n        <aside className=\"aside\">\n          <div className=\"asideContainer\">\n            <Tabs className=\"asideTabs\" defaultActiveKey=\"info\">\n              <Tabs.TabPane tab=\"信息\" key=\"info\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">\n                    <Descriptions title=\"参数\" column={1} size=\"small\">\n                      <Descriptions.Item label=\"kernel\">{info.kernel}</Descriptions.Item>\n                      <Descriptions.Item label=\"live\">{info.live ? '是' : '否'}</Descriptions.Item>\n                      <Descriptions.Item label=\"src\">\n                        <span className=\"srcValue\">{src}</span>\n                      </Descriptions.Item>\n                      <Descriptions.Item label=\"type\">{info.type}</Descriptions.Item>\n                    </Descriptions>\n                  </div>\n                </Scrollbars>\n              </Tabs.TabPane>\n              <Tabs.TabPane tab=\"接口测试\" key=\"interface\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">暂时删除接口测试功能</div>\n                </Scrollbars>\n              </Tabs.TabPane>\n            </Tabs>\n            <div className=\"asideFooter\">\n              <a href=\"https://github.com/goblin-laboratory/reactjs-player\">\n                <GithubOutlined />\n                &nbsp; Github\n              </a>\n            </div>\n          </div>\n        </aside>\n      </main>\n    </div>\n  );\n});\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/GrindPlayer.2a08c30c.swf\";","export default __webpack_public_path__ + \"static/media/flashlsOSMF.54c6b059.swf\";","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\nimport log from 'loglevel';\n\nconst PlaybackRate = () => {\n  const { playbackRate } = React.useContext(ReactjsPlayer.PlayerContext);\n  const changeRate = React.useCallback((rate) => {\n    log.info(`Current playback rate is ${rate}.`);\n  }, []);\n\n  React.useEffect(() => {\n    changeRate(playbackRate);\n  }, [playbackRate, changeRate]);\n\n  return null;\n};\n\nexport default React.memo(PlaybackRate, () => true);\n","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\n\nconst FouceLive = () => {\n  const { getVideoElement, changeCurrentTime } = React.useContext(ReactjsPlayer.PlayerContext);\n  React.useEffect(() => {\n    const id = global.setInterval(() => {\n      if (!getVideoElement) {\n        return;\n      }\n      const el = getVideoElement();\n      if (!el || el.paused || !el.buffered) {\n        return;\n      }\n      const end = el.buffered.end(el.buffered.length - 1);\n      if (2 < end - el.currentTime) {\n        changeCurrentTime(end - 0.5);\n      }\n    }, 10 * 1000);\n    return () => {\n      global.clearInterval(id);\n    };\n  }, [getVideoElement, changeCurrentTime]);\n\n  return null;\n};\n\nexport default React.memo(FouceLive, () => true);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMi0yOFQxODoyNDozNCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDljYTEwNTMtNTU4Ny1lYjQ4LWEyMzEtZWY0MTUzNjRjYmY2IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Y2QyYjVhMTMtN2E2NC1lZDQ3LWE2NDctZWQwNDExMDgxMTFmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2NkZWQyZmItOWFmMi1lODQ2LWE5MGYtNTdhOGUyYzk3OGY2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozY2RlZDJmYi05YWYyLWU4NDYtYTkwZi01N2E4ZTJjOTc4ZjYiIHN0RXZ0OndoZW49IjIwMTgtMDItMjhUMTg6MjQ6MzQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5Y2ExMDUzLTU1ODctZWI0OC1hMjMxLWVmNDE1MzY0Y2JmNiIgc3RFdnQ6d2hlbj0iMjAxOC0wOC0yMFQxNDozODozOSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7p7qgTAAAAFklEQVQokWP4//8/AyWYIs2jBgwbAwCgra5gnLDJrQAAAABJRU5ErkJggg==\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport VConsole from 'vconsole';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// eslint-disable-next-line no-unused-vars\nconst vConsole = new VConsole();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\n\nconst getFlvjs = (src) =>\n  new Promise((resolve) => {\n    if (global.flvjs) {\n      resolve(global.flvjs);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.flvjs);\n    script.onerror = () => resolve(global.flvjs);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.pause();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.unload();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.detachMediaElement();\n      } catch (errMsg) {}\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(async () => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    await getFlvjs('https://unpkg.com/flv.js/dist/flv.min.js');\n    if (!global.flvjs || !ref.current || ref.current.src !== target) {\n      debug('useFlvjs: 加载 hls.js 失败或者 src 已经变更');\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      debug('useFlvjs: video 元素不存在');\n      // TOOD: 显示错误\n      return;\n    }\n    const player = global.flvjs.createPlayer({ isLive: true, type: 'flv', url: target }, { ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    player.attachMediaElement(el);\n    player.load();\n    player.on(global.flvjs.Events.ERROR, (type, detail) => {\n      if (ref.current && ref.current.onMsgChange) {\n        ref.current.onMsgChange({ type, detail });\n      }\n    });\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useFlvjs from './useFlvjs';\n\nconst Flvjs = (props) => {\n  // console.log(`Flvjs`);\n  useFlvjs(props);\n  return null;\n};\n\nFlvjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nFlvjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Flvjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nconst getHls = (src) =>\n  new Promise((resolve) => {\n    if (global.Hls) {\n      resolve(global.Hls);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.Hls);\n    script.onerror = () => resolve(global.Hls);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(async () => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    await getHls('https://unpkg.com/hls.js/dist/hls.min.js');\n    if (!global.Hls || !ref.current || ref.current.src !== target) {\n      debug('useHlsjs: 加载 hls.js 失败或者 src 已经变更');\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      debug('useHlsjs: video 元素不存在');\n      // TOOD: 显示错误\n      return;\n    }\n    const player = new global.Hls({ debug: false, ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    player.attachMedia(el);\n    player.once(global.Hls.Events.MEDIA_ATTACHED, () => {\n      if (ref.current && ref.current.src === target) {\n        player.loadSource(target);\n      }\n    });\n    player.on(global.Hls.Events.ERROR, (e, info) => {\n      if (ref.current && ref.current.onMsgChange && info && info.fatal) {\n        ref.current.onMsgChange({ type: info.type, detail: info.details });\n      }\n    });\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useHlsjs from './useHlsjs';\n\nconst Hlsjs = (props) => {\n  useHlsjs(props);\n  return null;\n};\n\nHlsjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nHlsjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Hlsjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useNative from './useNative';\n\nconst Native = (props) => {\n  useNative(props);\n  return null;\n};\n\nNative.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  onPlayClick: PropTypes.func.isRequired,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nNative.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(\n  Native,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nexport default ({ getVideoElement, src, onPlayClick, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const onError = React.useCallback((e) => {\n    if (!ref.current || !ref.current.onMsgChange) {\n      return;\n    }\n    const msg = { type: 'Error', detail: 'Unknown exception' };\n    if (e.target && e.target.error && e.target.error.code) {\n      msg.detail = `Code ${e.target.error.code}`;\n    }\n    ref.current.onMsgChange(msg);\n  }, []);\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current || !ref.current.el) {\n      return;\n    }\n    ref.current.el.removeEventListener('error', onError);\n    ref.current.el.pause();\n    ref.current.el.src = '';\n    try {\n      ref.current.el.load();\n    } catch (errMsg) {}\n    delete ref.current.el;\n  }, [onError]);\n\n  const loadSource = React.useCallback(async () => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    ref.current.el = ref.current.getVideoElement();\n    if (!ref.current.el) {\n      return;\n    }\n    ref.current.el.pause();\n    ref.current.el.src = ref.current.src;\n    ref.current.el.addEventListener('error', onError);\n    ref.current.el.load();\n    // NOTE: iOS 微信浏览器中测试自动播放，与其他终端不一样，其他终端会加载数据并触发 canplay 事件，iOS 中并不会触发任何数据加载\n    onPlayClick();\n  }, [onPlayClick, onError]);\n\n  React.useEffect(() => {\n    global.addEventListener('beforeunload', cleanup);\n    global.addEventListener('pagehide', cleanup);\n    global.addEventListener('unload', cleanup);\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","export default class SRSPlayer {\n  static isSupported() {\n    if (!MediaStream || !RTCPeerConnection || !RTCSessionDescription) {\n      return false;\n    }\n    if (!RTCPeerConnection.prototype.addTransceiver) {\n      return false;\n    }\n    return true;\n  }\n\n  constructor(url, config) {\n    // webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY\n    const matched = url.match(/^webrtc:\\/\\/([^/]+)(\\/.*)?$/);\n    if (!matched) {\n      return null;\n    }\n    this.url = url;\n    const protocol = 'string' === typeof config.protocol ? config.protocol : global.location.protocol;\n    const pathname = 'string' === typeof config.pathname ? config.pathname : '/rtc/v1/play/';\n    this.api = `${protocol}//${matched[1]}${pathname}`;\n    this.stream = new MediaStream();\n    this.trackList = [];\n    return this;\n  }\n\n  subscribe() {\n    if (!this.url) {\n      return null;\n    }\n    this.unsubscribe();\n    this.createRTCPeerConnection();\n    this.connectPeerConnection();\n    return this.stream;\n  }\n\n  unsubscribe() {\n    if (!this.pc) {\n      return;\n    }\n    this.closeRTCPeerConnection();\n  }\n\n  destroy() {\n    this.unsubscribe();\n\n    delete this.url;\n    delete this.api;\n    delete this.stream;\n    delete this.trackList;\n  }\n\n  createRTCPeerConnection() {\n    const pc = new RTCPeerConnection({\n      iceTransportPolicy: 'all',\n      bundlePolicy: 'max-bundle',\n      rtcpMuxPolicy: 'require',\n      iceCandidatePoolSize: '0',\n      sdpSemantics: 'unified-plan',\n      tcpCandidatePolicy: 'disable',\n      IceTransportsType: 'nohost',\n    });\n    // const pc = new RTCPeerConnection(null);\n    pc.addTransceiver('audio', { direction: 'recvonly' });\n    pc.addTransceiver('video', { direction: 'recvonly' });\n\n    // pc.onnegotiationneeded = (event) => console.log(event.type);\n    // pc.onicecandidate = (event) => console.log(event.type);\n    // pc.onicecandidateerror = (event) => console.log(event.type);\n    // pc.onsignalingstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.onicegatheringstatechange = (event) => console.log(event.type);\n\n    pc.ontrack = (event) => {\n      // console.log(event.type);\n      this.stream.addTrack(event.track);\n      this.trackList.push(event.track);\n    };\n\n    // pc.onconnectionstatechange = (event) => {\n    //   console.log(`${event.type}: ${event.target.connectionState}`);\n    //   // if ('disconnected' === event.target.connectionState) {\n    //   //   onDisconnect();\n    //   // }\n    // };\n\n    this.pc = pc;\n    return this.pc;\n  }\n\n  connectPeerConnection() {\n    const { pc } = this;\n    return pc\n      .createOffer()\n      .then((offer) => pc.setLocalDescription(offer).then(() => offer))\n      .then((offer) => this.getSessionInfo({ sdp: offer.sdp }))\n      .then((sdp) => pc.setRemoteDescription(new RTCSessionDescription({ type: 'answer', sdp })));\n  }\n\n  closeRTCPeerConnection() {\n    if (this.trackList) {\n      this.trackList.forEach((track) => {\n        try {\n          this.stream.removeTrack(track);\n        } catch (errMsg) {}\n        try {\n          track.stop();\n        } catch (errMsg) {}\n      });\n      this.trackList = [];\n    }\n\n    if (!this.pc) {\n      return;\n    }\n    const { pc } = this;\n    delete this.pc;\n    pc.ontrack = () => {};\n    pc.onconnectionstatechange = () => {};\n\n    try {\n      pc.getSenders().forEach((it) => pc.removeTrack(it));\n    } catch (errMsg) {}\n    try {\n      pc.close();\n    } catch (errMsg) {}\n  }\n\n  getSessionInfo({ sdp }) {\n    return this.sendRequest(this.api, {\n      method: 'POST',\n      body: JSON.stringify({\n        api: this.api,\n        sdp,\n        streamurl: this.url,\n        clientip: null,\n        tid: Number(parseInt(new Date().getTime() * Math.random() * 100, 10))\n          .toString(16)\n          .substr(0, 7),\n      }),\n    }).then((info) => {\n      if (!info.sdp) {\n        return Promise.reject(info);\n      }\n      return info.sdp;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  sendRequest(url, opts) {\n    return fetch(url, {\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n      ...opts,\n    })\n      .then((response) => {\n        if (200 <= response.status && 300 > response.status) {\n          return response;\n        }\n        const errMsg = new Error(response.statusText);\n        errMsg.response = response;\n        return Promise.reject(errMsg);\n      })\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          return text ? JSON.parse(text) : {};\n        } catch (errMsg) {\n          return Promise.reject(errMsg);\n        }\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useSRSWebRTC from './useSRSWebRTC';\n\nconst SRSWebRTC = (props) => {\n  useSRSWebRTC(props);\n  return null;\n};\n\nSRSWebRTC.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onPlayClick: PropTypes.func.isRequired,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nSRSWebRTC.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  SRSWebRTC,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport SRSPlayer from './SRSPlayer';\n// import SrsRtcPlayerAsync from './SrsRtcPlayerAsync';\n\nexport default ({ getVideoElement, src, config, onPlayClick, onMsgChange }) => {\n  const ref = React.useRef({});\n\n  const cleanup = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (ref.current.getVideoElement) {\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.srcObject = null;\n      }\n    }\n    if (ref.current.player) {\n      try {\n        ref.current.player.destroy();\n      } catch (errMsg) {}\n      ref.current.player = null;\n    }\n  }, []);\n\n  const loadSource = React.useCallback(() => {\n    if (!ref.current || !ref.current.src) {\n      return;\n    }\n    const target = ref.current.src;\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    const player = new SRSPlayer(target, { ...ref.current.config });\n    if (!player) {\n      return;\n    }\n    ref.current.player = player;\n    const stream = player.subscribe();\n    el.pause();\n    el.srcObject = stream;\n    el.load();\n    // NOTE: iOS 微信浏览器中测试自动播放，与其他终端不一样，其他终端会加载数据并触发 canplay 事件，iOS 中并不会触发任何数据加载\n    onPlayClick();\n  }, [onPlayClick]);\n\n  React.useEffect(() => {\n    return () => {\n      cleanup();\n      ref.current = null;\n    };\n  }, [cleanup]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.getVideoElement = getVideoElement;\n    ref.current.config = config;\n    ref.current.onMsgChange = onMsgChange;\n  }, [getVideoElement, config, onMsgChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    cleanup();\n    ref.current.onMsgChange(null);\n    ref.current.src = src;\n    if (src) {\n      loadSource();\n    }\n  }, [loadSource, cleanup, src]);\n\n  return null;\n};\n","import React from 'react';\n\nconst PlayerContext = React.createContext([{}, () => {}]);\n\nexport default PlayerContext;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon, { PlayCircleOutlined } from '@ant-design/icons';\nimport { ReactComponent as MutedSvg } from '../Volume/muted.svg';\nimport styles from './index.module.less';\n\nconst PreventedTip = ({ src, prevented, muted }) => {\n  if (!src || !prevented) {\n    return null;\n  }\n  if (muted) {\n    return (\n      <div className={styles.preventedTip}>\n        <Icon className={styles.mutedSvg} component={MutedSvg} />\n        点击取消静音\n      </div>\n    );\n  }\n  return (\n    <div className={styles.preventedTip}>\n      <PlayCircleOutlined className={styles.mutedSvg} />\n      播放被阻止，点击恢复播放\n    </div>\n  );\n  // return <div className={styles.preventedTip}>视频播放被阻止</div>;\n};\n\nPreventedTip.propTypes = {\n  src: PropTypes.string,\n  prevented: PropTypes.bool.isRequired,\n  muted: PropTypes.bool.isRequired,\n};\n\nPreventedTip.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(\n  PreventedTip,\n  (p, n) => p.src === n.src && p.prevented === n.prevented && p.muted === n.muted,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst VideoMask = ({ src, showControls }) => {\n  return (\n    <button\n      type=\"button\"\n      className={styles.videoMask}\n      style={src ? { opacity: 0, background: 'transparent' } : {}}\n      onMouseMove={showControls}\n      onClick={showControls}\n    />\n  );\n};\n\nVideoMask.propTypes = {\n  src: PropTypes.string,\n  showControls: PropTypes.func.isRequired,\n};\n\nVideoMask.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(VideoMask, (p, n) => p.src === n.src && p.showControls === n.showControls);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined, PlayCircleOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst PlayState = ({ src, loading, paused, ended, seeking, waiting, kernelMsg, onPlayClick }) => {\n  if (!src || loading || kernelMsg) {\n    return null;\n  }\n\n  if (waiting || seeking) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  if (paused || ended) {\n    return (\n      <button type=\"button\" className={styles.play} onClick={onPlayClick}>\n        <PlayCircleOutlined />\n      </button>\n    );\n  }\n  return null;\n};\n\nPlayState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  kernelMsg: PropTypes.object,\n  onPlayClick: PropTypes.func.isRequired,\n};\n\nPlayState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.kernelMsg === n.kernelMsg &&\n    p.onPlayClick === n.onPlayClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst TopState = ({ src, loading, kernelMsg }) => {\n  if (!src) {\n    return null;\n  }\n\n  if (kernelMsg) {\n    return (\n      <div className={styles.kernelMsg}>\n        {kernelMsg.type}: {kernelMsg.detail}\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  return null;\n};\n\nTopState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  // duration: PropTypes.number.isRequired,\n  // currentTime: PropTypes.number.isRequired,\n  kernelMsg: PropTypes.object,\n};\n\nTopState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  TopState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.kernelMsg === n.kernelMsg,\n);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\nimport bgImg from './bg.png';\n\nconst Controls = ({ hiding, dispatch, children }) => {\n  const onMouseEnter = React.useCallback(() => {\n    if (global.matchMedia) {\n      const matched = global.matchMedia('(hover: none), (pointer: coarse)');\n      if (matched && matched.matches) {\n        return;\n      }\n    }\n    dispatch({ type: 'update', payload: { controlsHovering: true } });\n  }, [dispatch]);\n\n  const onMouseLeave = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { controlsHovering: false } });\n  }, [dispatch]);\n\n  return (\n    <div\n      className={styles.controls}\n      style={{ backgroundImage: `url(${bgImg})`, transform: hiding ? 'translate(0, 48px)' : 'translate(0, 0)' }}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n    </div>\n  );\n};\n\nControls.propTypes = {\n  hiding: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nControls.defaultProps = {\n  // buffered: null,\n};\n\nexport default React.memo(\n  Controls,\n  (p, n) => p.hiding === n.hiding && p.dispatch === n.dispatch && p.children === n.children,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst ControlBar = ({ children, extra }) => {\n  return (\n    <div className={styles.controlBar}>\n      <div className={styles.flexItem}>{children}</div>\n      {extra}\n    </div>\n  );\n};\n\nControlBar.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  extra: PropTypes.node.isRequired,\n};\n\n// ControlBar.defaultProps = {\n//   // buffered: null,\n// };\n\nexport default React.memo(ControlBar, (p, n) => p.children === n.children && p.extra === n.extra);\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\nimport styles from './index.module.less';\n\nconst getBufferedEnd = (currentTime, buffered) => {\n  if (!buffered) {\n    return 0;\n  }\n  for (let i = buffered.length - 1; 0 <= i; i -= 1) {\n    const end = buffered.end(i);\n    if (currentTime <= end && buffered.start(i) <= currentTime) {\n      return end;\n    }\n  }\n  return 0;\n};\n\nconst getEventXCoordinate = (e) => {\n  if (e.changedTouches && 1 <= e.changedTouches.length) {\n    return e.changedTouches[0].pageX;\n  }\n  return e.clientX || 0;\n};\n\nconst getValue = (e, rect, duration) => {\n  const w = getEventXCoordinate(e) - rect.left;\n  if (0 >= w) {\n    return 0;\n  }\n  if (w >= rect.width) {\n    return duration;\n  }\n  return Math.round((duration * w) / rect.width);\n};\n\nconst getBufferedScaleX = ({ buffered, currentTime, sliding, duration }) => {\n  if (0 >= duration || sliding) {\n    return 0;\n  }\n  const e = getBufferedEnd(currentTime, buffered);\n  return (e / duration).toFixed(3);\n};\n\nconst getTrackTranslateX = ({ duration, currentTime }) => {\n  if (0 === duration) {\n    return -100;\n  }\n  return ((100 * currentTime) / duration - 100).toFixed(1);\n};\n\nconst getMouseTranslateX = ({ duration, tooltip }) => {\n  if (0 >= duration) {\n    return 0;\n  }\n  return ((100 * tooltip) / duration).toFixed(1);\n};\n\nconst MouseTooltip = React.memo(({ duration, tooltip }) => {\n  const translateX = getMouseTranslateX({ duration, tooltip });\n  return (\n    <div className={styles.tooltip} style={{ transform: `translateX(${translateX}%)` }}>\n      <div className={styles.tip}>{numeral(tooltip).format('00:00:00')}</div>\n    </div>\n  );\n});\n\nMouseTooltip.propTypes = {\n  duration: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n};\n\nconst TimeSlider = React.memo(({ currentTime, duration, buffered, onChange, sliding, value, tooltip, dispatch }) => {\n  const ref = React.useRef({});\n  const sliderRef = React.useRef(null);\n\n  const onClick = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n\n      const rect = e.currentTarget.getBoundingClientRect();\n      const v = getValue(e, rect, duration);\n      onChange(v);\n    },\n    [onChange, duration, dispatch],\n  );\n\n  const onMouseDown = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      const react = sliderRef.current.getBoundingClientRect();\n      ref.current.react = { left: react.left, width: react.width };\n      dispatch({ type: 'update', payload: { sliding: true } });\n    },\n    [dispatch],\n  );\n\n  const update = React.useCallback(() => {\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const onMouseUp = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n      if (ref.current.react) {\n        const v = getValue(e, ref.current.react, duration);\n        ref.current.payload = { value: v };\n        update();\n        onChange(v);\n      }\n    },\n    [onChange, duration, update, dispatch],\n  );\n\n  const onMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.value = v;\n      } else {\n        ref.current.payload = { value: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  React.useEffect(() => {\n    if (sliding) {\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchcancel', onMouseUp);\n      document.addEventListener('touchend', onMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', onMouseMove);\n        document.removeEventListener('mouseup', onMouseUp);\n\n        document.removeEventListener('touchmove', onMouseMove);\n        document.removeEventListener('touchcancel', onMouseUp);\n        document.removeEventListener('touchend', onMouseUp);\n      };\n    }\n    return () => {};\n  }, [sliding, onMouseMove, onMouseUp]);\n\n  const onSliderMouseOver = React.useCallback((e) => {\n    e.preventDefault();\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  const onSliderMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.tooltip = v;\n      } else {\n        ref.current.payload = { tooltip: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  const onResize = React.useCallback((e) => {\n    e.preventDefault();\n    if (!sliderRef || !sliderRef.current) {\n      return;\n    }\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('resize', onResize);\n    return () => {\n      global.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = {};\n    };\n  }, []);\n\n  const bufferedScaleX = getBufferedScaleX({ buffered, currentTime, sliding, duration });\n  const trackTranslateX = getTrackTranslateX({ duration, currentTime: sliding ? value : currentTime });\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={sliding ? styles.slidingSlider : styles.slider}\n      ref={sliderRef}\n      onClick={onClick}\n      onKeyDown={() => {}}\n      onMouseOver={onSliderMouseOver}\n      onMouseMove={onSliderMouseMove}\n      onFocus={() => {}}\n    >\n      <button type=\"button\" className={styles.sliderButton} onTouchStart={onMouseDown}>\n        <span className={styles.slidingTip} style={{ opacity: sliding ? 1 : 0 }}>\n          快进到：{numeral(value).format('00:00:00')}\n        </span>\n      </button>\n      <div className={styles.sliderRail}>\n        <div className={styles.sliderBuffered} style={{ transform: `scaleX(${bufferedScaleX})` }} />\n        <div className={styles.sliderTrack} style={{ transform: `translateX(${trackTranslateX}%)` }} />\n      </div>\n      <div className={styles.sliderHandleRail} style={{ transform: `translateX(${trackTranslateX}%)` }}>\n        <button type=\"button\" className={styles.sliderHandle} onMouseDown={onMouseDown} onTouchStart={onMouseDown} />\n      </div>\n      <MouseTooltip duration={duration} tooltip={sliding ? value : tooltip} />\n    </div>\n  );\n});\n\nTimeSlider.propTypes = {\n  currentTime: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  sliding: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nTimeSlider.defaultProps = {\n  buffered: null,\n};\n\nexport default React.memo(\n  TimeSlider,\n  (p, n) =>\n    p.currentTime === n.currentTime &&\n    p.duration === n.duration &&\n    p.buffered === n.buffered &&\n    p.onChange === n.onChange &&\n    p.sliding === n.sliding &&\n    p.value === n.value &&\n    p.tooltip === n.tooltip &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CaretRightOutlined, PauseOutlined } from '@ant-design/icons';\n// import styles from './index.module.less';\n\nconst PlayButton = ({ paused, ended, onPlayClick, onPauseClick }) => {\n  return paused || ended ? (\n    <button type=\"button\" onClick={onPlayClick}>\n      <CaretRightOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={onPauseClick}>\n      <PauseOutlined />\n    </button>\n  );\n};\n\nPlayButton.propTypes = {\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayButton,\n  (p, n) =>\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onPauseClick === n.onPauseClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from 'antd';\nimport Icon from '@ant-design/icons';\n// import 'antd/lib/slider/style/index.css';\nimport styles from './index.module.less';\n\nimport { ReactComponent as MutedSvg } from './muted.svg';\nimport { ReactComponent as UnmutedSvg } from './unmuted.svg';\n\nconst Volume = ({ muted, volume, changeVolume, onMutedClick }) => {\n  return (\n    <span className={styles.volume}>\n      {(muted || 0 === volume) && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={MutedSvg} />\n        </button>\n      )}\n      {!muted && 0 !== volume && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={UnmutedSvg} />\n        </button>\n      )}\n      <span className={styles.volumeSlider}>\n        <Slider value={volume * 100} onChange={(v) => changeVolume(v / 100)} max={100} />\n      </span>\n    </span>\n  );\n};\n\nVolume.propTypes = {\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  Volume,\n  (p, n) =>\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolum,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\n\nimport styles from './index.module.less';\n\nconst PlayTime = ({ live, duration, currentTime }) => {\n  return (\n    <span className={styles.controlText}>\n      {numeral(Math.round(currentTime)).format('00:00:00')}\n      {live ? (\n        <span className={styles.controlText}>\n          <span className={styles.liveDot} />\n          直播\n        </span>\n      ) : (\n        ` / ${numeral(Math.round(duration)).format('00:00:00')}`\n      )}\n    </span>\n  );\n};\n\nPlayTime.propTypes = {\n  live: PropTypes.bool.isRequired,\n  duration: PropTypes.number.isRequired,\n  currentTime: PropTypes.number.isRequired,\n};\n\nexport default React.memo(\n  PlayTime,\n  (p, n) => p.live === n.live && p.duration === n.duration && p.currentTime === n.currentTime,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, Menu } from 'antd';\n\nimport styles from './index.module.less';\n\nconst PlayRate = ({ live, playbackRate, changePlaybackRate, visible, dispatch }) => {\n  const show = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      dispatch({ type: 'update', payload: { rateMenuVisible: true } });\n    },\n    [dispatch],\n  );\n\n  const hide = React.useCallback(() => dispatch({ type: 'update', payload: { rateMenuVisible: false } }), [dispatch]);\n\n  const onMenuClick = React.useCallback(\n    (e) => {\n      changePlaybackRate(parseFloat(e.key, 10));\n      dispatch({ type: 'update', payload: { rateMenuVisible: false } });\n    },\n    [changePlaybackRate, dispatch],\n  );\n\n  React.useEffect(() => {\n    document.body.addEventListener('click', hide);\n    return () => document.body.removeEventListener('click', hide);\n  }, [hide]);\n\n  if (live) {\n    return null;\n  }\n\n  return (\n    <Dropdown\n      visible={visible}\n      overlay={\n        <Menu selectedKeys={[playbackRate.toString()]} onClick={onMenuClick}>\n          <Menu.Item key=\"0.25\">&nbsp;&nbsp;0.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"0.5\">&nbsp;&nbsp;0.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1\">&nbsp;&nbsp;1 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.25\">&nbsp;&nbsp;1.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.5\">&nbsp;&nbsp;1.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"2\">&nbsp;&nbsp;2 倍速&nbsp;&nbsp;</Menu.Item>\n        </Menu>\n      }\n      placement=\"topRight\"\n      trigger={[]}\n    >\n      <button type=\"button\" className={styles.textBtn} onClick={show}>\n        倍速\n      </button>\n    </Dropdown>\n  );\n};\n\nPlayRate.propTypes = {\n  live: PropTypes.bool.isRequired,\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  visible: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayRate,\n  (p, n) =>\n    p.live === n.live &&\n    p.playbackRate === n.playbackRate &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.visible === n.visible &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FullscreenExitOutlined, FullscreenOutlined } from '@ant-design/icons';\n\nconst FullscreenButton = ({ fullscreen, requestFullscreen, exitFullscreen }) => {\n  return fullscreen ? (\n    <button type=\"button\" onClick={exitFullscreen}>\n      <FullscreenExitOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={requestFullscreen}>\n      <FullscreenOutlined />\n    </button>\n  );\n};\n\nFullscreenButton.propTypes = {\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  FullscreenButton,\n  (p, n) =>\n    p.fullscreen === n.fullscreen &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './index.module.less';\n\nconst PictureInPicture = ({ pictureInPictureEnabled, pip, exitPictureInPicture, requestPictureInPicture }) => {\n  if (!pictureInPictureEnabled) {\n    return null;\n  }\n  return (\n    <button type=\"button\" className={styles.textBtn} onClick={pip ? exitPictureInPicture : requestPictureInPicture}>\n      画中画\n    </button>\n  );\n};\n\nPictureInPicture.propTypes = {\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PictureInPicture,\n  (p, n) =>\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestPictureInPicture === n.requestPictureInPicture,\n);\n","import React from 'react';\n\nconst initialState = {\n  controlsHovering: false,\n  sliding: false,\n  value: 0,\n  tooltip: 0,\n  hiding: false,\n  rateMenuVisible: false,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default () => {\n  const [{ controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible }, dispatch] = React.useReducer(\n    reducer,\n    initialState,\n  );\n  // const ref = React.useRef({});\n\n  React.useEffect(() => {\n    // console.log('usePlayerSkin');\n    return () => {\n      dispatch({ type: 'reset' });\n    };\n  }, []);\n\n  return {\n    dispatch,\n    controlsHovering,\n    hiding,\n    sliding,\n    value,\n    tooltip,\n    rateMenuVisible,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PreventedTip from './PreventedTip';\nimport VideoMask from './VideoMask';\nimport PlayState from './PlayState';\nimport TopState from './TopState';\n\nimport Controls from './Controls';\nimport ControlBar from './ControlBar';\nimport TimeSlider from './TimeSlider';\nimport PlayButton from './Controls/PlayButton';\nimport Volume from './Volume';\nimport PlayTime from './PlayTime';\nimport PlayRate from './Controls/PlayRate';\nimport FullscreenButton from './Controls/FullscreenButton';\nimport PictureInPicture from './Controls/PictureInPicture';\n\nimport usePlayerSkin from './usePlayerSkin';\nimport useAutoHide from './useAutoHide';\nimport 'antd/lib/tooltip/style/index.css';\nimport 'antd/lib/slider/style/index.css';\nimport 'antd/lib/dropdown/style/index.css';\nimport styles from './index.module.less';\n\nconst PlayerSkin = ({\n  live,\n  src,\n  prevented,\n  loading,\n  paused,\n  ended,\n  seeking,\n  waiting,\n  onPlayClick,\n  onPauseClick,\n  duration,\n  buffered,\n  currentTime,\n  changeCurrentTime,\n  muted,\n  volume,\n  changeVolume,\n  onMutedClick,\n  playbackRate,\n  changePlaybackRate,\n  pictureInPictureEnabled,\n  pip,\n  requestPictureInPicture,\n  exitPictureInPicture,\n  fullscreen,\n  requestFullscreen,\n  exitFullscreen,\n  kernelMsg,\n}) => {\n  const { dispatch, controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible } = usePlayerSkin();\n\n  const { show } = useAutoHide({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    kernelMsg,\n    dispatch,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n  });\n\n  return (\n    <div className={styles.playerSkin}>\n      <VideoMask src={src} showControls={show} />\n      <PlayState\n        src={src}\n        loading={loading}\n        paused={paused}\n        ended={ended}\n        waiting={waiting}\n        seeking={seeking}\n        kernelMsg={kernelMsg}\n        onPlayClick={onPlayClick}\n      />\n      <Controls hiding={hiding} dispatch={dispatch}>\n        {false === live && (\n          <TimeSlider\n            currentTime={currentTime}\n            duration={duration}\n            buffered={buffered}\n            onChange={changeCurrentTime}\n            sliding={sliding}\n            value={value}\n            tooltip={tooltip}\n            dispatch={dispatch}\n          />\n        )}\n        <ControlBar\n          extra={\n            <>\n              <PictureInPicture\n                pictureInPictureEnabled={pictureInPictureEnabled}\n                pip={pip}\n                requestPictureInPicture={requestPictureInPicture}\n                exitPictureInPicture={exitPictureInPicture}\n              />\n              <PlayRate\n                live={live}\n                playbackRate={playbackRate}\n                changePlaybackRate={changePlaybackRate}\n                dispatch={dispatch}\n                visible={rateMenuVisible}\n              />\n              <FullscreenButton\n                fullscreen={fullscreen}\n                requestFullscreen={requestFullscreen}\n                exitFullscreen={exitFullscreen}\n              />\n            </>\n          }\n        >\n          <PlayButton paused={paused} ended={ended} onPauseClick={onPauseClick} onPlayClick={onPlayClick} />\n          <Volume muted={muted} volume={volume} onMutedClick={onMutedClick} changeVolume={changeVolume} />\n          <PlayTime live={live} currentTime={currentTime} duration={duration} />\n        </ControlBar>\n      </Controls>\n      <PreventedTip src={src} prevented={prevented} muted={muted} />\n      <TopState src={src} loading={loading} kernelMsg={kernelMsg} />\n    </div>\n  );\n};\n\nPlayerSkin.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string,\n  // controls: PropTypes.bool.isRequired,\n  // state\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n  // time\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  currentTime: PropTypes.number.isRequired,\n  changeCurrentTime: PropTypes.func.isRequired,\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  // playbackRate\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  // pip\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n  // kernel\n  kernelMsg: PropTypes.object,\n};\n\nPlayerSkin.defaultProps = {\n  live: false,\n  src: '',\n  buffered: null,\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayerSkin,\n  (p, n) =>\n    p.live === n.live &&\n    p.src === n.src &&\n    // p.controls === n.controls &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.buffered === n.buffered &&\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.playbackRate === n.playbackRate &&\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.fullscreen === n.fullscreen &&\n    p.kernelMsg === n.kernelMsg &&\n    p.getVideoElement === n.getVideoElement &&\n    p.onPauseClick === n.onPauseClick &&\n    p.onPlayClick === n.onPlayClick &&\n    p.changeCurrentTime === n.changeCurrentTime &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolume &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.requestPictureInPicture === n.requestPictureInPicture &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\n\nexport default ({\n  src,\n  loading,\n  prevented,\n  paused,\n  ended,\n  waiting,\n  seeking,\n  kernelMsg,\n  controlsHovering,\n  sliding,\n  rateMenuVisible,\n  dispatch,\n}) => {\n  const ref = React.useRef({});\n\n  const animationFrameCallback = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.requestID || true === ref.current.hiding) {\n        return;\n      }\n      if (!ref.current.timestamp) {\n        ref.current.timestamp = timestamp;\n      }\n      if (3 * 1000 > timestamp - ref.current.timestamp) {\n        ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n        return;\n      }\n      dispatch({ type: 'update', payload: { hiding: true } });\n      ref.current.hiding = true;\n      delete ref.current.requestID;\n      delete ref.current.timestamp;\n    },\n    [dispatch],\n  );\n\n  const startAutoHide = React.useCallback(() => {\n    if (false !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    delete ref.current.timestamp;\n    if (ref.current.requestID) {\n      return;\n    }\n    ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n  }, [dispatch, animationFrameCallback]);\n\n  const stopAutoHide = React.useCallback(() => {\n    if (true !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    if (ref.current.requestID) {\n      global.cancelAnimationFrame(ref.current.requestID);\n    }\n    delete ref.current.requestID;\n    delete ref.current.timestamp;\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    if (\n      !src ||\n      loading ||\n      prevented ||\n      paused ||\n      ended ||\n      waiting ||\n      seeking ||\n      sliding ||\n      rateMenuVisible ||\n      controlsHovering ||\n      kernelMsg\n    ) {\n      stopAutoHide();\n    } else {\n      startAutoHide();\n    }\n  }, [\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n    kernelMsg,\n    startAutoHide,\n    stopAutoHide,\n  ]);\n\n  return { show: startAutoHide };\n};\n","import React from 'react';\nimport PlayerContext from '../PlayerContext';\nimport PlayerSkin from '../PlayerSkin';\n\nconst PlayerSkinWapper = () => {\n  const props = React.useContext(PlayerContext);\n  return <PlayerSkin {...props} />;\n};\n\nexport default PlayerSkinWapper;\n","import React from 'react';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  playbackRate: 1,\n  enabled: !!document.pictureInPictureEnabled,\n  pictureInPictureEnabled: !!document.pictureInPictureEnabled,\n  pip: false,\n  fullscreen: false,\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      playbackRate,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n  const ref = React.useRef({ src });\n\n  const clearUpdateTimeout = React.useCallback(() => {\n    if (ref.current && ref.current.timeout) {\n      global.clearTimeout(ref.current.timeout);\n      delete ref.current.timeout;\n    }\n  }, []);\n\n  const timeoutCallback = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    delete ref.current.timeout;\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const updateState = React.useCallback(\n    (payload, sync = false) => {\n      if (!ref.current) {\n        return;\n      }\n      ref.current.payload = { ...ref.current.payload, ...payload };\n      if (sync) {\n        timeoutCallback();\n        return;\n      }\n      if (ref.current.timeout) {\n        return;\n      }\n      ref.current.timeout = global.setTimeout(timeoutCallback, 100);\n    },\n    [timeoutCallback],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      clearUpdateTimeout();\n      ref.current = null;\n    };\n  }, [clearUpdateTimeout]);\n\n  React.useEffect(() => {\n    clearUpdateTimeout();\n    dispatch({ type: 'reset' });\n  }, [src, clearUpdateTimeout]);\n\n  return {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  };\n};\n","import React from 'react';\nimport usePlayerReducer from '../hooks/usePlayerReducer';\nimport useVideoState from '../hooks/useVideoState';\nimport useTime from '../hooks/useTime';\nimport useVolume from '../hooks/useVolume';\nimport usePlaybackRate from '../hooks/usePlaybackRate';\nimport usePiP from '../hooks/usePiP';\nimport useFullscreen from '../hooks/useFullscreen';\n\nexport default ({ src, live, onKernelError }) => {\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n\n  const {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  } = usePlayerReducer({ src });\n\n  const getVideoElement = React.useCallback(() => videoRef && videoRef.current, []);\n  const getPlayerElement = React.useCallback(() => playerRef && playerRef.current, []);\n\n  const onMsgChange = React.useCallback(\n    (msg) => {\n      // debugger;\n      updateState({ kernelMsg: msg });\n      if (onKernelError) {\n        onKernelError(msg);\n      }\n    },\n    [updateState, onKernelError],\n  );\n\n  const { onPauseClick, onPlayClick } = useVideoState({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    updateState,\n    getVideoElement,\n  });\n\n  const { changeCurrentTime } = useTime({ src, duration, currentTime, buffered, updateState, getVideoElement });\n  const { onMutedClick, changeVolume } = useVolume({ src, prevented, muted, volume, updateState, getVideoElement });\n  const { changePlaybackRate } = usePlaybackRate({ src, live, playbackRate, updateState, getVideoElement });\n  const { requestPictureInPicture, exitPictureInPicture } = usePiP({ src, pip, updateState, getVideoElement });\n  const { requestFullscreen, exitFullscreen } = useFullscreen({ updateState, getVideoElement, getPlayerElement });\n\n  return {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  };\n};\n","import React from 'react';\n\nexport default ({ src, loading, prevented, ended, updateState, getVideoElement }) => {\n  const ref = React.useRef({ getVideoElement, loading, prevented, ended });\n\n  const onPlayClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      if (ref.current.ended) {\n        el.currentTime = 0;\n      }\n      const p = el.play();\n      if (!p || !p.then) {\n        return;\n      }\n      p\n        // .then(() => updateState({ loading: false }))\n        .catch((e) => {\n          if (!ref.current || 'NotAllowedError' !== e.name) {\n            return Promise.resolve();\n          }\n          updateState({ prevented: true });\n          el.muted = true;\n          // NOTE: 桌面环境下静音可以播放，但是移动环境下静音不可以播放，需要分开处理\n          return el.play();\n        })\n        .catch((e) => {\n          if (!ref.current || 'NotAllowedError' !== e.name) {\n            return Promise.resolve();\n          }\n          // NOTE: 恢复静音状态，用户点击调用播放就可以了\n          el.muted = false;\n          return Promise.resolve();\n        });\n    }\n    updateState({ paused: false }, true);\n  }, [updateState]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.pause();\n    }\n    updateState({ paused: true }, true);\n  }, [updateState]);\n\n  const onCanPlay = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ loading: false, waiting: false });\n    if (ref.current.loading) {\n      // NOTE: 电脑和安卓端自动播放处理，iOS 机制不一样单独调用了 onPlayClick\n      onPlayClick();\n    }\n  }, [updateState, onPlayClick]);\n\n  const onPause = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: true });\n  }, [updateState]);\n\n  const onPlay = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onPlaying = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onEnded = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ ended: true });\n  }, [updateState]);\n\n  const onSeeked = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ seeking: false });\n  }, [updateState]);\n\n  const onSeeking = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ seeking: true });\n  }, [updateState]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ waiting: false });\n  }, [updateState]);\n\n  const onWaiting = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ waiting: true });\n  }, [updateState]);\n\n  const onDocumentClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    // NOTE: addEventListener 使用了 once ，理论上是不需要 remove 的，这里做个保护\n    document.removeEventListener('click', onDocumentClick);\n    // NOTE: 自动播放已被阻止，桌面端取消静音就可以了，移动端需要再次调用 play\n    if (ref.current.prevented) {\n      if (el.muted) {\n        el.muted = false;\n      } else {\n        el.play();\n      }\n      updateState({ prevented: false });\n      return;\n    }\n    // NOTE: 未出现播放阻止的两种情况，一是已经在正常播放了，此时不要处理了，二是页面还未调用播放\n    if (ref.current.src) {\n      // NOTE: 未出现播放\n      return;\n    }\n    // NOTE: 页面发生点击的时候调用一下 video play，后续的自动播放可以成功\n    el.src = '';\n    try {\n      const p = el.play();\n      if (p) {\n        p.catch((e) => {\n          // eslint-disable-next-line no-console\n          console.log('useAutoplay[onDocumentClick]: load empty src for autoPlay, %o', e);\n        });\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log('useAutoplay[onDocumentClick]: load empty src for autoPlay, %o', e);\n    }\n    // el.pause();\n  }, [updateState]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    if (src) {\n      updateState({ loading: true }, true);\n    }\n  }, [src, updateState]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.loading = loading;\n    ref.current.prevented = prevented;\n    ref.current.ended = ended;\n  }, [loading, prevented, ended]);\n\n  React.useEffect(() => {\n    if (!ref.current || !ref.current.getVideoElement) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n\n    el.addEventListener('canplay', onCanPlay);\n    el.addEventListener('pause', onPause);\n    el.addEventListener('play', onPlay);\n    el.addEventListener('playing', onPlaying);\n    el.addEventListener('ended', onEnded);\n    el.addEventListener('seeked', onSeeked);\n    el.addEventListener('seeking', onSeeking);\n    el.addEventListener('canplaythrough', onCanPlayThrough);\n    el.addEventListener('waiting', onWaiting);\n    document.addEventListener('click', onDocumentClick, { once: true });\n    return () => {\n      el.removeEventListener('canplay', onCanPlay);\n      el.removeEventListener('pause', onPause);\n      el.removeEventListener('play', onPlay);\n      el.removeEventListener('playing', onPlaying);\n      el.removeEventListener('ended', onEnded);\n      el.removeEventListener('seeked', onSeeked);\n      el.removeEventListener('seeking', onSeeking);\n      el.removeEventListener('canplaythrough', onCanPlayThrough);\n      el.removeEventListener('waiting', onWaiting);\n      document.removeEventListener('click', onDocumentClick);\n    };\n  }, [\n    onCanPlay,\n    onPause,\n    onPlay,\n    onPlaying,\n    onEnded,\n    onSeeked,\n    onSeeking,\n    onCanPlayThrough,\n    onWaiting,\n    onDocumentClick,\n  ]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ src, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement, timestamp: 0, payload: null });\n  // const updateRef = React.useRef(null);\n\n  const onDurationChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      const v = e.target.duration;\n      // TODO: 同步更新\n      updateState({ duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 });\n    },\n    [updateState],\n  );\n\n  const update = React.useCallback(\n    (timestamp) => {\n      if (!ref.current || !ref.current.payload) {\n        return;\n      }\n      if (ref.current.timestamp && !Number.isNaN(ref.current.timestamp) && 200 > timestamp - ref.current.timestamp) {\n        global.requestAnimationFrame(update);\n        return;\n      }\n      updateState(ref.current.payload);\n      ref.current.timestamp = timestamp;\n      delete ref.current.payload;\n    },\n    [updateState],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (!ref.current || Number.isNaN(e.target.currentTime)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.currentTime = e.target.currentTime;\n      } else {\n        ref.current.payload = { currentTime: e.target.currentTime };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => {\n      if (!ref.current || !(e.target.buffered instanceof TimeRanges)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.buffered = e.target.buffered;\n      } else {\n        ref.current.payload = { buffered: e.target.buffered };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      if (!ref.current) {\n        return;\n      }\n      const v = parseFloat(t);\n      if (Number.isNaN(v)) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.currentTime = v;\n      }\n      delete ref.current.payload;\n      updateState({ currentTime: v });\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    ref.current.timestamp = 0;\n    ref.current.payload = null;\n  }, [src]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('durationchange', onDurationChange);\n    el.addEventListener('timeupdate', onTimeUpdate);\n    el.addEventListener('progress', onProgress);\n    return () => {\n      el.removeEventListener('durationchange', onDurationChange);\n      el.removeEventListener('timeupdate', onTimeUpdate);\n      el.removeEventListener('progress', onProgress);\n    };\n  }, [onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ src, prevented, muted, volume, updateState, getVideoElement }) => {\n  const ref = React.useRef({ prevented, muted, volume, getVideoElement });\n\n  const onVolumeChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      const payload = { volume: e.target.volume, muted: e.target.muted };\n      // if (false === payload.muted && ref.current.prevented) {\n      //   payload.prevented = false;\n      // }\n      if (0 === payload.volume) {\n        payload.muted = true;\n      }\n      updateState(payload);\n    },\n    [updateState],\n  );\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      const payload = { muted: !ref.current.muted };\n      el.muted = payload.muted;\n      if (0 === ref.current.volume && ref.current.muted) {\n        payload.volume = 1;\n        el.volume = payload.volume;\n      }\n      updateState(payload, true);\n    }\n  }, [updateState]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (!ref.current) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      const payload = { volume: v };\n      if (el) {\n        el.volume = v;\n      }\n      if (0 !== v && ref.current.muted) {\n        payload.muted = false;\n      }\n      updateState(payload, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      el.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [onVolumeChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.prevented = prevented;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [prevented, muted, volume]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.muted = false;\n      el.volume = 1;\n    }\n  }, [src]);\n\n  return { onMutedClick, changeVolume };\n};\n","import React from 'react';\n\nexport default ({ src, live, updateState, getVideoElement }) => {\n  const ref = React.useRef({ live, getVideoElement });\n\n  const onRateChange = React.useCallback(\n    (e) => {\n      if (!ref.current) {\n        return;\n      }\n      if (Number.isNaN(e.target.playbackRate)) {\n        return;\n      }\n      updateState({ playbackRate: e.target.playbackRate });\n    },\n    [updateState],\n  );\n\n  const changePlaybackRate = React.useCallback(\n    (r) => {\n      if (!ref.current) {\n        return;\n      }\n      if (Number.isNaN(r)) {\n        return;\n      }\n      const v = ref.current.live ? 1 : r;\n      const el = ref.current.getVideoElement();\n      if (!el) {\n        return;\n      }\n      el.playbackRate = v;\n      updateState({ playbackRate: v }, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.live = live;\n    if (live) {\n      changePlaybackRate(1);\n    }\n  }, [live, changePlaybackRate]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('ratechange', onRateChange);\n    return () => {\n      el.removeEventListener('ratechange', onRateChange);\n    };\n  }, [getVideoElement, onRateChange]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.playbackRate = 1;\n    }\n  }, [src]);\n\n  return { changePlaybackRate };\n};\n","import React from 'react';\n\nexport default ({ src, pip, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement });\n\n  const requestPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current.getVideoElement();\n    if (el && el.requestPictureInPicture && ref.current.src) {\n      el.requestPictureInPicture();\n    }\n  }, []);\n\n  const exitPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    if (document.exitPictureInPicture) {\n      document.exitPictureInPicture();\n    }\n  }, []);\n\n  const onEnterPictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ pip: true });\n  }, [updateState]);\n\n  const onLeavePictureInPicture = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    updateState({ pip: false });\n  }, [updateState]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = null;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return () => {};\n    }\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('enterpictureinpicture', onEnterPictureInPicture);\n    el.addEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    return () => {\n      el.removeEventListener('enterpictureinpicture', onEnterPictureInPicture);\n      el.removeEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    };\n  }, [onEnterPictureInPicture, onLeavePictureInPicture]);\n\n  React.useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.src = src;\n    if (pip && !src) {\n      exitPictureInPicture();\n    }\n  }, [src, pip, exitPictureInPicture]);\n\n  return { requestPictureInPicture, exitPictureInPicture };\n};\n","import React from 'react';\n\nexport default ({ updateState, getVideoElement, getPlayerElement }) => {\n  const requestFullscreen = React.useCallback(() => {\n    const el = getPlayerElement();\n    if (!el) {\n      // debug('useVideoFullscreen: 全屏异常，unmounted');\n      return;\n    }\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.msRequestFullscreen) {\n      // 兼容 IE11\n      el.msRequestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      // 兼容微信 PC 版内置浏览器\n      el.webkitRequestFullscreen();\n    } else {\n      const videoEl = getVideoElement();\n      if (videoEl && videoEl.webkitEnterFullScreen) {\n        // 兼容 iOS Safari\n        videoEl.webkitEnterFullScreen();\n      } else {\n        // 异常分支，不应该进入\n        // debug('useVideoFullscreen: 全屏异常，浏览器不支持 requestFullscreen');\n      }\n    }\n  }, [getVideoElement, getPlayerElement]);\n\n  const exitFullscreen = React.useCallback(() => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else {\n      // 异常分支，不应该进入\n      // debug('useVideoFullscreen: 退出全屏异常，浏览器不支持 exitFullscreen');\n    }\n  }, []);\n\n  const onChange = React.useCallback(() => {\n    const el = getPlayerElement();\n    const fullscreenElement =\n      document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n    updateState({ fullscreen: !!el && fullscreenElement === el });\n  }, [updateState, getPlayerElement]);\n\n  React.useEffect(() => {\n    document.addEventListener('fullscreenchange', onChange);\n    document.addEventListener('webkitfullscreenchange', onChange);\n    document.onmsfullscreenchange = onChange;\n    return () => {\n      document.removeEventListener('fullscreenchange', onChange);\n      document.removeEventListener('webkitfullscreenchange', onChange);\n      document.onmsfullscreenchange = null;\n    };\n  }, [onChange]);\n\n  return { requestFullscreen, exitFullscreen };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Flvjs from '../Flvjs';\nimport Hlsjs from '../Hlsjs';\nimport Native from '../Native';\nimport SRSWebRTC from '../SRSWebRTC';\nimport PlayerSkinWapper from '../PlayerSkinWapper';\nimport PlayerContext from '../PlayerContext';\nimport useReactjsPlayer from './useReactjsPlayer';\nimport styles from './index.module.less';\n\nconst ReactjsPlayer = ({\n  kernel,\n  live,\n  config,\n  onKernelError,\n  src,\n  type,\n  controls,\n  className,\n  videoProps,\n  playerProps,\n  children,\n}) => {\n  const {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  } = useReactjsPlayer({ src, live, onKernelError });\n\n  const kernelProps = { getVideoElement, src, config, onMsgChange };\n\n  return (\n    <div className={`${styles.reactjsPlayer} ${className}`} ref={playerRef} {...playerProps}>\n      {'flvjs' === kernel && <Flvjs {...kernelProps} />}\n      {'hlsjs' === kernel && <Hlsjs {...kernelProps} />}\n      {'native' === kernel && <Native {...kernelProps} onPlayClick={onPlayClick} />}\n      {'srswebrtc' === kernel && <SRSWebRTC {...kernelProps} onPlayClick={onPlayClick} />}\n      {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n      <video\n        className={styles.video}\n        ref={videoRef}\n        controls={'controls' === controls}\n        type={type}\n        autoPlay\n        preload=\"metadata\"\n        {...videoProps}\n      />\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          loading,\n          prevented,\n          paused,\n          ended,\n          seeking,\n          waiting,\n          duration,\n          currentTime,\n          buffered,\n          muted,\n          volume,\n          playbackRate,\n          pictureInPictureEnabled,\n          pip,\n          fullscreen,\n          kernelMsg,\n          getVideoElement,\n          onPauseClick,\n          onPlayClick,\n          changeCurrentTime,\n          onMutedClick,\n          changeVolume,\n          changePlaybackRate,\n          requestPictureInPicture,\n          exitPictureInPicture,\n          requestFullscreen,\n          exitFullscreen,\n        }}\n      >\n        {true === controls && <PlayerSkinWapper />}\n        {children}\n      </PlayerContext.Provider>\n    </div>\n  );\n};\n\nReactjsPlayer.propTypes = {\n  kernel: PropTypes.oneOf(['hlsjs', 'flvjs', 'native', 'srswebrtc']).isRequired,\n  live: PropTypes.bool.isRequired,\n  config: PropTypes.object,\n  onKernelError: PropTypes.func,\n\n  src: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  controls: PropTypes.oneOf([false, true, 'controls']),\n\n  className: PropTypes.string,\n  videoProps: PropTypes.object,\n  playerProps: PropTypes.object,\n\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nReactjsPlayer.defaultProps = {\n  config: null,\n  onKernelError: null,\n\n  src: '',\n  controls: true,\n\n  className: '',\n  videoProps: null,\n  playerProps: null,\n\n  children: null,\n};\n\nexport default React.memo(\n  ReactjsPlayer,\n  (p, n) =>\n    p.kernel === n.kernel &&\n    p.live === n.live &&\n    p.config === n.config &&\n    p.onKernelError === n.onKernelError &&\n    p.src === n.src &&\n    p.type === n.type &&\n    p.controls === n.controls &&\n    p.className === n.className &&\n    p.videoProps === n.videoProps &&\n    p.playerProps === n.playerProps &&\n    p.children === n.children,\n);\n","import { EventEmitter } from 'fbemitter';\n\nlet emitter = null;\nlet index = 0;\n\nclass GrindPlayer {\n  /**\n   * 创建 GrindPlayer 实例\n   */\n  constructor(id) {\n    this.id = id;\n    this.el = null;\n    this.emitter = new EventEmitter();\n    this.tokenList = [];\n    this.eventMap = [];\n\n    this.addListener();\n  }\n\n  addListener() {\n    if (!emitter) {\n      emitter = new EventEmitter();\n    }\n\n    this.tokenList = [\n      emitter.addListener(`${this.id}.onJavaScriptBridgeCreated`, () => {\n        this.el = document.getElementById(this.id);\n        // this.el.addEventListener('mediaError', () => );\n      }),\n      emitter.addListener(`${this.id}.mediaSize`, (data) => {\n        if (0 === data.videoHeight && 0 === data.videoWidth) {\n          this.emitter.emit('canplay');\n        } else {\n          this.emitter.emit('canplaythrough');\n        }\n      }),\n      emitter.addListener(`${this.id}.paused`, () => this.emitter.emit('pause')),\n      emitter.addListener(`${this.id}.playing`, () => this.emitter.emit('playing')),\n      emitter.addListener(`${this.id}.seeking`, () => this.emitter.emit('seeking')),\n      emitter.addListener(`${this.id}.seeked`, () => this.emitter.emit('seeked')),\n      emitter.addListener(`${this.id}.complete`, () => this.emitter.emit('ended')),\n      emitter.addListener(`${this.id}.buffering`, () => this.emitter.emit('waiting')),\n\n      emitter.addListener(`${this.id}.durationChange`, (e) => this.emitter.emit('durationchange', e)),\n      emitter.addListener(`${this.id}.timeChange`, (e) => this.emitter.emit('timeupdate', e)),\n      emitter.addListener(`${this.id}.progress`, (e) => this.emitter.emit('progress', e)),\n\n      emitter.addListener(`${this.id}.volumeChange`, (e) => this.emitter.emit('volumechange', e)),\n    ];\n  }\n\n  invoker(methodName, ...args) {\n    if (!this.el) {\n      return;\n    }\n    this.el[methodName](...args);\n  }\n\n  addEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    const token = this.emitter.addListener(event, fn);\n    this.eventMap.push({ token, event, fn });\n  }\n\n  removeEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    this.eventMap = this.eventMap.filter((it) => {\n      if (it.event !== event) {\n        return true;\n      }\n      if (!fn && it.fn !== fn) {\n        return true;\n      }\n      it.token.remove();\n      return false;\n    });\n  }\n\n  destroy() {\n    if (this.eventMap) {\n      this.eventMap.map((it) => it.token.remove());\n      delete this.eventMap;\n    }\n\n    if (this.tokenList) {\n      this.tokenList.map((it) => it.remove());\n      delete this.tokenList;\n    }\n\n    if (this.emitter) {\n      this.emitter.removeAllListeners();\n    }\n    delete this.emitter;\n\n    delete this.id;\n    delete this.el;\n  }\n}\n\nconst onJSBridge = (playerId, event, data) => {\n  if (!emitter) {\n    emitter = new EventEmitter();\n  }\n  console.log(`${event}: ${JSON.stringify(data)}`);\n  emitter.emit(`${playerId}.${event}`, data);\n};\n\nexport default {\n  getPlayerId: () => `grindPlayer${index++}`,\n\n  getGrindPlayer: (id, javascriptCallbackFunction) => {\n    if (!global[javascriptCallbackFunction]) {\n      global[javascriptCallbackFunction] = onJSBridge;\n    }\n    return new GrindPlayer(id);\n  },\n};\n","import React from 'react';\nimport GrindPlayer from './GrindPlayer';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  pictureInPictureEnabled: false,\n  pip: false,\n  fullscreen: false,\n  playbackRate: 1,\n  javascriptCallbackFunction: 'onJSBridge',\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      playbackRate,\n      javascriptCallbackFunction,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n\n  const id = React.useMemo(() => GrindPlayer.getPlayerId(), []);\n  const ref = React.useRef({});\n\n  React.useEffect(() => {\n    const player = GrindPlayer.getGrindPlayer(id, javascriptCallbackFunction);\n    ref.current.player = player;\n    return () => {\n      player.destroy();\n      ref.current = null;\n    };\n  }, [id, javascriptCallbackFunction]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.ended = ended;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [loading, ended, muted, volume]);\n\n  React.useEffect(() => {\n    dispatch({ type: 'reset', payload: { loading: !!src } });\n  }, [src]);\n\n  return {\n    ref,\n    dispatch,\n    id,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    playbackRate,\n    javascriptCallbackFunction,\n    kernelMsg,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactSWF from 'react-swf';\nimport './GrindPlayer.swf';\nimport './flashlsOSMF.swf';\nimport PlayerContext from '../PlayerContext';\nimport useGrindPlayer from './useGrindPlayer';\nimport useState from './useState';\nimport useTime from './useTime';\nimport useVolume from './useVolume';\nimport styles from './index.module.less';\n\nconst GrindPlayer = ({ live, src, type, grindPlayerSwf, flashlsOSMFSwf }) => {\n  const { ref, dispatch, id, javascriptCallbackFunction, ...state } = useGrindPlayer({ src });\n\n  const stateProps = useState({ ref, dispatch });\n  const timeProps = useTime({ ref, dispatch });\n  const volumeProps = useVolume({ ref, dispatch });\n\n  return (\n    <div className={styles.grindPlayer}>\n      {src && (\n        <ReactSWF\n          id={id}\n          src={grindPlayerSwf}\n          width=\"100%\"\n          height=\"100%\"\n          wmode=\"opaque\"\n          allowFullScreen\n          allowScriptAccess=\"always\"\n          bgcolor=\"#000000\"\n          flashVars={{\n            src,\n            autoPlay: true,\n            bufferTime: 0.5,\n            streamType: live ? 'live' : 'recorded',\n            plugin_hls: 'application/x-mpegURL' === type ? flashlsOSMFSwf : undefined,\n            javascriptCallbackFunction,\n          }}\n        />\n      )}\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          ...state,\n          ...stateProps,\n          ...timeProps,\n          ...volumeProps,\n        }}\n      />\n    </div>\n  );\n};\n\nGrindPlayer.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  grindPlayerSwf: PropTypes.string,\n  flashlsOSMFSwf: PropTypes.string,\n};\n\nGrindPlayer.defaultProps = {\n  live: true,\n  grindPlayerSwf: 'http://unpkg.com/reactjs-player/dist/GrindPlayer.swf',\n  flashlsOSMFSwf: 'http://unpkg.com/reactjs-player/dist/flashlsOSMF.swf',\n};\n\nexport default React.memo(GrindPlayer);\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onPlayClick = React.useCallback(() => {\n    if (ref.current.player) {\n      if (ref.current.ended) {\n        ref.current.player.invoker('seek', 0);\n      }\n      ref.current.player.invoker('play2');\n    }\n    dispatch({ type: 'update', payload: { paused: false } });\n  }, [ref, dispatch]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (ref.current.player) {\n      ref.current.player.invoker('pause');\n    }\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [ref, dispatch]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (ref.current.loading) {\n      dispatch({ type: 'update', payload: { loading: false } });\n    }\n    dispatch({ type: 'update', payload: { waiting: false } });\n  }, [ref, dispatch]);\n\n  const onPause = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [dispatch]);\n\n  const onPlaying = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: false, ended: false } });\n  }, [dispatch]);\n\n  const onEnded = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { ended: true } });\n  }, [dispatch]);\n\n  const onSeeked = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: false } });\n  }, [dispatch]);\n\n  const onSeeking = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: true } });\n  }, [dispatch]);\n\n  const onWaiting = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { waiting: true } });\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('canplaythrough', onCanPlayThrough);\n    player.addEventListener('pause', onPause);\n    player.addEventListener('playing', onPlaying);\n    player.addEventListener('ended', onEnded);\n    player.addEventListener('seeked', onSeeked);\n    player.addEventListener('seeking', onSeeking);\n    player.addEventListener('waiting', onWaiting);\n    return () => {\n      player.removeEventListener('canplaythrough', onCanPlayThrough);\n      player.removeEventListener('pause', onPause);\n      player.removeEventListener('playing', onPlaying);\n      player.removeEventListener('ended', onEnded);\n      player.removeEventListener('seeked', onSeeked);\n      player.removeEventListener('seeking', onSeeking);\n      player.removeEventListener('waiting', onWaiting);\n    };\n  }, [ref, onCanPlayThrough, onPause, onPlaying, onEnded, onSeeked, onSeeking, onWaiting]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.duration;\n      dispatch({ type: 'update', payload: { duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 } });\n    },\n    [dispatch],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.currentTime)) {\n        return;\n      }\n      dispatch({ type: 'update', payload: { currentTime: e.currentTime } });\n    },\n    [dispatch],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => dispatch({ type: 'update', payload: { buffered: e.buffered } }),\n    [dispatch],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v) || !ref.current || !ref.current.player) {\n        return;\n      }\n      ref.current.player.invoker('seek', v);\n      dispatch({ type: 'update', payload: { currentTime: v } });\n    },\n    [ref, dispatch],\n  );\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('durationchange', onDurationChange);\n    player.addEventListener('timeupdate', onTimeUpdate);\n    player.addEventListener('progress', onProgress);\n    return () => {\n      player.removeEventListener('durationchange', onDurationChange);\n      player.removeEventListener('timeupdate', onTimeUpdate);\n      player.removeEventListener('progress', onProgress);\n    };\n  }, [ref, onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onVolumeChange = React.useCallback((e) => dispatch({ type: 'update', payload: e }), [dispatch]);\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current || !ref.current.player) {\n      return;\n    }\n    const { muted } = ref.current;\n    ref.current.player.invoker('setMuted', !muted);\n    if (0 === ref.current.volume && muted) {\n      ref.current.player.invoker('setVolume', 1.0);\n    }\n  }, [ref]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (ref.current && ref.current.player) {\n        ref.current.player.invoker('setVolume', v);\n      }\n    },\n    [ref],\n  );\n\n  React.useEffect(() => {\n    if (!ref.current || !ref.current.player) {\n      return () => {};\n    }\n    const { player } = ref.current;\n    player.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      player.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [ref, onVolumeChange]);\n\n  return { onMutedClick, changeVolume };\n};\n","import ReactjsPlayer from './ReactjsPlayer';\nimport GrindPlayer from './GrindPlayer';\nimport PlayerContext from './PlayerContext';\nimport PlayerSkin from './PlayerSkin';\n\nReactjsPlayer.GrindPlayer = GrindPlayer;\nReactjsPlayer.PlayerContext = PlayerContext;\nReactjsPlayer.PlayerSkin = PlayerSkin;\n\nexport default ReactjsPlayer;\n"],"sourceRoot":""}