{"version":3,"sources":["App.js","../../dist/GrindPlayer.swf","../../dist/flashlsOSMF.swf","PlaybackRate.js","FouceLive.js","blank16x9.png","reportWebVitals.js","index.js","../../src/Flvjs/useFlvjs.js","../../src/Flvjs/index.js","../../src/Hlsjs/useHlsjs.js","../../src/Hlsjs/index.js","../../src/Native/index.js","../../src/Native/useNative.js","../../src/SRSWebRTC/SRSPlayer.js","../../src/SRSWebRTC/index.js","../../src/SRSWebRTC/useSRSWebRTC.js","../../src/PlayerContext/index.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/PlayerSkin/PreventedTip/index.js","../../src/PlayerSkin/VideoMask/index.js","../../src/PlayerSkin/PlayState/index.js","../../src/PlayerSkin/TopState/index.js","../../src/PlayerSkin/Controls/bg.png","../../src/PlayerSkin/Controls/index.js","../../src/PlayerSkin/ControlBar/index.js","../../src/PlayerSkin/TimeSlider/index.js","../../src/PlayerSkin/Controls/PlayButton.js","../../src/PlayerSkin/Volume/index.js","../../src/PlayerSkin/PlayTime/index.js","../../src/PlayerSkin/Controls/PlayRate.js","../../src/PlayerSkin/Controls/FullscreenButton.js","../../src/PlayerSkin/Controls/PictureInPicture.js","../../src/PlayerSkin/usePlayerSkin.js","../../src/PlayerSkin/index.js","../../src/PlayerSkin/useAutoHide.js","../../src/PlayerSkinWapper/index.js","../../src/hooks/usePlayerReducer.js","../../src/ReactjsPlayer/useReactjsPlayer.js","../../src/hooks/useVideoState.js","../../src/hooks/useTime.js","../../src/hooks/useVolume.js","../../src/hooks/usePlaybackRate.js","../../src/hooks/usePiP.js","../../src/hooks/useFullscreen.js","../../src/ReactjsPlayer/index.js","../../src/GrindPlayer/GrindPlayer.js","../../src/GrindPlayer/useGrindPlayer.js","../../src/GrindPlayer/index.js","../../src/GrindPlayer/useState.js","../../src/GrindPlayer/useTime.js","../../src/GrindPlayer/useVolume.js","../../src/index.js"],"names":["GrindPlayer","ReactjsPlayer","delay","timeout","Promise","resolve","global","setTimeout","App","React","memo","useState","list","setList","info","setInfo","src","setSrc","videoProps","setVideoProps","ref","useRef","Form","useForm","form","onChange","useCallback","v","item","find","it","key","setFieldsValue","onSubmit","values","a","current","type","useEffect","ua","UAParser","navigator","userAgent","device","playsInline","supportedList","kernel","live","Hls","flvjs","isSupported","getFeatureList","networkStreamIO","push","config","isLive","enableStashBuffer","autoCleanupSourceBuffer","stashInitialSize","fixAudioTimestampGap","os","name","getSupportedList","onVideoEvent","e","log","console","length","className","layout","onFinish","initialValues","Item","map","Option","value","htmlType","blank16x9","alt","onCanPlay","onDurationChange","onPause","onPlay","onPlaying","onEnded","onSeeked","onSeeking","onCanPlayThrough","onEmptied","onEncrypted","onError","onLoadedData","onLoadedMetadata","onLoadStart","onRateChange","onStalled","onSuspend","onVolumeChange","onWaiting","onAbort","grindPlayerSwf","flashlsOSMFSwf","defaultActiveKey","TabPane","tab","title","column","size","label","href","PlaybackRate","playbackRate","useContext","PlayerContext","changeRate","rate","FouceLive","getVideoElement","changeCurrentTime","id","setInterval","el","paused","buffered","end","currentTime","clearInterval","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","getFlvjs","script","debug","Flvjs","props","onMsgChange","player","setPlayer","getVideo","configRef","onMsgChangeRef","play","url","cleanup","errMsg","destroyPlayer","detail","useFlvjs","PropTypes","isRequired","p","n","getHls","Hlsjs","enableWorker","currentSrc","details","useHlsjs","Native","loaded","onUnload","msg","useNative","SRSPlayer","matched","this","protocol","pathname","pc","RTCPeerConnection","iceTransportPolicy","bundlePolicy","rtcpMuxPolicy","iceCandidatePoolSize","sdpSemantics","tcpCandidatePolicy","IceTransportsType","direction","event","sdp","offer","RTCSessionDescription","track","sendRequest","method","body","JSON","api","streamurl","clientip","tid","Number","parseInt","Date","getTime","Math","fetch","mode","headers","response","Error","text","MediaStream","SRSWebRTC","stream","useSRSWebRTC","styleInject","css","insertAt","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","PreventedTip","prevented","styles","VideoMask","showControls","opacity","background","onMouseMove","onClick","PlayState","loading","ended","seeking","waiting","kernelMsg","onPlayClick","LoadingOutlined","PlayCircleOutlined","TopState","object","Controls","hiding","dispatch","children","onMouseEnter","payload","controlsHovering","onMouseLeave","backgroundImage","transform","ControlBar","extra","getValue","rect","duration","w","getEventXCoordinate","MouseTooltip","tooltip","translateX","getMouseTranslateX","numeral","TimeSlider","sliding","sliderRef","onMouseDown","react","left","width","update","onMouseUp","onSliderMouseOver","onSliderMouseMove","onResize","bufferedScaleX","i","getBufferedEnd","getBufferedScaleX","trackTranslateX","getTrackTranslateX","role","tabIndex","onKeyDown","onMouseOver","onFocus","onTouchStart","PlayButton","onPauseClick","CaretRightOutlined","PauseOutlined","Volume","muted","volume","changeVolume","onMutedClick","Icon","component","MutedSvg","UnmutedSvg","Slider","max","PlayTime","PlayRate","changePlaybackRate","visible","show","rateMenuVisible","hide","onMenuClick","parseFloat","Dropdown","overlay","Menu","selectedKeys","placement","trigger","FullscreenButton","fullscreen","requestFullscreen","exitFullscreen","FullscreenExitOutlined","FullscreenOutlined","PictureInPicture","pictureInPictureEnabled","pip","exitPictureInPicture","requestPictureInPicture","initialState","reducer","state","action","PlayerSkin","usePlayerSkin","animationFrameCallback","timestamp","startAutoHide","stopAutoHide","useAutoHide","PlayerSkinWapper","enabled","onKernelError","videoRef","playerRef","clearUpdateTimeout","timeoutCallback","updateState","sync","usePlayerReducer","getPlayerElement","promise","onDocumentClick","useVideoState","onTimeUpdate","onProgress","useTime","useVolume","usePlaybackRate","onEnterPictureInPicture","onLeavePictureInPicture","usePiP","videoEl","fullscreenElement","useFullscreen","controls","playerProps","useReactjsPlayer","kernelProps","emitter","index","EventEmitter","data","args","token","addListener","fn","eventMap","filter","onJSBridge","playerId","javascriptCallbackFunction","useGrindPlayer","stateProps","timeProps","volumeProps","ReactSWF","height","wmode","allowFullScreen","allowScriptAccess","bgcolor","flashVars","autoPlay","bufferTime","streamType","plugin_hls","string"],"mappings":"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","file":"static/js/main.37432f06.chunk.js","sourcesContent":["import React from 'react';\nimport UAParser from 'ua-parser-js';\nimport Hls from 'hls.js';\nimport flvjs from 'flv.js';\nimport { Form, Select, Input, Button, Tabs, Descriptions } from 'antd';\nimport { GithubOutlined } from '@ant-design/icons';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport ReactjsPlayer from 'reactjs-player';\nimport grindPlayerSwf from 'reactjs-player/dist/GrindPlayer.swf';\nimport flashlsOSMFSwf from 'reactjs-player/dist/flashlsOSMF.swf';\nimport PlaybackRate from './PlaybackRate';\nimport FouceLive from './FouceLive';\nimport blank16x9 from './blank16x9.png';\nimport './App.css';\n\nconst GrindPlayer = ReactjsPlayer.GrindPlayer;\n// const ReactPlayerContext = ReactjsPlayer.ReactPlayerContext;\n\nconst delay = (timeout) =>\n  new Promise((resolve) => {\n    global.setTimeout(resolve, timeout);\n  });\n\nconst getSupportedList = (ua) => {\n  if (ua.device.type) {\n    // 非 PC 浏览器\n    return [\n      {\n        key: 'native',\n        kernel: 'native',\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n      {\n        key: 'srswebrtc',\n        kernel: 'srswebrtc',\n        live: true,\n        src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n        type: '',\n      },\n    ];\n  }\n\n  global.Hls = Hls;\n  global.flvjs = flvjs;\n\n  const list = [];\n  if (flvjs.isSupported()) {\n    const featureList = flvjs.getFeatureList();\n    if (featureList.networkStreamIO) {\n      list.push({\n        key: 'flvjs',\n        kernel: 'flvjs',\n        live: true,\n        src: 'http://192.168.0.225/flv_srs/quick/ClpheNxgRBy_XDhXXDq_CQ.flv',\n        type: 'video/x-flv',\n        config: {\n          isLive: true,\n          enableStashBuffer: false,\n          autoCleanupSourceBuffer: true,\n          stashInitialSize: 16 * 1024,\n          fixAudioTimestampGap: false,\n        },\n      });\n    }\n  }\n  if (Hls.isSupported()) {\n    list.push({\n      key: 'hlsjs',\n      kernel: 'hlsjs',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    });\n  }\n\n  // mac OS 没有测试环境，暂且认为没有问题\n  if ('Mac OS' === ua.os.name) {\n    list.push(\n      {\n        key: 'native',\n        kernel: 'native',\n        live: false,\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n    );\n  }\n  list.push(\n    { key: 'rtmp', kernel: 'flash', live: true, src: 'rtmp://livetv.dhtv.cn:1935/live/news', type: 'video/rtmp' },\n    {\n      key: 'flashls',\n      kernel: 'flash',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    },\n    {\n      key: 'native',\n      kernel: 'native',\n      live: false,\n      src: 'https://www.w3schools.com/html/mov_bbb.mp4',\n      type: 'video/mp4',\n    },\n    {\n      key: 'srswebrtc',\n      kernel: 'srswebrtc',\n      live: true,\n      src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n      type: '',\n    },\n  );\n  return list;\n};\n\nconst App = React.memo(() => {\n  const [list, setList] = React.useState(null);\n  const [info, setInfo] = React.useState(null);\n  const [src, setSrc] = React.useState('');\n  const [videoProps, setVideoProps] = React.useState(null);\n  const ref = React.useRef(list);\n\n  const [form] = Form.useForm();\n\n  const onChange = React.useCallback(\n    (v) => {\n      const item = list.find((it) => it.key === v);\n      form.setFieldsValue({ src: item.src });\n    },\n    [form, list],\n  );\n\n  const onSubmit = React.useCallback(async (values) => {\n    setSrc('');\n    await delay(50);\n    const item = ref.current.find((it) => it.key === values.type);\n    setInfo(item);\n    setSrc(values.src);\n  }, []);\n\n  React.useEffect(() => {\n    ref.current = list;\n  }, [list]);\n\n  React.useEffect(() => {\n    const ua = UAParser(global.navigator.userAgent);\n    if (ua.device.type) {\n      setVideoProps({\n        playsInline: true,\n        'webkit-playsinline': 'true',\n        'x5-video-player-type': 'h5-page',\n        'x5-video-orientation': 'landscape|portrait',\n      });\n    }\n    const supportedList = getSupportedList(ua);\n    setList(supportedList);\n    ref.current = supportedList;\n    setInfo(supportedList[0]);\n    // debugger;\n    onSubmit({ type: supportedList[0].key, src: supportedList[0].src });\n  }, [onSubmit]);\n\n  const onVideoEvent = React.useCallback((e) => {\n    const log = console.log;\n    log(`e.type: ${e.type}`);\n    // if ('durationchange' === e.type) {\n    //   log(`durationchange: ${e.target.duration}`);\n    // }\n  }, []);\n\n  if (!list || 0 === list.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"container\">\n      <header className=\"header\">\n        <Form\n          className=\"form\"\n          layout=\"inline\"\n          form={form}\n          onFinish={onSubmit}\n          initialValues={{\n            type: list[0].key,\n            src: list[0].src,\n          }}\n        >\n          <Form.Item className=\"type\" name=\"type\">\n            <Select onChange={onChange}>\n              {list.map((it) => (\n                <Select.Option key={it.key} value={it.key}>\n                  {it.key}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          <Form.Item className=\"src\" name=\"src\">\n            <Input />\n          </Form.Item>\n          <Form.Item className=\"submit\">\n            <Button type=\"primary\" htmlType=\"submit\">\n              播放\n            </Button>\n          </Form.Item>\n        </Form>\n      </header>\n      <main className=\"main\">\n        <div className=\"player\">\n          <img className=\"blankImg\" src={blank16x9} alt=\"\" />\n          {'flash' !== info.kernel && (\n            <ReactjsPlayer\n              live={info.live}\n              kernel={info.kernel}\n              type={info.type}\n              config={info.config || {}}\n              src={src}\n              videoProps={{\n                ...videoProps,\n                onCanPlay: onVideoEvent,\n                onDurationChange: onVideoEvent,\n                onPause: onVideoEvent,\n                onPlay: onVideoEvent,\n                onPlaying: onVideoEvent,\n                onEnded: onVideoEvent,\n                onSeeked: onVideoEvent,\n                onSeeking: onVideoEvent,\n                onCanPlayThrough: onVideoEvent,\n                onEmptied: onVideoEvent,\n                onEncrypted: onVideoEvent,\n                onError: onVideoEvent,\n                onLoadedData: onVideoEvent,\n                onLoadedMetadata: onVideoEvent,\n                onLoadStart: onVideoEvent,\n                onRateChange: onVideoEvent,\n                onStalled: onVideoEvent,\n                onSuspend: onVideoEvent,\n                onVolumeChange: onVideoEvent,\n                onWaiting: onVideoEvent,\n                onAbort: onVideoEvent,\n              }}\n            >\n              <PlaybackRate></PlaybackRate>\n              {'flvjs' === info.kernel && info.live && <FouceLive></FouceLive>}\n            </ReactjsPlayer>\n          )}\n          {'flash' === info.kernel && (\n            <GrindPlayer {...info} src={src} grindPlayerSwf={grindPlayerSwf} flashlsOSMFSwf={flashlsOSMFSwf} />\n          )}\n        </div>\n        <aside className=\"aside\">\n          <div className=\"asideContainer\">\n            <Tabs className=\"asideTabs\" defaultActiveKey=\"info\">\n              <Tabs.TabPane tab=\"信息\" key=\"info\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">\n                    <Descriptions title=\"参数\" column={1} size=\"small\">\n                      <Descriptions.Item label=\"kernel\">{info.kernel}</Descriptions.Item>\n                      <Descriptions.Item label=\"live\">{info.live ? '是' : '否'}</Descriptions.Item>\n                      <Descriptions.Item label=\"src\">\n                        <span className=\"srcValue\">{src}</span>\n                      </Descriptions.Item>\n                      <Descriptions.Item label=\"type\">{info.type}</Descriptions.Item>\n                    </Descriptions>\n                  </div>\n                </Scrollbars>\n              </Tabs.TabPane>\n              <Tabs.TabPane tab=\"接口测试\" key=\"interface\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">暂时删除接口测试功能</div>\n                </Scrollbars>\n              </Tabs.TabPane>\n            </Tabs>\n            <div className=\"asideFooter\">\n              <a href=\"https://github.com/goblin-laboratory/reactjs-player\">\n                <GithubOutlined />\n                &nbsp; Github\n              </a>\n            </div>\n          </div>\n        </aside>\n      </main>\n    </div>\n  );\n});\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/GrindPlayer.2a08c30c.swf\";","export default __webpack_public_path__ + \"static/media/flashlsOSMF.54c6b059.swf\";","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\nimport log from 'loglevel';\n\nconst PlaybackRate = () => {\n  const { playbackRate } = React.useContext(ReactjsPlayer.PlayerContext);\n  const changeRate = React.useCallback((rate) => {\n    log.info(`Current playback rate is ${rate}.`);\n  }, []);\n\n  React.useEffect(() => {\n    changeRate(playbackRate);\n  }, [playbackRate, changeRate]);\n\n  return null;\n};\n\nexport default React.memo(PlaybackRate, () => true);\n","import React from 'react';\nimport ReactjsPlayer from 'reactjs-player';\n\nconst FouceLive = () => {\n  const { getVideoElement, changeCurrentTime } = React.useContext(ReactjsPlayer.PlayerContext);\n  React.useEffect(() => {\n    const id = global.setInterval(() => {\n      const el = getVideoElement();\n      if (!el || el.paused || !el.buffered) {\n        return;\n      }\n      const end = el.buffered.end(el.buffered.length - 1);\n      if (2 < end - el.currentTime) {\n        changeCurrentTime(end - 0.5);\n      }\n    }, 10 * 1000);\n    return () => {\n      global.clearInterval(id);\n    };\n  }, [getVideoElement, changeCurrentTime]);\n\n  return null;\n};\n\nexport default React.memo(FouceLive, () => true);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMi0yOFQxODoyNDozNCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDljYTEwNTMtNTU4Ny1lYjQ4LWEyMzEtZWY0MTUzNjRjYmY2IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Y2QyYjVhMTMtN2E2NC1lZDQ3LWE2NDctZWQwNDExMDgxMTFmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2NkZWQyZmItOWFmMi1lODQ2LWE5MGYtNTdhOGUyYzk3OGY2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozY2RlZDJmYi05YWYyLWU4NDYtYTkwZi01N2E4ZTJjOTc4ZjYiIHN0RXZ0OndoZW49IjIwMTgtMDItMjhUMTg6MjQ6MzQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5Y2ExMDUzLTU1ODctZWI0OC1hMjMxLWVmNDE1MzY0Y2JmNiIgc3RFdnQ6d2hlbj0iMjAxOC0wOC0yMFQxNDozODozOSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7p7qgTAAAAFklEQVQokWP4//8/AyWYIs2jBgwbAwCgra5gnLDJrQAAAABJRU5ErkJggg==\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\n\nconst getFlvjs = (src) =>\n  new Promise((resolve) => {\n    if (global.flvjs) {\n      resolve(global.flvjs);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.flvjs);\n    script.onerror = () => resolve(global.flvjs);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nconst destroyPlayer = (player) => {\n  if (!player) {\n    return;\n  }\n  try {\n    player.pause();\n  } catch (errMsg) {}\n  try {\n    player.unload();\n  } catch (errMsg) {}\n  try {\n    player.detachMediaElement();\n  } catch (errMsg) {}\n  try {\n    player.destroy();\n  } catch (errMsg) {}\n};\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const [player, setPlayer] = React.useState(null);\n\n  const getVideo = React.useRef(getVideoElement);\n  const ref = React.useRef(src);\n  const configRef = React.useRef(config);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = src;\n    configRef.current = config;\n    return () => {\n      ref.current = '';\n    };\n  }, [src, config]);\n\n  React.useEffect(() => {\n    const play = async () => {\n      await getFlvjs('https://unpkg.com/flv.js/dist/flv.min.js');\n      if (!global.flvjs || ref.current !== src) {\n        debug('useFlvjs: 加载 flv.js 失败或者 src 已经变更');\n        return;\n      }\n      setPlayer(global.flvjs.createPlayer({ isLive: true, type: 'flv', url: src }, configRef.current));\n    };\n    setPlayer(null);\n    onMsgChangeRef.current(null);\n    if (src) {\n      play();\n    }\n  }, [src]);\n\n  React.useEffect(() => {\n    const cleanup = () => destroyPlayer(player);\n    if (!player) {\n      return cleanup;\n    }\n    const el = getVideo.current();\n    if (!el) {\n      return cleanup;\n    }\n    player.attachMediaElement(el);\n    player.load();\n    // player.play();\n    player.on(global.flvjs.Events.ERROR, (type, detail) => {\n      if (onMsgChangeRef && onMsgChangeRef.current) {\n        onMsgChangeRef.current({ type, detail });\n      }\n    });\n    return cleanup;\n  }, [player]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useFlvjs from './useFlvjs';\n\nconst Flvjs = (props) => {\n  // console.log(`Flvjs`);\n  useFlvjs(props);\n  return null;\n};\n\nFlvjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nFlvjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Flvjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nconst getHls = (src) =>\n  new Promise((resolve) => {\n    if (global.Hls) {\n      resolve(global.Hls);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.Hls);\n    script.onerror = () => resolve(global.Hls);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nconst destroyPlayer = (player) => {\n  if (player) {\n    try {\n      player.destroy();\n    } catch (errMsg) {}\n  }\n};\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const [player, setPlayer] = React.useState(null);\n  const getVideo = React.useRef(getVideoElement);\n  const ref = React.useRef('');\n  const configRef = React.useRef(null);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = src;\n    configRef.current = config;\n    return () => {\n      ref.current = '';\n    };\n  }, [src, config]);\n\n  React.useEffect(() => {\n    const play = async () => {\n      await getHls('https://unpkg.com/hls.js/dist/hls.min.js');\n      if (!global.Hls || ref.current !== src) {\n        debug('useHlsjs: 加载 hls.js 失败或者 src 已经变更');\n        return;\n      }\n      setPlayer(new global.Hls({ enableWorker: false, ...configRef.current }));\n    };\n\n    setPlayer(null);\n    onMsgChangeRef.current(null);\n    if (src) {\n      play();\n    }\n  }, [src]);\n\n  React.useEffect(() => {\n    const cleanup = () => destroyPlayer(player);\n    if (!player || !ref.current) {\n      return cleanup;\n    }\n    const currentSrc = ref.current;\n    const el = getVideo.current();\n    if (!el) {\n      return cleanup;\n    }\n    player.attachMedia(el);\n    player.once(global.Hls.Events.MEDIA_ATTACHED, () => {\n      if (currentSrc === ref.current) {\n        player.loadSource(ref.current);\n      }\n    });\n    // player.once(global.Hls.Events.MANIFEST_PARSED, () => {\n    //   if (currentSrc === ref.current) {\n    //     el.play();\n    //   }\n    // });\n    player.on(global.Hls.Events.ERROR, (e, info) => {\n      if (onMsgChangeRef && onMsgChangeRef.current && info && info.fatal) {\n        onMsgChangeRef.current({ type: info.type, detail: info.details });\n      }\n    });\n    return cleanup;\n  }, [player]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useHlsjs from './useHlsjs';\n\nconst Hlsjs = (props) => {\n  useHlsjs(props);\n  return null;\n};\n\nHlsjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nHlsjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Hlsjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useNative from './useNative';\n\nconst Native = (props) => {\n  useNative(props);\n  return null;\n};\n\nNative.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nNative.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(\n  Native,\n  (p, n) => p.getVideoElement === n.getVideoElement && p.src === n.src && p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nexport default ({ getVideoElement, src, onMsgChange }) => {\n  const ref = React.useRef({ getVideoElement, src: '', onMsgChange, loaded: false });\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    ref.current.getVideoElement = getVideoElement;\n  }, [src, getVideoElement]);\n\n  React.useEffect(() => {\n    // ref.current.onMsgChange(null);\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = src;\n    // el.play().catch(() => {});\n    el.load();\n  }, [src]);\n\n  // 页面切换时强制停止播放\n  const onUnload = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = '';\n    try {\n      el.load();\n    } catch (errMsg) {}\n  }, []);\n\n  const onError = React.useCallback((e) => {\n    const msg = { type: 'Error', detail: 'Unknown exception' };\n    if (e.target && e.target.error && e.target.error.code) {\n      msg.detail = `Code ${e.target.error.code}`;\n    }\n    ref.current.onMsgChange(msg);\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('beforeunload', onUnload);\n    global.addEventListener('pagehide', onUnload);\n    global.addEventListener('unload', onUnload);\n    return () => {\n      onUnload({ type: 'useEffect' });\n    };\n  }, [onUnload]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('error', onError);\n\n    return () => {\n      el.removeEventListener('error', onError);\n    };\n  }, [onError]);\n  return null;\n};\n","export default class SRSPlayer {\n  static isSupported() {\n    if (!MediaStream || !RTCPeerConnection || !RTCSessionDescription) {\n      return false;\n    }\n    if (!RTCPeerConnection.prototype.addTransceiver) {\n      return false;\n    }\n    return true;\n  }\n\n  constructor(url, config) {\n    // webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY\n    const matched = url.match(/^webrtc:\\/\\/([^/]+)(\\/.*)?$/);\n    if (!matched) {\n      return null;\n    }\n    this.url = url;\n    const protocol = 'string' === typeof config.protocol ? config.protocol : global.location.protocol;\n    const pathname = 'string' === typeof config.pathname ? config.pathname : '/rtc/v1/play/';\n    this.api = `${protocol}//${matched[1]}${pathname}`;\n    this.stream = new MediaStream();\n    this.trackList = [];\n    return this;\n  }\n\n  subscribe() {\n    if (!this.url) {\n      return null;\n    }\n    this.unsubscribe();\n    this.createRTCPeerConnection();\n    this.connectPeerConnection();\n    return this.stream;\n  }\n\n  unsubscribe() {\n    if (!this.pc) {\n      return;\n    }\n    this.closeRTCPeerConnection();\n  }\n\n  destroy() {\n    this.unsubscribe();\n\n    delete this.url;\n    delete this.api;\n    delete this.stream;\n    delete this.trackList;\n  }\n\n  createRTCPeerConnection() {\n    const pc = new RTCPeerConnection({\n      iceTransportPolicy: 'all',\n      bundlePolicy: 'max-bundle',\n      rtcpMuxPolicy: 'require',\n      iceCandidatePoolSize: '0',\n      sdpSemantics: 'unified-plan',\n      tcpCandidatePolicy: 'disable',\n      IceTransportsType: 'nohost',\n    });\n    // const pc = new RTCPeerConnection(null);\n    pc.addTransceiver('audio', { direction: 'recvonly' });\n    pc.addTransceiver('video', { direction: 'recvonly' });\n\n    // pc.onnegotiationneeded = (event) => console.log(event.type);\n    // pc.onicecandidate = (event) => console.log(event.type);\n    // pc.onicecandidateerror = (event) => console.log(event.type);\n    // pc.onsignalingstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.onicegatheringstatechange = (event) => console.log(event.type);\n\n    pc.ontrack = (event) => {\n      // console.log(event.type);\n      this.stream.addTrack(event.track);\n      this.trackList.push(event.track);\n    };\n\n    // pc.onconnectionstatechange = (event) => {\n    //   console.log(`${event.type}: ${event.target.connectionState}`);\n    //   // if ('disconnected' === event.target.connectionState) {\n    //   //   onDisconnect();\n    //   // }\n    // };\n\n    this.pc = pc;\n    return this.pc;\n  }\n\n  connectPeerConnection() {\n    const { pc } = this;\n    return pc\n      .createOffer()\n      .then((offer) => pc.setLocalDescription(offer).then(() => offer))\n      .then((offer) => this.getSessionInfo({ sdp: offer.sdp }))\n      .then((sdp) => pc.setRemoteDescription(new RTCSessionDescription({ type: 'answer', sdp })));\n  }\n\n  closeRTCPeerConnection() {\n    if (this.trackList) {\n      this.trackList.forEach((track) => {\n        try {\n          this.stream.removeTrack(track);\n        } catch (errMsg) {}\n        try {\n          track.stop();\n        } catch (errMsg) {}\n      });\n      this.trackList = [];\n    }\n\n    if (!this.pc) {\n      return;\n    }\n    const { pc } = this;\n    delete this.pc;\n    pc.ontrack = () => {};\n    pc.onconnectionstatechange = () => {};\n\n    try {\n      pc.getSenders().forEach((it) => pc.removeTrack(it));\n    } catch (errMsg) {}\n    try {\n      pc.close();\n    } catch (errMsg) {}\n  }\n\n  getSessionInfo({ sdp }) {\n    return this.sendRequest(this.api, {\n      method: 'POST',\n      body: JSON.stringify({\n        api: this.api,\n        sdp,\n        streamurl: this.url,\n        clientip: null,\n        tid: Number(parseInt(new Date().getTime() * Math.random() * 100, 10))\n          .toString(16)\n          .substr(0, 7),\n      }),\n    }).then((info) => {\n      if (!info.sdp) {\n        return Promise.reject(info);\n      }\n      return info.sdp;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  sendRequest(url, opts) {\n    return fetch(url, {\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n      ...opts,\n    })\n      .then((response) => {\n        if (200 <= response.status && 300 > response.status) {\n          return response;\n        }\n        const errMsg = new Error(response.statusText);\n        errMsg.response = response;\n        return Promise.reject(errMsg);\n      })\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          return text ? JSON.parse(text) : {};\n        } catch (errMsg) {\n          return Promise.reject(errMsg);\n        }\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useSRSWebRTC from './useSRSWebRTC';\n\nconst SRSWebRTC = (props) => {\n  useSRSWebRTC(props);\n  return null;\n};\n\nSRSWebRTC.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nSRSWebRTC.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  SRSWebRTC,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport SRSPlayer from './SRSPlayer';\n// import SrsRtcPlayerAsync from './SrsRtcPlayerAsync';\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef(null);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = config;\n  }, [config]);\n\n  React.useEffect(() => {\n    onMsgChangeRef.current(null);\n    const el = getVideoElement();\n    if (!src || !el) {\n      return () => {};\n    }\n    const player = new SRSPlayer(src, { ...ref.current });\n    const stream = player.subscribe();\n    el.pause();\n    el.srcObject = stream;\n    el.load();\n    return () => {\n      el.srcObject = null;\n      player.destroy();\n    };\n  }, [src, getVideoElement]);\n\n  return null;\n};\n","import React from 'react';\n\nconst PlayerContext = React.createContext([{}, () => {}]);\n\nexport default PlayerContext;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst PreventedTip = ({ src, prevented }) => {\n  if (!src || !prevented) {\n    return null;\n  }\n  return <div className={styles.preventedTip}>视频播放被阻止</div>;\n};\n\nPreventedTip.propTypes = {\n  src: PropTypes.string,\n  prevented: PropTypes.bool.isRequired,\n};\n\nPreventedTip.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(PreventedTip, (p, n) => p.src === n.src && p.prevented === n.prevented);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst VideoMask = ({ src, showControls }) => {\n  return (\n    <button\n      type=\"button\"\n      className={styles.videoMask}\n      style={src ? { opacity: 0, background: 'transparent' } : {}}\n      onMouseMove={showControls}\n      onClick={showControls}\n    />\n  );\n};\n\nVideoMask.propTypes = {\n  src: PropTypes.string,\n  showControls: PropTypes.func.isRequired,\n};\n\nVideoMask.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(VideoMask, (p, n) => p.src === n.src && p.showControls === n.showControls);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined, PlayCircleOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst PlayState = ({ src, prevented, loading, paused, ended, seeking, waiting, kernelMsg, onPlayClick }) => {\n  if (!src || loading || kernelMsg) {\n    return null;\n  }\n\n  if (waiting || seeking) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  if (prevented || paused || ended) {\n    return (\n      <button type=\"button\" className={styles.play} onClick={onPlayClick}>\n        <PlayCircleOutlined />\n      </button>\n    );\n  }\n  return null;\n};\n\nPlayState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  kernelMsg: PropTypes.object,\n  onPlayClick: PropTypes.func.isRequired,\n};\n\nPlayState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.kernelMsg === n.kernelMsg &&\n    p.onPlayClick === n.onPlayClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst TopState = ({ src, loading, kernelMsg }) => {\n  if (!src) {\n    return null;\n  }\n\n  if (kernelMsg) {\n    return (\n      <div className={styles.kernelMsg}>\n        {kernelMsg.type}: {kernelMsg.detail}\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  return null;\n};\n\nTopState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  // duration: PropTypes.number.isRequired,\n  // currentTime: PropTypes.number.isRequired,\n  kernelMsg: PropTypes.object,\n};\n\nTopState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  TopState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.kernelMsg === n.kernelMsg,\n);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\nimport bgImg from './bg.png';\n\nconst Controls = ({ hiding, dispatch, children }) => {\n  const onMouseEnter = React.useCallback(() => {\n    if (global.matchMedia) {\n      const matched = global.matchMedia('(hover: none), (pointer: coarse)');\n      if (matched && matched.matches) {\n        return;\n      }\n    }\n    dispatch({ type: 'update', payload: { controlsHovering: true } });\n  }, [dispatch]);\n\n  const onMouseLeave = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { controlsHovering: false } });\n  }, [dispatch]);\n\n  return (\n    <div\n      className={styles.controls}\n      style={{ backgroundImage: `url(${bgImg})`, transform: hiding ? 'translate(0, 48px)' : 'translate(0, 0)' }}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n    </div>\n  );\n};\n\nControls.propTypes = {\n  hiding: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nControls.defaultProps = {\n  // buffered: null,\n};\n\nexport default React.memo(\n  Controls,\n  (p, n) => p.hiding === n.hiding && p.dispatch === n.dispatch && p.children === n.children,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst ControlBar = ({ children, extra }) => {\n  return (\n    <div className={styles.controlBar}>\n      <div className={styles.flexItem}>{children}</div>\n      {extra}\n    </div>\n  );\n};\n\nControlBar.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  extra: PropTypes.node.isRequired,\n};\n\n// ControlBar.defaultProps = {\n//   // buffered: null,\n// };\n\nexport default React.memo(ControlBar, (p, n) => p.children === n.children && p.extra === n.extra);\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\nimport styles from './index.module.less';\n\nconst getBufferedEnd = (currentTime, buffered) => {\n  if (!buffered) {\n    return 0;\n  }\n  for (let i = buffered.length - 1; 0 <= i; i -= 1) {\n    const end = buffered.end(i);\n    if (currentTime <= end && buffered.start(i) <= currentTime) {\n      return end;\n    }\n  }\n  return 0;\n};\n\nconst getEventXCoordinate = (e) => {\n  if (e.changedTouches && 1 <= e.changedTouches.length) {\n    return e.changedTouches[0].pageX;\n  }\n  return e.clientX || 0;\n};\n\nconst getValue = (e, rect, duration) => {\n  const w = getEventXCoordinate(e) - rect.left;\n  if (0 >= w) {\n    return 0;\n  }\n  if (w >= rect.width) {\n    return duration;\n  }\n  return Math.round((duration * w) / rect.width);\n};\n\nconst getBufferedScaleX = ({ buffered, currentTime, sliding, duration }) => {\n  if (0 >= duration || sliding) {\n    return 0;\n  }\n  const e = getBufferedEnd(currentTime, buffered);\n  return (e / duration).toFixed(3);\n};\n\nconst getTrackTranslateX = ({ duration, currentTime }) => {\n  if (0 === duration) {\n    return -100;\n  }\n  return ((100 * currentTime) / duration - 100).toFixed(1);\n};\n\nconst getMouseTranslateX = ({ duration, tooltip }) => {\n  if (0 >= duration) {\n    return 0;\n  }\n  return ((100 * tooltip) / duration).toFixed(1);\n};\n\nconst MouseTooltip = React.memo(({ duration, tooltip }) => {\n  const translateX = getMouseTranslateX({ duration, tooltip });\n  return (\n    <div className={styles.tooltip} style={{ transform: `translateX(${translateX}%)` }}>\n      <div className={styles.tip}>{numeral(tooltip).format('00:00:00')}</div>\n    </div>\n  );\n});\n\nMouseTooltip.propTypes = {\n  duration: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n};\n\nconst TimeSlider = React.memo(({ currentTime, duration, buffered, onChange, sliding, value, tooltip, dispatch }) => {\n  const ref = React.useRef({});\n  const sliderRef = React.useRef(null);\n\n  const onClick = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n\n      const rect = e.currentTarget.getBoundingClientRect();\n      const v = getValue(e, rect, duration);\n      onChange(v);\n    },\n    [onChange, duration, dispatch],\n  );\n\n  const onMouseDown = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      const react = sliderRef.current.getBoundingClientRect();\n      ref.current.react = { left: react.left, width: react.width };\n      dispatch({ type: 'update', payload: { sliding: true } });\n    },\n    [dispatch],\n  );\n\n  const update = React.useCallback(() => {\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const onMouseUp = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n      if (ref.current.react) {\n        const v = getValue(e, ref.current.react, duration);\n        ref.current.payload = { value: v };\n        update();\n        onChange(v);\n      }\n    },\n    [onChange, duration, update, dispatch],\n  );\n\n  const onMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.value = v;\n      } else {\n        ref.current.payload = { value: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  React.useEffect(() => {\n    if (sliding) {\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchcancel', onMouseUp);\n      document.addEventListener('touchend', onMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', onMouseMove);\n        document.removeEventListener('mouseup', onMouseUp);\n\n        document.removeEventListener('touchmove', onMouseMove);\n        document.removeEventListener('touchcancel', onMouseUp);\n        document.removeEventListener('touchend', onMouseUp);\n      };\n    }\n    return () => {};\n  }, [sliding, onMouseMove, onMouseUp]);\n\n  const onSliderMouseOver = React.useCallback((e) => {\n    e.preventDefault();\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  const onSliderMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.tooltip = v;\n      } else {\n        ref.current.payload = { tooltip: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  const onResize = React.useCallback((e) => {\n    e.preventDefault();\n    if (!sliderRef || !sliderRef.current) {\n      return;\n    }\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('resize', onResize);\n    return () => {\n      global.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = {};\n    };\n  }, []);\n\n  const bufferedScaleX = getBufferedScaleX({ buffered, currentTime, sliding, duration });\n  const trackTranslateX = getTrackTranslateX({ duration, currentTime: sliding ? value : currentTime });\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={sliding ? styles.slidingSlider : styles.slider}\n      ref={sliderRef}\n      onClick={onClick}\n      onKeyDown={() => {}}\n      onMouseOver={onSliderMouseOver}\n      onMouseMove={onSliderMouseMove}\n      onFocus={() => {}}\n    >\n      <button type=\"button\" className={styles.sliderButton} onTouchStart={onMouseDown}>\n        <span className={styles.slidingTip} style={{ opacity: sliding ? 1 : 0 }}>\n          快进到：{numeral(value).format('00:00:00')}\n        </span>\n      </button>\n      <div className={styles.sliderRail}>\n        <div className={styles.sliderBuffered} style={{ transform: `scaleX(${bufferedScaleX})` }} />\n        <div className={styles.sliderTrack} style={{ transform: `translateX(${trackTranslateX}%)` }} />\n      </div>\n      <div className={styles.sliderHandleRail} style={{ transform: `translateX(${trackTranslateX}%)` }}>\n        <button type=\"button\" className={styles.sliderHandle} onMouseDown={onMouseDown} onTouchStart={onMouseDown} />\n      </div>\n      <MouseTooltip duration={duration} tooltip={sliding ? value : tooltip} />\n    </div>\n  );\n});\n\nTimeSlider.propTypes = {\n  currentTime: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  sliding: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nTimeSlider.defaultProps = {\n  buffered: null,\n};\n\nexport default React.memo(\n  TimeSlider,\n  (p, n) =>\n    p.currentTime === n.currentTime &&\n    p.duration === n.duration &&\n    p.buffered === n.buffered &&\n    p.onChange === n.onChange &&\n    p.sliding === n.sliding &&\n    p.value === n.value &&\n    p.tooltip === n.tooltip &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CaretRightOutlined, PauseOutlined } from '@ant-design/icons';\n// import styles from './index.module.less';\n\nconst PlayButton = ({ prevented, paused, ended, onPlayClick, onPauseClick }) => {\n  return prevented || paused || ended ? (\n    <button type=\"button\" onClick={onPlayClick}>\n      <CaretRightOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={onPauseClick}>\n      <PauseOutlined />\n    </button>\n  );\n};\n\nPlayButton.propTypes = {\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayButton,\n  (p, n) =>\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onPauseClick === n.onPauseClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from 'antd';\nimport Icon from '@ant-design/icons';\n// import 'antd/lib/slider/style/index.css';\nimport styles from './index.module.less';\n\nimport { ReactComponent as MutedSvg } from './muted.svg';\nimport { ReactComponent as UnmutedSvg } from './unmuted.svg';\n\nconst Volume = ({ muted, volume, changeVolume, onMutedClick }) => {\n  return (\n    <span className={styles.volume}>\n      {(muted || 0 === volume) && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={MutedSvg} />\n        </button>\n      )}\n      {!muted && 0 !== volume && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={UnmutedSvg} />\n        </button>\n      )}\n      <span className={styles.volumeSlider}>\n        <Slider value={volume * 100} onChange={(v) => changeVolume(v / 100)} max={100} />\n      </span>\n    </span>\n  );\n};\n\nVolume.propTypes = {\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  Volume,\n  (p, n) =>\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolum,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\n\nimport styles from './index.module.less';\n\nconst PlayTime = ({ live, duration, currentTime }) => {\n  return (\n    <span className={styles.controlText}>\n      {numeral(Math.round(currentTime)).format('00:00:00')}\n      {live ? (\n        <span className={styles.controlText}>\n          <span className={styles.liveDot} />\n          直播\n        </span>\n      ) : (\n        ` / ${numeral(Math.round(duration)).format('00:00:00')}`\n      )}\n    </span>\n  );\n};\n\nPlayTime.propTypes = {\n  live: PropTypes.bool.isRequired,\n  duration: PropTypes.number.isRequired,\n  currentTime: PropTypes.number.isRequired,\n};\n\nexport default React.memo(\n  PlayTime,\n  (p, n) => p.live === n.live && p.duration === n.duration && p.currentTime === n.currentTime,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, Menu } from 'antd';\n\nimport styles from './index.module.less';\n\nconst PlayRate = ({ live, playbackRate, changePlaybackRate, visible, dispatch }) => {\n  const show = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      dispatch({ type: 'update', payload: { rateMenuVisible: true } });\n    },\n    [dispatch],\n  );\n\n  const hide = React.useCallback(() => dispatch({ type: 'update', payload: { rateMenuVisible: false } }), [dispatch]);\n\n  const onMenuClick = React.useCallback(\n    (e) => {\n      changePlaybackRate(parseFloat(e.key, 10));\n      dispatch({ type: 'update', payload: { rateMenuVisible: false } });\n    },\n    [changePlaybackRate, dispatch],\n  );\n\n  React.useEffect(() => {\n    document.body.addEventListener('click', hide);\n    return () => document.body.removeEventListener('click', hide);\n  }, [hide]);\n\n  if (live) {\n    return null;\n  }\n\n  return (\n    <Dropdown\n      visible={visible}\n      overlay={\n        <Menu selectedKeys={[playbackRate.toString()]} onClick={onMenuClick}>\n          <Menu.Item key=\"0.25\">&nbsp;&nbsp;0.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"0.5\">&nbsp;&nbsp;0.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1\">&nbsp;&nbsp;1 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.25\">&nbsp;&nbsp;1.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.5\">&nbsp;&nbsp;1.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"2\">&nbsp;&nbsp;2 倍速&nbsp;&nbsp;</Menu.Item>\n        </Menu>\n      }\n      placement=\"topRight\"\n      trigger={[]}\n    >\n      <button type=\"button\" className={styles.textBtn} onClick={show}>\n        倍速\n      </button>\n    </Dropdown>\n  );\n};\n\nPlayRate.propTypes = {\n  live: PropTypes.bool.isRequired,\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  visible: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayRate,\n  (p, n) =>\n    p.live === n.live &&\n    p.playbackRate === n.playbackRate &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.visible === n.visible &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FullscreenExitOutlined, FullscreenOutlined } from '@ant-design/icons';\n\nconst FullscreenButton = ({ fullscreen, requestFullscreen, exitFullscreen }) => {\n  return fullscreen ? (\n    <button type=\"button\" onClick={exitFullscreen}>\n      <FullscreenExitOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={requestFullscreen}>\n      <FullscreenOutlined />\n    </button>\n  );\n};\n\nFullscreenButton.propTypes = {\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  FullscreenButton,\n  (p, n) =>\n    p.fullscreen === n.fullscreen &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './index.module.less';\n\nconst PictureInPicture = ({ pictureInPictureEnabled, pip, exitPictureInPicture, requestPictureInPicture }) => {\n  if (!pictureInPictureEnabled) {\n    return null;\n  }\n  return (\n    <button type=\"button\" className={styles.textBtn} onClick={pip ? exitPictureInPicture : requestPictureInPicture}>\n      画中画\n    </button>\n  );\n};\n\nPictureInPicture.propTypes = {\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PictureInPicture,\n  (p, n) =>\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestPictureInPicture === n.requestPictureInPicture,\n);\n","import React from 'react';\n\nconst initialState = {\n  controlsHovering: false,\n  sliding: false,\n  value: 0,\n  tooltip: 0,\n  hiding: false,\n  rateMenuVisible: false,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default () => {\n  const [{ controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible }, dispatch] = React.useReducer(\n    reducer,\n    initialState,\n  );\n  // const ref = React.useRef({});\n\n  React.useEffect(() => {\n    // console.log('usePlayerSkin');\n    return () => {\n      dispatch({ type: 'reset' });\n    };\n  }, []);\n\n  return {\n    dispatch,\n    controlsHovering,\n    hiding,\n    sliding,\n    value,\n    tooltip,\n    rateMenuVisible,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PreventedTip from './PreventedTip';\nimport VideoMask from './VideoMask';\nimport PlayState from './PlayState';\nimport TopState from './TopState';\n\nimport Controls from './Controls';\nimport ControlBar from './ControlBar';\nimport TimeSlider from './TimeSlider';\nimport PlayButton from './Controls/PlayButton';\nimport Volume from './Volume';\nimport PlayTime from './PlayTime';\nimport PlayRate from './Controls/PlayRate';\nimport FullscreenButton from './Controls/FullscreenButton';\nimport PictureInPicture from './Controls/PictureInPicture';\n\nimport usePlayerSkin from './usePlayerSkin';\nimport useAutoHide from './useAutoHide';\nimport 'antd/lib/tooltip/style/index.css';\nimport 'antd/lib/slider/style/index.css';\nimport 'antd/lib/dropdown/style/index.css';\nimport styles from './index.module.less';\n\nconst PlayerSkin = ({\n  live,\n  src,\n  prevented,\n  loading,\n  paused,\n  ended,\n  seeking,\n  waiting,\n  onPlayClick,\n  onPauseClick,\n  duration,\n  buffered,\n  currentTime,\n  changeCurrentTime,\n  muted,\n  volume,\n  changeVolume,\n  onMutedClick,\n  playbackRate,\n  changePlaybackRate,\n  pictureInPictureEnabled,\n  pip,\n  requestPictureInPicture,\n  exitPictureInPicture,\n  fullscreen,\n  requestFullscreen,\n  exitFullscreen,\n  kernelMsg,\n}) => {\n  const { dispatch, controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible } = usePlayerSkin();\n\n  const { show } = useAutoHide({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    kernelMsg,\n    dispatch,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n  });\n\n  return (\n    <div className={styles.playerSkin}>\n      <PreventedTip src={src} prevented={prevented} />\n      <VideoMask src={src} showControls={show} />\n      <PlayState\n        src={src}\n        loading={loading}\n        prevented={prevented}\n        paused={paused}\n        ended={ended}\n        waiting={waiting}\n        seeking={seeking}\n        kernelMsg={kernelMsg}\n        onPlayClick={onPlayClick}\n      />\n      <Controls hiding={hiding} dispatch={dispatch}>\n        {false === live && (\n          <TimeSlider\n            currentTime={currentTime}\n            duration={duration}\n            buffered={buffered}\n            onChange={changeCurrentTime}\n            sliding={sliding}\n            value={value}\n            tooltip={tooltip}\n            dispatch={dispatch}\n          />\n        )}\n        <ControlBar\n          extra={\n            <>\n              <PictureInPicture\n                pictureInPictureEnabled={pictureInPictureEnabled}\n                pip={pip}\n                requestPictureInPicture={requestPictureInPicture}\n                exitPictureInPicture={exitPictureInPicture}\n              />\n              <PlayRate\n                live={live}\n                playbackRate={playbackRate}\n                changePlaybackRate={changePlaybackRate}\n                dispatch={dispatch}\n                visible={rateMenuVisible}\n              />\n              <FullscreenButton\n                fullscreen={fullscreen}\n                requestFullscreen={requestFullscreen}\n                exitFullscreen={exitFullscreen}\n              />\n            </>\n          }\n        >\n          <PlayButton\n            prevented={prevented}\n            paused={paused}\n            ended={ended}\n            onPauseClick={onPauseClick}\n            onPlayClick={onPlayClick}\n          />\n          <Volume muted={muted} volume={volume} onMutedClick={onMutedClick} changeVolume={changeVolume} />\n          <PlayTime live={live} currentTime={currentTime} duration={duration} />\n        </ControlBar>\n      </Controls>\n      <TopState src={src} loading={loading} kernelMsg={kernelMsg} />\n    </div>\n  );\n};\n\nPlayerSkin.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string,\n  // controls: PropTypes.bool.isRequired,\n  // state\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n  // time\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  currentTime: PropTypes.number.isRequired,\n  changeCurrentTime: PropTypes.func.isRequired,\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  // playbackRate\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  // pip\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n  // kernel\n  kernelMsg: PropTypes.object,\n};\n\nPlayerSkin.defaultProps = {\n  live: false,\n  src: '',\n  buffered: null,\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayerSkin,\n  (p, n) =>\n    p.live === n.live &&\n    p.src === n.src &&\n    // p.controls === n.controls &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.buffered === n.buffered &&\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.playbackRate === n.playbackRate &&\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.fullscreen === n.fullscreen &&\n    p.kernelMsg === n.kernelMsg &&\n    p.getVideoElement === n.getVideoElement &&\n    p.onPauseClick === n.onPauseClick &&\n    p.onPlayClick === n.onPlayClick &&\n    p.changeCurrentTime === n.changeCurrentTime &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolume &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.requestPictureInPicture === n.requestPictureInPicture &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\n\nexport default ({\n  src,\n  loading,\n  prevented,\n  paused,\n  ended,\n  waiting,\n  seeking,\n  kernelMsg,\n  controlsHovering,\n  sliding,\n  rateMenuVisible,\n  dispatch,\n}) => {\n  const ref = React.useRef({});\n\n  const animationFrameCallback = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.requestID || true === ref.current.hiding) {\n        return;\n      }\n      if (!ref.current.timestamp) {\n        ref.current.timestamp = timestamp;\n      }\n      if (3 * 1000 > timestamp - ref.current.timestamp) {\n        ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n        return;\n      }\n      dispatch({ type: 'update', payload: { hiding: true } });\n      ref.current.hiding = true;\n      delete ref.current.requestID;\n      delete ref.current.timestamp;\n    },\n    [dispatch],\n  );\n\n  const startAutoHide = React.useCallback(() => {\n    if (false !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    delete ref.current.timestamp;\n    if (ref.current.requestID) {\n      return;\n    }\n    ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n  }, [dispatch, animationFrameCallback]);\n\n  const stopAutoHide = React.useCallback(() => {\n    if (true !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    if (ref.current.requestID) {\n      global.cancelAnimationFrame(ref.current.requestID);\n    }\n    delete ref.current.requestID;\n    delete ref.current.timestamp;\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    if (\n      !src ||\n      loading ||\n      prevented ||\n      paused ||\n      ended ||\n      waiting ||\n      seeking ||\n      sliding ||\n      rateMenuVisible ||\n      controlsHovering ||\n      kernelMsg\n    ) {\n      stopAutoHide();\n    } else {\n      startAutoHide();\n    }\n  }, [\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n    kernelMsg,\n    startAutoHide,\n    stopAutoHide,\n  ]);\n\n  return { show: startAutoHide };\n};\n","import React from 'react';\nimport PlayerContext from '../PlayerContext';\nimport PlayerSkin from '../PlayerSkin';\n\nconst PlayerSkinWapper = () => {\n  const props = React.useContext(PlayerContext);\n  return <PlayerSkin {...props} />;\n};\n\nexport default PlayerSkinWapper;\n","import React from 'react';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  playbackRate: 1,\n  enabled: !!document.pictureInPictureEnabled,\n  pictureInPictureEnabled: !!document.pictureInPictureEnabled,\n  pip: false,\n  fullscreen: false,\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      playbackRate,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n  const ref = React.useRef({ src });\n\n  const clearUpdateTimeout = React.useCallback(() => {\n    if (ref.current.timeout) {\n      global.clearTimeout(ref.current.timeout);\n    }\n    delete ref.current.timeout;\n    delete ref.current.payload;\n  }, []);\n\n  const timeoutCallback = React.useCallback(() => {\n    const { payload } = ref.current;\n    clearUpdateTimeout();\n    // debugger;\n    if (payload) {\n      dispatch({ type: 'update', payload });\n    }\n  }, [dispatch, clearUpdateTimeout]);\n\n  const updateState = React.useCallback(\n    (payload, sync = false) => {\n      ref.current.payload = { ...ref.current.payload, ...payload };\n      if (sync) {\n        timeoutCallback();\n        return;\n      }\n      if (ref.current.timeout) {\n        return;\n      }\n      ref.current.timeout = global.setTimeout(timeoutCallback, 100);\n    },\n    [timeoutCallback],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      if (ref.current.timeout) {\n        global.clearTimeout(ref.current.timeout);\n      }\n      ref.current = {};\n    };\n  }, []);\n\n  React.useEffect(() => {\n    clearUpdateTimeout();\n    dispatch({ type: 'reset' });\n    // ref.current.src = src;\n  }, [src, clearUpdateTimeout]);\n\n  return {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  };\n};\n","import React from 'react';\nimport usePlayerReducer from '../hooks/usePlayerReducer';\nimport useVideoState from '../hooks/useVideoState';\nimport useTime from '../hooks/useTime';\nimport useVolume from '../hooks/useVolume';\nimport usePlaybackRate from '../hooks/usePlaybackRate';\nimport usePiP from '../hooks/usePiP';\nimport useFullscreen from '../hooks/useFullscreen';\n\nexport default ({ src, live, onKernelError }) => {\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n\n  const {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  } = usePlayerReducer({ src });\n\n  const getVideoElement = React.useCallback(() => videoRef && videoRef.current, []);\n  const getPlayerElement = React.useCallback(() => playerRef && playerRef.current, []);\n\n  const onMsgChange = React.useCallback(\n    (msg) => {\n      // debugger;\n      updateState({ kernelMsg: msg });\n      if (onKernelError) {\n        onKernelError(msg);\n      }\n    },\n    [updateState, onKernelError],\n  );\n\n  const { onPauseClick, onPlayClick } = useVideoState({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    updateState,\n    getVideoElement,\n  });\n\n  const { changeCurrentTime } = useTime({ src, duration, currentTime, buffered, updateState, getVideoElement });\n  const { onMutedClick, changeVolume } = useVolume({ src, muted, volume, updateState, getVideoElement });\n  const { changePlaybackRate } = usePlaybackRate({ src, live, playbackRate, updateState, getVideoElement });\n  const { requestPictureInPicture, exitPictureInPicture } = usePiP({ src, pip, updateState, getVideoElement });\n  const { requestFullscreen, exitFullscreen } = useFullscreen({ updateState, getVideoElement, getPlayerElement });\n\n  return {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  };\n};\n","import React from 'react';\n\nexport default ({ src, loading, prevented, ended, updateState, getVideoElement }) => {\n  const ref = React.useRef({ getVideoElement, loading, prevented, ended });\n\n  const onPlayClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      if (ref.current.ended) {\n        el.currentTime = 0;\n      }\n      const promise = el.play();\n      if (!promise || !promise.then) {\n        return;\n      }\n      // debugger;\n      // TODO: src 改变了\n      promise\n        .then(() => updateState({ prevented: false, loading: false }))\n        .catch(() => updateState({ prevented: true, loading: false }));\n    }\n    updateState({ paused: false }, true);\n  }, [updateState]);\n\n  const onPauseClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.pause();\n    }\n    updateState({ paused: true }, true);\n  }, [updateState]);\n\n  const onCanPlay = React.useCallback(() => {\n    if (ref.current.loading) {\n      updateState({ loading: false });\n      onPlayClick();\n    }\n    updateState({ waiting: false });\n    // setWaiting(false);\n  }, [updateState, onPlayClick]);\n\n  const onPause = React.useCallback(() => {\n    // setPaused(true);\n    updateState({ paused: true });\n  }, [updateState]);\n\n  const onPlay = React.useCallback(() => {\n    // setPaused(false);\n    // setEnded(false);\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onPlaying = React.useCallback(() => {\n    // setPaused(false);\n    // setEnded(false);\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onEnded = React.useCallback(() => {\n    // setEnded(true);\n    updateState({ ended: true });\n  }, [updateState]);\n\n  const onSeeked = React.useCallback(() => {\n    // setSeeking(false);\n    updateState({ seeking: false });\n  }, [updateState]);\n\n  const onSeeking = React.useCallback(() => {\n    // setSeeking(true);\n    updateState({ seeking: true });\n  }, [updateState]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    // setWaiting(false);\n    updateState({ waiting: false });\n  }, [updateState]);\n\n  const onWaiting = React.useCallback(() => {\n    // setWaiting(true);\n    updateState({ waiting: true });\n  }, [updateState]);\n\n  const onDocumentClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    document.removeEventListener('click', onDocumentClick);\n    if (ref.current.prevented) {\n      el.play();\n      ref.current.loaded = true;\n      return;\n    }\n    if (ref.current.loaded) {\n      return;\n    }\n    ref.current.loaded = true;\n    if (!ref.current.src) {\n      el.src = '';\n      try {\n        el.play();\n      } catch (e) {}\n      el.pause();\n    }\n  }, []);\n\n  // DONE: src 改变后 reset\n  // React.useEffect(() => {\n  //   setLoading(!!src);\n  //   setPaused(false);\n  //   setEnded(false);\n  //   setSeeking(false);\n  //   setWaiting(false);\n  // }, [src]);\n  React.useEffect(() => {\n    ref.current.src = src;\n    if (src) {\n      updateState({ loading: true }, true);\n    }\n  }, [src, updateState]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.prevented = prevented;\n    ref.current.ended = ended;\n  }, [loading, prevented, ended]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('canplay', onCanPlay);\n    el.addEventListener('pause', onPause);\n    el.addEventListener('play', onPlay);\n    el.addEventListener('playing', onPlaying);\n    el.addEventListener('ended', onEnded);\n    el.addEventListener('seeked', onSeeked);\n    el.addEventListener('seeking', onSeeking);\n    el.addEventListener('canplaythrough', onCanPlayThrough);\n    el.addEventListener('waiting', onWaiting);\n    document.addEventListener('click', onDocumentClick);\n    return () => {\n      el.removeEventListener('canplay', onCanPlay);\n      el.removeEventListener('pause', onPause);\n      el.removeEventListener('play', onPlay);\n      el.removeEventListener('playing', onPlaying);\n      el.removeEventListener('ended', onEnded);\n      el.removeEventListener('seeked', onSeeked);\n      el.removeEventListener('seeking', onSeeking);\n      el.removeEventListener('canplaythrough', onCanPlayThrough);\n      el.removeEventListener('waiting', onWaiting);\n      document.removeEventListener('click', onDocumentClick);\n    };\n  }, [\n    onCanPlay,\n    onPause,\n    onPlay,\n    onPlaying,\n    onEnded,\n    onSeeked,\n    onSeeking,\n    onCanPlayThrough,\n    onWaiting,\n    onDocumentClick,\n  ]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ src, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement, timestamp: 0, payload: null });\n  // const updateRef = React.useRef(null);\n\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.target.duration;\n      // TODO: 同步更新\n      updateState({ duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 });\n    },\n    [updateState],\n  );\n\n  const update = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.payload) {\n        return;\n      }\n      // TODO: ref.current.timestamp isNaN\n      if (200 > timestamp - ref.current.timestamp) {\n        global.requestAnimationFrame(update);\n        return;\n      }\n      updateState(ref.current.payload);\n      ref.current.timestamp = timestamp;\n      ref.current.payload = null;\n    },\n    [updateState],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (!ref.current || Number.isNaN(e.target.currentTime)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.currentTime = e.target.currentTime;\n      } else {\n        ref.current.payload = { currentTime: e.target.currentTime };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => {\n      if (!ref.current || !(e.target.buffered instanceof TimeRanges)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.buffered = e.target.buffered;\n      } else {\n        ref.current.payload = { buffered: e.target.buffered };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v)) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.currentTime = v;\n      }\n      ref.current.payload = null;\n      updateState({ currentTime: v });\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    ref.current.timestamp = 0;\n    ref.current.payload = null;\n  }, [src]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('durationchange', onDurationChange);\n    el.addEventListener('timeupdate', onTimeUpdate);\n    el.addEventListener('progress', onProgress);\n    return () => {\n      el.removeEventListener('durationchange', onDurationChange);\n      el.removeEventListener('timeupdate', onTimeUpdate);\n      el.removeEventListener('progress', onProgress);\n    };\n  }, [onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ src, muted, volume, updateState, getVideoElement }) => {\n  const ref = React.useRef({ muted, volume, getVideoElement });\n\n  const onVolumeChange = React.useCallback(\n    (e) => {\n      const v = e.target.volume;\n      // setVolume(v);\n      // setMuted(0 === v ? true : e.target.muted);\n      updateState({ volume: v, muted: 0 === v ? true : e.target.muted });\n    },\n    [updateState],\n  );\n\n  const onMutedClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      const payload = { muted: !ref.current.muted };\n      el.muted = payload.muted;\n      if (0 === ref.current.volume && ref.current.muted) {\n        payload.volume = 1;\n        el.volume = payload.volume;\n      }\n      updateState(payload, true);\n    }\n  }, [updateState]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      const el = ref.current.getVideoElement();\n      const payload = { volume: v };\n      if (el) {\n        el.volume = v;\n      }\n      if (0 !== v && ref.current.muted) {\n        payload.muted = false;\n      }\n      updateState(payload, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      el.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [onVolumeChange]);\n\n  React.useEffect(() => {\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [muted, volume]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.muted = false;\n      el.volume = 1;\n    }\n  }, [src]);\n\n  return { onMutedClick, changeVolume };\n};\n","import React from 'react';\n\nexport default ({ src, live, updateState, getVideoElement }) => {\n  const ref = React.useRef({ live, getVideoElement });\n\n  const onRateChange = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.target.playbackRate)) {\n        return;\n      }\n      updateState({ playbackRate: e.target.playbackRate });\n    },\n    [updateState],\n  );\n\n  const changePlaybackRate = React.useCallback(\n    (r) => {\n      if (Number.isNaN(r)) {\n        return;\n      }\n      const v = ref.current.live ? 1 : r;\n      const el = ref.current.getVideoElement();\n      if (!el) {\n        return;\n      }\n      el.playbackRate = v;\n      updateState({ playbackRate: v }, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    ref.current.live = live;\n    if (live) {\n      changePlaybackRate(1);\n    }\n  }, [live, changePlaybackRate]);\n\n  React.useEffect(() => {\n    const el = getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('ratechange', onRateChange);\n    return () => {\n      el.removeEventListener('ratechange', onRateChange);\n    };\n  }, [getVideoElement, onRateChange]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.playbackRate = 1;\n    }\n  }, [src]);\n\n  return { changePlaybackRate };\n};\n","import React from 'react';\n\nexport default ({ src, pip, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement });\n\n  const requestPictureInPicture = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el && el.requestPictureInPicture && ref.current.src) {\n      el.requestPictureInPicture();\n    }\n  }, []);\n\n  const exitPictureInPicture = React.useCallback(() => {\n    if (document.exitPictureInPicture) {\n      document.exitPictureInPicture();\n    }\n  }, []);\n\n  const onEnterPictureInPicture = React.useCallback(() => {\n    // setPiP(true);\n    updateState({ pip: true });\n  }, [updateState]);\n\n  const onLeavePictureInPicture = React.useCallback(() => {\n    // setPiP(false);\n    updateState({ pip: false });\n  }, [updateState]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('enterpictureinpicture', onEnterPictureInPicture);\n    el.addEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    return () => {\n      el.removeEventListener('enterpictureinpicture', onEnterPictureInPicture);\n      el.removeEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    };\n  }, [onEnterPictureInPicture, onLeavePictureInPicture]);\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    if (pip && !src) {\n      exitPictureInPicture();\n    }\n  }, [src, pip, exitPictureInPicture]);\n\n  return { requestPictureInPicture, exitPictureInPicture };\n};\n","import React from 'react';\n\nexport default ({ updateState, getVideoElement, getPlayerElement }) => {\n  const requestFullscreen = React.useCallback(() => {\n    const el = getPlayerElement();\n    if (!el) {\n      // debug('useVideoFullscreen: 全屏异常，unmounted');\n      return;\n    }\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.msRequestFullscreen) {\n      // 兼容 IE11\n      el.msRequestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      // 兼容微信 PC 版内置浏览器\n      el.webkitRequestFullscreen();\n    } else {\n      const videoEl = getVideoElement();\n      if (videoEl && videoEl.webkitEnterFullScreen) {\n        // 兼容 iOS Safari\n        videoEl.webkitEnterFullScreen();\n      } else {\n        // 异常分支，不应该进入\n        // debug('useVideoFullscreen: 全屏异常，浏览器不支持 requestFullscreen');\n      }\n    }\n  }, [getVideoElement, getPlayerElement]);\n\n  const exitFullscreen = React.useCallback(() => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else {\n      // 异常分支，不应该进入\n      // debug('useVideoFullscreen: 退出全屏异常，浏览器不支持 exitFullscreen');\n    }\n  }, []);\n\n  const onChange = React.useCallback(() => {\n    const el = getPlayerElement();\n    const fullscreenElement =\n      document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n    updateState({ fullscreen: !!el && fullscreenElement === el });\n  }, [updateState, getPlayerElement]);\n\n  React.useEffect(() => {\n    document.addEventListener('fullscreenchange', onChange);\n    document.addEventListener('webkitfullscreenchange', onChange);\n    document.onmsfullscreenchange = onChange;\n    return () => {\n      document.removeEventListener('fullscreenchange', onChange);\n      document.removeEventListener('webkitfullscreenchange', onChange);\n      document.onmsfullscreenchange = null;\n    };\n  }, [onChange]);\n\n  return { requestFullscreen, exitFullscreen };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Flvjs from '../Flvjs';\nimport Hlsjs from '../Hlsjs';\nimport Native from '../Native';\nimport SRSWebRTC from '../SRSWebRTC';\nimport PlayerSkinWapper from '../PlayerSkinWapper';\nimport PlayerContext from '../PlayerContext';\nimport useReactjsPlayer from './useReactjsPlayer';\nimport styles from './index.module.less';\n\nconst ReactjsPlayer = ({\n  kernel,\n  live,\n  config,\n  onKernelError,\n  src,\n  type,\n  controls,\n  className,\n  videoProps,\n  playerProps,\n  children,\n}) => {\n  const {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  } = useReactjsPlayer({ src, live, onKernelError });\n\n  const kernelProps = { getVideoElement, src, config, onMsgChange };\n\n  return (\n    <div className={`${styles.reactjsPlayer} ${className}`} ref={playerRef} {...playerProps}>\n      {'flvjs' === kernel && <Flvjs {...kernelProps} />}\n      {'hlsjs' === kernel && <Hlsjs {...kernelProps} />}\n      {'native' === kernel && <Native {...kernelProps} />}\n      {'srswebrtc' === kernel && <SRSWebRTC {...kernelProps} />}\n      {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n      <video className={styles.video} ref={videoRef} controls={'controls' === controls} type={type} {...videoProps} />\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          loading,\n          prevented,\n          paused,\n          ended,\n          seeking,\n          waiting,\n          duration,\n          currentTime,\n          buffered,\n          muted,\n          volume,\n          playbackRate,\n          pictureInPictureEnabled,\n          pip,\n          fullscreen,\n          kernelMsg,\n          getVideoElement,\n          onPauseClick,\n          onPlayClick,\n          changeCurrentTime,\n          onMutedClick,\n          changeVolume,\n          changePlaybackRate,\n          requestPictureInPicture,\n          exitPictureInPicture,\n          requestFullscreen,\n          exitFullscreen,\n        }}\n      >\n        {true === controls && <PlayerSkinWapper />}\n        {children}\n      </PlayerContext.Provider>\n    </div>\n  );\n};\n\nReactjsPlayer.propTypes = {\n  kernel: PropTypes.oneOf(['hlsjs', 'flvjs', 'native', 'srswebrtc']).isRequired,\n  live: PropTypes.bool.isRequired,\n  config: PropTypes.object,\n  onKernelError: PropTypes.func,\n\n  src: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  controls: PropTypes.oneOf([false, true, 'controls']),\n\n  className: PropTypes.string,\n  videoProps: PropTypes.object,\n  playerProps: PropTypes.object,\n\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nReactjsPlayer.defaultProps = {\n  config: null,\n  onKernelError: null,\n\n  src: '',\n  controls: true,\n\n  className: '',\n  videoProps: null,\n  playerProps: null,\n\n  children: null,\n};\n\nexport default React.memo(\n  ReactjsPlayer,\n  (p, n) =>\n    p.kernel === n.kernel &&\n    p.live === n.live &&\n    p.config === n.config &&\n    p.onKernelError === n.onKernelError &&\n    p.src === n.src &&\n    p.type === n.type &&\n    p.controls === n.controls &&\n    p.className === n.className &&\n    p.videoProps === n.videoProps &&\n    p.playerProps === n.playerProps &&\n    p.children === n.children,\n);\n","import { EventEmitter } from 'fbemitter';\n\nlet emitter = null;\nlet index = 0;\n\nclass GrindPlayer {\n  /**\n   * 创建 GrindPlayer 实例\n   */\n  constructor(id) {\n    this.id = id;\n    this.el = null;\n    this.emitter = new EventEmitter();\n    this.tokenList = [];\n    this.eventMap = [];\n\n    this.addListener();\n  }\n\n  addListener() {\n    if (!emitter) {\n      emitter = new EventEmitter();\n    }\n\n    this.tokenList = [\n      emitter.addListener(`${this.id}.onJavaScriptBridgeCreated`, () => {\n        this.el = document.getElementById(this.id);\n        // this.el.addEventListener('mediaError', () => );\n      }),\n      emitter.addListener(`${this.id}.mediaSize`, (data) => {\n        if (0 === data.videoHeight && 0 === data.videoWidth) {\n          this.emitter.emit('canplay');\n        } else {\n          this.emitter.emit('canplaythrough');\n        }\n      }),\n      emitter.addListener(`${this.id}.paused`, () => this.emitter.emit('pause')),\n      emitter.addListener(`${this.id}.playing`, () => this.emitter.emit('playing')),\n      emitter.addListener(`${this.id}.seeking`, () => this.emitter.emit('seeking')),\n      emitter.addListener(`${this.id}.seeked`, () => this.emitter.emit('seeked')),\n      emitter.addListener(`${this.id}.complete`, () => this.emitter.emit('ended')),\n      emitter.addListener(`${this.id}.buffering`, () => this.emitter.emit('waiting')),\n\n      emitter.addListener(`${this.id}.durationChange`, (e) => this.emitter.emit('durationchange', e)),\n      emitter.addListener(`${this.id}.timeChange`, (e) => this.emitter.emit('timeupdate', e)),\n      emitter.addListener(`${this.id}.progress`, (e) => this.emitter.emit('progress', e)),\n\n      emitter.addListener(`${this.id}.volumeChange`, (e) => this.emitter.emit('volumechange', e)),\n    ];\n  }\n\n  invoker(methodName, ...args) {\n    if (!this.el) {\n      return;\n    }\n    this.el[methodName](...args);\n  }\n\n  addEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    const token = this.emitter.addListener(event, fn);\n    this.eventMap.push({ token, event, fn });\n  }\n\n  removeEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    this.eventMap = this.eventMap.filter((it) => {\n      if (it.event !== event) {\n        return true;\n      }\n      if (!fn && it.fn !== fn) {\n        return true;\n      }\n      it.token.remove();\n      return false;\n    });\n  }\n\n  destroy() {\n    if (this.eventMap) {\n      this.eventMap.map((it) => it.token.remove());\n      delete this.eventMap;\n    }\n\n    if (this.tokenList) {\n      this.tokenList.map((it) => it.remove());\n      delete this.tokenList;\n    }\n\n    if (this.emitter) {\n      this.emitter.removeAllListeners();\n    }\n    delete this.emitter;\n\n    delete this.id;\n    delete this.el;\n  }\n}\n\nconst onJSBridge = (playerId, event, data) => {\n  if (!emitter) {\n    emitter = new EventEmitter();\n  }\n  console.log(`${event}: ${JSON.stringify(data)}`);\n  emitter.emit(`${playerId}.${event}`, data);\n};\n\nexport default {\n  getPlayerId: () => `grindPlayer${index++}`,\n\n  getGrindPlayer: (id, javascriptCallbackFunction) => {\n    if (!global[javascriptCallbackFunction]) {\n      global[javascriptCallbackFunction] = onJSBridge;\n    }\n    return new GrindPlayer(id);\n  },\n};\n","import React from 'react';\nimport GrindPlayer from './GrindPlayer';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  pictureInPictureEnabled: false,\n  pip: false,\n  fullscreen: false,\n  playbackRate: 1,\n  javascriptCallbackFunction: 'onJSBridge',\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      playbackRate,\n      javascriptCallbackFunction,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n\n  const id = React.useMemo(() => GrindPlayer.getPlayerId(), []);\n  const ref = React.useRef({});\n\n  React.useEffect(() => {\n    const player = GrindPlayer.getGrindPlayer(id, javascriptCallbackFunction);\n    ref.current.player = player;\n    return () => {\n      player.destroy();\n      ref.current = null;\n    };\n  }, [id, javascriptCallbackFunction]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.ended = ended;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [loading, ended, muted, volume]);\n\n  React.useEffect(() => {\n    dispatch({ type: 'reset', payload: { loading: !!src } });\n  }, [src]);\n\n  return {\n    ref,\n    dispatch,\n    id,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    playbackRate,\n    javascriptCallbackFunction,\n    kernelMsg,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactSWF from 'react-swf';\nimport './GrindPlayer.swf';\nimport './flashlsOSMF.swf';\nimport PlayerContext from '../PlayerContext';\nimport useGrindPlayer from './useGrindPlayer';\nimport useState from './useState';\nimport useTime from './useTime';\nimport useVolume from './useVolume';\nimport styles from './index.module.less';\n\nconst GrindPlayer = ({ live, src, type, grindPlayerSwf, flashlsOSMFSwf }) => {\n  const { ref, dispatch, id, javascriptCallbackFunction, ...state } = useGrindPlayer({ src });\n\n  const stateProps = useState({ ref, dispatch });\n  const timeProps = useTime({ ref, dispatch });\n  const volumeProps = useVolume({ ref, dispatch });\n\n  return (\n    <div className={styles.grindPlayer}>\n      {src && (\n        <ReactSWF\n          id={id}\n          src={grindPlayerSwf}\n          width=\"100%\"\n          height=\"100%\"\n          wmode=\"opaque\"\n          allowFullScreen\n          allowScriptAccess=\"always\"\n          bgcolor=\"#000000\"\n          flashVars={{\n            src,\n            autoPlay: true,\n            bufferTime: 0.5,\n            streamType: live ? 'live' : 'recorded',\n            plugin_hls: 'application/x-mpegURL' === type ? flashlsOSMFSwf : undefined,\n            javascriptCallbackFunction,\n          }}\n        />\n      )}\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          ...state,\n          ...stateProps,\n          ...timeProps,\n          ...volumeProps,\n        }}\n      />\n    </div>\n  );\n};\n\nGrindPlayer.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  grindPlayerSwf: PropTypes.string,\n  flashlsOSMFSwf: PropTypes.string,\n};\n\nGrindPlayer.defaultProps = {\n  live: true,\n  grindPlayerSwf: 'http://unpkg.com/reactjs-player/dist/GrindPlayer.swf',\n  flashlsOSMFSwf: 'http://unpkg.com/reactjs-player/dist/flashlsOSMF.swf',\n};\n\nexport default React.memo(GrindPlayer);\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onPlayClick = React.useCallback(() => {\n    if (ref.current.player) {\n      if (ref.current.ended) {\n        ref.current.player.invoker('seek', 0);\n      }\n      ref.current.player.invoker('play2');\n    }\n    dispatch({ type: 'update', payload: { paused: false } });\n  }, [ref, dispatch]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (ref.current.player) {\n      ref.current.player.invoker('pause');\n    }\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [ref, dispatch]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (ref.current.loading) {\n      dispatch({ type: 'update', payload: { loading: false } });\n    }\n    dispatch({ type: 'update', payload: { waiting: false } });\n  }, [ref, dispatch]);\n\n  const onPause = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [dispatch]);\n\n  const onPlaying = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: false, ended: false } });\n  }, [dispatch]);\n\n  const onEnded = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { ended: true } });\n  }, [dispatch]);\n\n  const onSeeked = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: false } });\n  }, [dispatch]);\n\n  const onSeeking = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: true } });\n  }, [dispatch]);\n\n  const onWaiting = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { waiting: true } });\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('canplaythrough', onCanPlayThrough);\n    player.addEventListener('pause', onPause);\n    player.addEventListener('playing', onPlaying);\n    player.addEventListener('ended', onEnded);\n    player.addEventListener('seeked', onSeeked);\n    player.addEventListener('seeking', onSeeking);\n    player.addEventListener('waiting', onWaiting);\n    return () => {\n      player.removeEventListener('canplaythrough', onCanPlayThrough);\n      player.removeEventListener('pause', onPause);\n      player.removeEventListener('playing', onPlaying);\n      player.removeEventListener('ended', onEnded);\n      player.removeEventListener('seeked', onSeeked);\n      player.removeEventListener('seeking', onSeeking);\n      player.removeEventListener('waiting', onWaiting);\n    };\n  }, [ref, onCanPlayThrough, onPause, onPlaying, onEnded, onSeeked, onSeeking, onWaiting]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.duration;\n      dispatch({ type: 'update', payload: { duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 } });\n    },\n    [dispatch],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.currentTime)) {\n        return;\n      }\n      dispatch({ type: 'update', payload: { currentTime: e.currentTime } });\n    },\n    [dispatch],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => dispatch({ type: 'update', payload: { buffered: e.buffered } }),\n    [dispatch],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v) || !ref.current || !ref.current.player) {\n        return;\n      }\n      ref.current.player.invoker('seek', v);\n      dispatch({ type: 'update', payload: { currentTime: v } });\n    },\n    [ref, dispatch],\n  );\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('durationchange', onDurationChange);\n    player.addEventListener('timeupdate', onTimeUpdate);\n    player.addEventListener('progress', onProgress);\n    return () => {\n      player.removeEventListener('durationchange', onDurationChange);\n      player.removeEventListener('timeupdate', onTimeUpdate);\n      player.removeEventListener('progress', onProgress);\n    };\n  }, [ref, onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onVolumeChange = React.useCallback((e) => dispatch({ type: 'update', payload: e }), [dispatch]);\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current || !ref.current.player) {\n      return;\n    }\n    const { muted } = ref.current;\n    ref.current.player.invoker('setMuted', !muted);\n    if (0 === ref.current.volume && muted) {\n      ref.current.player.invoker('setVolume', 1.0);\n    }\n  }, [ref]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (ref.current && ref.current.player) {\n        ref.current.player.invoker('setVolume', v);\n      }\n    },\n    [ref],\n  );\n\n  React.useEffect(() => {\n    if (!ref.current || !ref.current.player) {\n      return () => {};\n    }\n    const { player } = ref.current;\n    player.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      player.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [ref, onVolumeChange]);\n\n  return { onMutedClick, changeVolume };\n};\n","import ReactjsPlayer from './ReactjsPlayer';\nimport GrindPlayer from './GrindPlayer';\nimport PlayerContext from './PlayerContext';\nimport PlayerSkin from './PlayerSkin';\n\nReactjsPlayer.GrindPlayer = GrindPlayer;\nReactjsPlayer.PlayerContext = PlayerContext;\nReactjsPlayer.PlayerSkin = PlayerSkin;\n\nexport default ReactjsPlayer;\n"],"sourceRoot":""}