{"version":3,"sources":["../../src/Flvjs/useFlvjs.js","../../src/Flvjs/index.js","../../src/Hlsjs/useHlsjs.js","../../src/Hlsjs/index.js","../../src/Native/index.js","../../src/Native/useNative.js","../../src/SRSWebRTC/SRSPlayer.js","../../src/SRSWebRTC/index.js","../../src/SRSWebRTC/useSRSWebRTC.js","../../src/PlayerContext/index.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/PlayerSkin/PreventedTip/index.js","../../src/PlayerSkin/VideoMask/index.js","../../src/PlayerSkin/PlayState/index.js","../../src/PlayerSkin/TopState/index.js","../../src/PlayerSkin/Controls/bg.png","../../src/PlayerSkin/Controls/index.js","../../src/PlayerSkin/ControlBar/index.js","../../src/PlayerSkin/TimeSlider/index.js","../../src/PlayerSkin/Controls/PlayButton.js","../../src/PlayerSkin/Volume/index.js","../../src/PlayerSkin/PlayTime/index.js","../../src/PlayerSkin/Controls/PlayRate.js","../../src/PlayerSkin/Controls/FullscreenButton.js","../../src/PlayerSkin/Controls/PictureInPicture.js","../../src/PlayerSkin/usePlayerSkin.js","../../src/PlayerSkin/index.js","../../src/PlayerSkin/useAutoHide.js","../../src/PlayerSkinWapper/index.js","../../src/hooks/usePlayerReducer.js","../../src/ReactjsPlayer/useReactjsPlayer.js","../../src/hooks/useVideoState.js","../../src/hooks/useTime.js","../../src/hooks/useVolume.js","../../src/hooks/usePlaybackRate.js","../../src/hooks/usePiP.js","../../src/hooks/useFullscreen.js","../../src/ReactjsPlayer/index.js","../../src/GrindPlayer/GrindPlayer.js","../../src/GrindPlayer/useGrindPlayer.js","../../src/GrindPlayer/index.js","../../src/GrindPlayer/useState.js","../../src/GrindPlayer/useTime.js","../../src/GrindPlayer/useVolume.js","../../src/index.js","App.js","../../dist/GrindPlayer.swf","../../dist/flashlsOSMF.swf","blank16x9.png","reportWebVitals.js","index.js"],"names":["getFlvjs","src","Promise","global","resolve","script","debug","console","Flvjs","props","getVideoElement","config","onMsgChange","React","player","setPlayer","getVideo","ref","configRef","onMsgChangeRef","play","isLive","type","url","cleanup","errMsg","destroyPlayer","el","detail","useFlvjs","PropTypes","isRequired","p","n","getHls","Hlsjs","enableWorker","currentSrc","info","details","useHlsjs","Native","loaded","onUnload","onError","msg","e","useNative","SRSPlayer","matched","this","protocol","pathname","pc","RTCPeerConnection","iceTransportPolicy","bundlePolicy","rtcpMuxPolicy","iceCandidatePoolSize","sdpSemantics","tcpCandidatePolicy","IceTransportsType","direction","event","sdp","offer","RTCSessionDescription","track","sendRequest","method","body","JSON","api","streamurl","clientip","tid","Number","parseInt","Date","getTime","Math","fetch","mode","headers","response","Error","text","MediaStream","SRSWebRTC","stream","useSRSWebRTC","PlayerContext","styleInject","css","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","PreventedTip","prevented","className","styles","VideoMask","showControls","opacity","background","onMouseMove","onClick","PlayState","loading","paused","ended","seeking","waiting","kernelMsg","onPlayClick","LoadingOutlined","PlayCircleOutlined","TopState","object","Controls","hiding","dispatch","children","onMouseEnter","payload","controlsHovering","onMouseLeave","backgroundImage","transform","ControlBar","extra","getValue","rect","duration","w","getEventXCoordinate","MouseTooltip","tooltip","translateX","getMouseTranslateX","numeral","TimeSlider","currentTime","buffered","onChange","sliding","value","sliderRef","v","onMouseDown","react","left","width","update","onMouseUp","onSliderMouseOver","onSliderMouseMove","onResize","bufferedScaleX","i","end","getBufferedEnd","getBufferedScaleX","trackTranslateX","getTrackTranslateX","role","tabIndex","onKeyDown","onMouseOver","onFocus","onTouchStart","PlayButton","onPauseClick","CaretRightOutlined","PauseOutlined","Volume","muted","volume","changeVolume","onMutedClick","Icon","component","MutedSvg","UnmutedSvg","Slider","max","PlayTime","live","PlayRate","playbackRate","changePlaybackRate","visible","show","rateMenuVisible","hide","onMenuClick","parseFloat","Dropdown","overlay","Menu","selectedKeys","key","placement","trigger","FullscreenButton","fullscreen","requestFullscreen","exitFullscreen","FullscreenExitOutlined","FullscreenOutlined","PictureInPicture","pictureInPictureEnabled","pip","exitPictureInPicture","requestPictureInPicture","initialState","reducer","state","action","PlayerSkin","changeCurrentTime","usePlayerSkin","animationFrameCallback","timestamp","startAutoHide","stopAutoHide","useAutoHide","PlayerSkinWapper","enabled","onKernelError","videoRef","playerRef","clearUpdateTimeout","timeoutCallback","updateState","sync","usePlayerReducer","getPlayerElement","promise","onCanPlay","onPause","onPlay","onPlaying","onEnded","onSeeked","onSeeking","onCanPlayThrough","onWaiting","onDocumentClick","useVideoState","onDurationChange","onTimeUpdate","onProgress","useTime","onVolumeChange","useVolume","onRateChange","usePlaybackRate","onEnterPictureInPicture","onLeavePictureInPicture","usePiP","videoEl","fullscreenElement","useFullscreen","ReactjsPlayer","kernel","controls","videoProps","playerProps","useReactjsPlayer","kernelProps","emitter","index","GrindPlayer","EventEmitter","data","args","token","addListener","fn","eventMap","filter","it","onJSBridge","playerId","javascriptCallbackFunction","grindPlayerSwf","flashlsOSMFSwf","id","useGrindPlayer","stateProps","useState","timeProps","volumeProps","ReactSWF","height","wmode","allowFullScreen","allowScriptAccess","bgcolor","flashVars","autoPlay","bufferTime","streamType","plugin_hls","string","delay","timeout","setTimeout","App","memo","list","setList","setInfo","setSrc","setVideoProps","useRef","Form","useForm","form","useCallback","item","find","setFieldsValue","onSubmit","values","a","current","useEffect","ua","UAParser","navigator","userAgent","device","playsInline","supportedList","Hls","flvjs","isSupported","getFeatureList","networkStreamIO","push","enableStashBuffer","autoCleanupSourceBuffer","stashInitialSize","fixAudioTimestampGap","os","name","getSupportedList","onVideoEvent","log","length","layout","onFinish","initialValues","Item","map","Option","htmlType","blank16x9","alt","onEmptied","onEncrypted","onLoadedData","onLoadedMetadata","onLoadStart","onStalled","onSuspend","onAbort","defaultActiveKey","TabPane","tab","title","column","size","label","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.36444502.chunk.js","sourcesContent":["import React from 'react';\n\nconst getFlvjs = (src) =>\n  new Promise((resolve) => {\n    if (global.flvjs) {\n      resolve(global.flvjs);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.flvjs);\n    script.onerror = () => resolve(global.flvjs);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nconst destroyPlayer = (player) => {\n  if (!player) {\n    return;\n  }\n  try {\n    player.pause();\n  } catch (errMsg) {}\n  try {\n    player.unload();\n  } catch (errMsg) {}\n  try {\n    player.detachMediaElement();\n  } catch (errMsg) {}\n  try {\n    player.destroy();\n  } catch (errMsg) {}\n};\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const [player, setPlayer] = React.useState(null);\n\n  const getVideo = React.useRef(getVideoElement);\n  const ref = React.useRef(src);\n  const configRef = React.useRef(config);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = src;\n    configRef.current = config;\n    return () => {\n      ref.current = '';\n    };\n  }, [src, config]);\n\n  React.useEffect(() => {\n    const play = async () => {\n      await getFlvjs('https://unpkg.com/flv.js/dist/flv.min.js');\n      if (!global.flvjs || ref.current !== src) {\n        debug('useFlvjs: 加载 flv.js 失败或者 src 已经变更');\n        return;\n      }\n      setPlayer(global.flvjs.createPlayer({ isLive: true, type: 'flv', url: src }, configRef.current));\n    };\n    setPlayer(null);\n    onMsgChangeRef.current(null);\n    if (src) {\n      play();\n    }\n  }, [src]);\n\n  React.useEffect(() => {\n    const cleanup = () => destroyPlayer(player);\n    if (!player) {\n      return cleanup;\n    }\n    const el = getVideo.current();\n    if (!el) {\n      return cleanup;\n    }\n    player.attachMediaElement(el);\n    player.load();\n    // player.play();\n    player.on(global.flvjs.Events.ERROR, (type, detail) => {\n      if (onMsgChangeRef && onMsgChangeRef.current) {\n        onMsgChangeRef.current({ type, detail });\n      }\n    });\n    return cleanup;\n  }, [player]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useFlvjs from './useFlvjs';\n\nconst Flvjs = (props) => {\n  // console.log(`Flvjs`);\n  useFlvjs(props);\n  return null;\n};\n\nFlvjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nFlvjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Flvjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nconst getHls = (src) =>\n  new Promise((resolve) => {\n    if (global.Hls) {\n      resolve(global.Hls);\n      return;\n    }\n    const script = global.document.createElement('script');\n    global.document.body.appendChild(script);\n    script.onload = () => resolve(global.Hls);\n    script.onerror = () => resolve(global.Hls);\n    script.async = true;\n    script.src = src;\n  });\n\n// eslint-disable-next-line no-console\nconst debug = console.error;\n\nconst destroyPlayer = (player) => {\n  if (player) {\n    try {\n      player.destroy();\n    } catch (errMsg) {}\n  }\n};\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const [player, setPlayer] = React.useState(null);\n  const getVideo = React.useRef(getVideoElement);\n  const ref = React.useRef('');\n  const configRef = React.useRef(null);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = src;\n    configRef.current = config;\n    return () => {\n      ref.current = '';\n    };\n  }, [src, config]);\n\n  React.useEffect(() => {\n    const play = async () => {\n      await getHls('https://unpkg.com/hls.js/dist/hls.min.js');\n      if (!global.Hls || ref.current !== src) {\n        debug('useHlsjs: 加载 hls.js 失败或者 src 已经变更');\n        return;\n      }\n      setPlayer(new global.Hls({ enableWorker: false, ...configRef.current }));\n    };\n\n    setPlayer(null);\n    onMsgChangeRef.current(null);\n    if (src) {\n      play();\n    }\n  }, [src]);\n\n  React.useEffect(() => {\n    const cleanup = () => destroyPlayer(player);\n    if (!player || !ref.current) {\n      return cleanup;\n    }\n    const currentSrc = ref.current;\n    const el = getVideo.current();\n    if (!el) {\n      return cleanup;\n    }\n    player.attachMedia(el);\n    player.once(global.Hls.Events.MEDIA_ATTACHED, () => {\n      if (currentSrc === ref.current) {\n        player.loadSource(ref.current);\n      }\n    });\n    // player.once(global.Hls.Events.MANIFEST_PARSED, () => {\n    //   if (currentSrc === ref.current) {\n    //     el.play();\n    //   }\n    // });\n    player.on(global.Hls.Events.ERROR, (e, info) => {\n      if (onMsgChangeRef && onMsgChangeRef.current && info && info.fatal) {\n        onMsgChangeRef.current({ type: info.type, detail: info.details });\n      }\n    });\n    return cleanup;\n  }, [player]);\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useHlsjs from './useHlsjs';\n\nconst Hlsjs = (props) => {\n  useHlsjs(props);\n  return null;\n};\n\nHlsjs.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nHlsjs.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  Hlsjs,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useNative from './useNative';\n\nconst Native = (props) => {\n  useNative(props);\n  return null;\n};\n\nNative.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nNative.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(\n  Native,\n  (p, n) => p.getVideoElement === n.getVideoElement && p.src === n.src && p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\n\nexport default ({ getVideoElement, src, onMsgChange }) => {\n  const ref = React.useRef({ getVideoElement, src: '', onMsgChange, loaded: false });\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    ref.current.getVideoElement = getVideoElement;\n  }, [src, getVideoElement]);\n\n  React.useEffect(() => {\n    // ref.current.onMsgChange(null);\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = src;\n    // el.play().catch(() => {});\n    el.load();\n  }, [src]);\n\n  // 页面切换时强制停止播放\n  const onUnload = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    el.pause();\n    el.src = '';\n    try {\n      el.load();\n    } catch (errMsg) {}\n  }, []);\n\n  const onError = React.useCallback((e) => {\n    const msg = { type: 'Error', detail: 'Unknown exception' };\n    if (e.target && e.target.error && e.target.error.code) {\n      msg.detail = `Code ${e.target.error.code}`;\n    }\n    ref.current.onMsgChange(msg);\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('beforeunload', onUnload);\n    global.addEventListener('pagehide', onUnload);\n    global.addEventListener('unload', onUnload);\n    return () => {\n      onUnload({ type: 'useEffect' });\n    };\n  }, [onUnload]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('error', onError);\n\n    return () => {\n      el.removeEventListener('error', onError);\n    };\n  }, [onError]);\n  return null;\n};\n","export default class SRSPlayer {\n  static isSupported() {\n    if (!MediaStream || !RTCPeerConnection || !RTCSessionDescription) {\n      return false;\n    }\n    if (!RTCPeerConnection.prototype.addTransceiver) {\n      return false;\n    }\n    return true;\n  }\n\n  constructor(url, config) {\n    // webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY\n    const matched = url.match(/^webrtc:\\/\\/([^/]+)(\\/.*)?$/);\n    if (!matched) {\n      return null;\n    }\n    this.url = url;\n    const protocol = 'string' === typeof config.protocol ? config.protocol : global.location.protocol;\n    const pathname = 'string' === typeof config.pathname ? config.pathname : '/rtc/v1/play/';\n    this.api = `${protocol}//${matched[1]}${pathname}`;\n    this.stream = new MediaStream();\n    this.trackList = [];\n    return this;\n  }\n\n  subscribe() {\n    if (!this.url) {\n      return null;\n    }\n    this.unsubscribe();\n    this.createRTCPeerConnection();\n    this.connectPeerConnection();\n    return this.stream;\n  }\n\n  unsubscribe() {\n    if (!this.pc) {\n      return;\n    }\n    this.closeRTCPeerConnection();\n  }\n\n  destroy() {\n    this.unsubscribe();\n\n    delete this.url;\n    delete this.api;\n    delete this.stream;\n    delete this.trackList;\n  }\n\n  createRTCPeerConnection() {\n    const pc = new RTCPeerConnection({\n      iceTransportPolicy: 'all',\n      bundlePolicy: 'max-bundle',\n      rtcpMuxPolicy: 'require',\n      iceCandidatePoolSize: '0',\n      sdpSemantics: 'unified-plan',\n      tcpCandidatePolicy: 'disable',\n      IceTransportsType: 'nohost',\n    });\n    // const pc = new RTCPeerConnection(null);\n    pc.addTransceiver('audio', { direction: 'recvonly' });\n    pc.addTransceiver('video', { direction: 'recvonly' });\n\n    // pc.onnegotiationneeded = (event) => console.log(event.type);\n    // pc.onicecandidate = (event) => console.log(event.type);\n    // pc.onicecandidateerror = (event) => console.log(event.type);\n    // pc.onsignalingstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.oniceconnectionstatechange = (event) => console.log(event.type);\n    // pc.onicegatheringstatechange = (event) => console.log(event.type);\n\n    pc.ontrack = (event) => {\n      // console.log(event.type);\n      this.stream.addTrack(event.track);\n      this.trackList.push(event.track);\n    };\n\n    // pc.onconnectionstatechange = (event) => {\n    //   console.log(`${event.type}: ${event.target.connectionState}`);\n    //   // if ('disconnected' === event.target.connectionState) {\n    //   //   onDisconnect();\n    //   // }\n    // };\n\n    this.pc = pc;\n    return this.pc;\n  }\n\n  connectPeerConnection() {\n    const { pc } = this;\n    return pc\n      .createOffer()\n      .then((offer) => pc.setLocalDescription(offer).then(() => offer))\n      .then((offer) => this.getSessionInfo({ sdp: offer.sdp }))\n      .then((sdp) => pc.setRemoteDescription(new RTCSessionDescription({ type: 'answer', sdp })));\n  }\n\n  closeRTCPeerConnection() {\n    if (this.trackList) {\n      this.trackList.forEach((track) => {\n        try {\n          this.stream.removeTrack(track);\n        } catch (errMsg) {}\n        try {\n          track.stop();\n        } catch (errMsg) {}\n      });\n      this.trackList = [];\n    }\n\n    if (!this.pc) {\n      return;\n    }\n    const { pc } = this;\n    delete this.pc;\n    pc.ontrack = () => {};\n    pc.onconnectionstatechange = () => {};\n\n    try {\n      pc.getSenders().forEach((it) => pc.removeTrack(it));\n    } catch (errMsg) {}\n    try {\n      pc.close();\n    } catch (errMsg) {}\n  }\n\n  getSessionInfo({ sdp }) {\n    return this.sendRequest(this.api, {\n      method: 'POST',\n      body: JSON.stringify({\n        api: this.api,\n        sdp,\n        streamurl: this.url,\n        clientip: null,\n        tid: Number(parseInt(new Date().getTime() * Math.random() * 100, 10))\n          .toString(16)\n          .substr(0, 7),\n      }),\n    }).then((info) => {\n      if (!info.sdp) {\n        return Promise.reject(info);\n      }\n      return info.sdp;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  sendRequest(url, opts) {\n    return fetch(url, {\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n      ...opts,\n    })\n      .then((response) => {\n        if (200 <= response.status && 300 > response.status) {\n          return response;\n        }\n        const errMsg = new Error(response.statusText);\n        errMsg.response = response;\n        return Promise.reject(errMsg);\n      })\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          return text ? JSON.parse(text) : {};\n        } catch (errMsg) {\n          return Promise.reject(errMsg);\n        }\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useSRSWebRTC from './useSRSWebRTC';\n\nconst SRSWebRTC = (props) => {\n  useSRSWebRTC(props);\n  return null;\n};\n\nSRSWebRTC.propTypes = {\n  getVideoElement: PropTypes.func.isRequired,\n  src: PropTypes.string,\n  config: PropTypes.object,\n  onMsgChange: PropTypes.func.isRequired,\n};\n\nSRSWebRTC.defaultProps = {\n  src: '',\n  config: null,\n};\n\nexport default React.memo(\n  SRSWebRTC,\n  (p, n) =>\n    p.getVideoElement === n.getVideoElement &&\n    p.src === n.src &&\n    p.config === n.config &&\n    p.onMsgChange === n.onMsgChange,\n);\n","import React from 'react';\nimport SRSPlayer from './SRSPlayer';\n// import SrsRtcPlayerAsync from './SrsRtcPlayerAsync';\n\nexport default ({ getVideoElement, src, config, onMsgChange }) => {\n  const ref = React.useRef(null);\n  const onMsgChangeRef = React.useRef(onMsgChange);\n\n  React.useEffect(() => {\n    ref.current = config;\n  }, [config]);\n\n  React.useEffect(() => {\n    onMsgChangeRef.current(null);\n    const el = getVideoElement();\n    if (!src || !el) {\n      return () => {};\n    }\n    const player = new SRSPlayer(src, { ...ref.current });\n    const stream = player.subscribe();\n    el.pause();\n    el.srcObject = stream;\n    el.load();\n    return () => {\n      el.srcObject = null;\n      player.destroy();\n    };\n  }, [src, getVideoElement]);\n\n  return null;\n};\n","import React from 'react';\n\nconst PlayerContext = React.createContext([{}, () => {}]);\n\nexport default PlayerContext;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst PreventedTip = ({ src, prevented }) => {\n  if (!src || !prevented) {\n    return null;\n  }\n  return <div className={styles.preventedTip}>视频播放被阻止</div>;\n};\n\nPreventedTip.propTypes = {\n  src: PropTypes.string,\n  prevented: PropTypes.bool.isRequired,\n};\n\nPreventedTip.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(PreventedTip, (p, n) => p.src === n.src && p.prevented === n.prevented);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst VideoMask = ({ src, showControls }) => {\n  return (\n    <button\n      type=\"button\"\n      className={styles.videoMask}\n      style={src ? { opacity: 0, background: 'transparent' } : {}}\n      onMouseMove={showControls}\n      onClick={showControls}\n    />\n  );\n};\n\nVideoMask.propTypes = {\n  src: PropTypes.string,\n  showControls: PropTypes.func.isRequired,\n};\n\nVideoMask.defaultProps = {\n  src: '',\n};\n\nexport default React.memo(VideoMask, (p, n) => p.src === n.src && p.showControls === n.showControls);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined, PlayCircleOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst PlayState = ({ src, prevented, loading, paused, ended, seeking, waiting, kernelMsg, onPlayClick }) => {\n  if (!src || loading || kernelMsg) {\n    return null;\n  }\n\n  if (waiting || seeking) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  if (prevented || paused || ended) {\n    return (\n      <button type=\"button\" className={styles.play} onClick={onPlayClick}>\n        <PlayCircleOutlined />\n      </button>\n    );\n  }\n  return null;\n};\n\nPlayState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  kernelMsg: PropTypes.object,\n  onPlayClick: PropTypes.func.isRequired,\n};\n\nPlayState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.kernelMsg === n.kernelMsg &&\n    p.onPlayClick === n.onPlayClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport styles from './index.module.less';\n\nconst TopState = ({ src, loading, kernelMsg }) => {\n  if (!src) {\n    return null;\n  }\n\n  if (kernelMsg) {\n    return (\n      <div className={styles.kernelMsg}>\n        {kernelMsg.type}: {kernelMsg.detail}\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className={styles.loading}>\n        <LoadingOutlined />\n      </div>\n    );\n  }\n  return null;\n};\n\nTopState.propTypes = {\n  src: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  // duration: PropTypes.number.isRequired,\n  // currentTime: PropTypes.number.isRequired,\n  kernelMsg: PropTypes.object,\n};\n\nTopState.defaultProps = {\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  TopState,\n  (p, n) =>\n    p.src === n.src &&\n    p.loading === n.loading &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.kernelMsg === n.kernelMsg,\n);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\nimport bgImg from './bg.png';\n\nconst Controls = ({ hiding, dispatch, children }) => {\n  const onMouseEnter = React.useCallback(() => {\n    if (global.matchMedia) {\n      const matched = global.matchMedia('(hover: none), (pointer: coarse)');\n      if (matched && matched.matches) {\n        return;\n      }\n    }\n    dispatch({ type: 'update', payload: { controlsHovering: true } });\n  }, [dispatch]);\n\n  const onMouseLeave = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { controlsHovering: false } });\n  }, [dispatch]);\n\n  return (\n    <div\n      className={styles.controls}\n      style={{ backgroundImage: `url(${bgImg})`, transform: hiding ? 'translate(0, 48px)' : 'translate(0, 0)' }}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n    </div>\n  );\n};\n\nControls.propTypes = {\n  hiding: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nControls.defaultProps = {\n  // buffered: null,\n};\n\nexport default React.memo(\n  Controls,\n  (p, n) => p.hiding === n.hiding && p.dispatch === n.dispatch && p.children === n.children,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './index.module.less';\n\nconst ControlBar = ({ children, extra }) => {\n  return (\n    <div className={styles.controlBar}>\n      <div className={styles.flexItem}>{children}</div>\n      {extra}\n    </div>\n  );\n};\n\nControlBar.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  extra: PropTypes.node.isRequired,\n};\n\n// ControlBar.defaultProps = {\n//   // buffered: null,\n// };\n\nexport default React.memo(ControlBar, (p, n) => p.children === n.children && p.extra === n.extra);\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\nimport styles from './index.module.less';\n\nconst getBufferedEnd = (currentTime, buffered) => {\n  if (!buffered) {\n    return 0;\n  }\n  for (let i = buffered.length - 1; 0 <= i; i -= 1) {\n    const end = buffered.end(i);\n    if (currentTime <= end && buffered.start(i) <= currentTime) {\n      return end;\n    }\n  }\n  return 0;\n};\n\nconst getEventXCoordinate = (e) => {\n  if (e.changedTouches && 1 <= e.changedTouches.length) {\n    return e.changedTouches[0].pageX;\n  }\n  return e.clientX || 0;\n};\n\nconst getValue = (e, rect, duration) => {\n  const w = getEventXCoordinate(e) - rect.left;\n  if (0 >= w) {\n    return 0;\n  }\n  if (w >= rect.width) {\n    return duration;\n  }\n  return Math.round((duration * w) / rect.width);\n};\n\nconst getBufferedScaleX = ({ buffered, currentTime, sliding, duration }) => {\n  if (0 >= duration || sliding) {\n    return 0;\n  }\n  const e = getBufferedEnd(currentTime, buffered);\n  return (e / duration).toFixed(3);\n};\n\nconst getTrackTranslateX = ({ duration, currentTime }) => {\n  if (0 === duration) {\n    return -100;\n  }\n  return ((100 * currentTime) / duration - 100).toFixed(1);\n};\n\nconst getMouseTranslateX = ({ duration, tooltip }) => {\n  if (0 >= duration) {\n    return 0;\n  }\n  return ((100 * tooltip) / duration).toFixed(1);\n};\n\nconst MouseTooltip = React.memo(({ duration, tooltip }) => {\n  const translateX = getMouseTranslateX({ duration, tooltip });\n  return (\n    <div className={styles.tooltip} style={{ transform: `translateX(${translateX}%)` }}>\n      <div className={styles.tip}>{numeral(tooltip).format('00:00:00')}</div>\n    </div>\n  );\n});\n\nMouseTooltip.propTypes = {\n  duration: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n};\n\nconst TimeSlider = React.memo(({ currentTime, duration, buffered, onChange, sliding, value, tooltip, dispatch }) => {\n  const ref = React.useRef({});\n  const sliderRef = React.useRef(null);\n\n  const onClick = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n\n      const rect = e.currentTarget.getBoundingClientRect();\n      const v = getValue(e, rect, duration);\n      onChange(v);\n    },\n    [onChange, duration, dispatch],\n  );\n\n  const onMouseDown = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      const react = sliderRef.current.getBoundingClientRect();\n      ref.current.react = { left: react.left, width: react.width };\n      dispatch({ type: 'update', payload: { sliding: true } });\n    },\n    [dispatch],\n  );\n\n  const update = React.useCallback(() => {\n    if (!ref.current.payload) {\n      return;\n    }\n    dispatch({ type: 'update', payload: ref.current.payload });\n    delete ref.current.payload;\n  }, [dispatch]);\n\n  const onMouseUp = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch({ type: 'update', payload: { sliding: false } });\n      if (ref.current.react) {\n        const v = getValue(e, ref.current.react, duration);\n        ref.current.payload = { value: v };\n        update();\n        onChange(v);\n      }\n    },\n    [onChange, duration, update, dispatch],\n  );\n\n  const onMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.value = v;\n      } else {\n        ref.current.payload = { value: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  React.useEffect(() => {\n    if (sliding) {\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchcancel', onMouseUp);\n      document.addEventListener('touchend', onMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', onMouseMove);\n        document.removeEventListener('mouseup', onMouseUp);\n\n        document.removeEventListener('touchmove', onMouseMove);\n        document.removeEventListener('touchcancel', onMouseUp);\n        document.removeEventListener('touchend', onMouseUp);\n      };\n    }\n    return () => {};\n  }, [sliding, onMouseMove, onMouseUp]);\n\n  const onSliderMouseOver = React.useCallback((e) => {\n    e.preventDefault();\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  const onSliderMouseMove = React.useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!ref.current.react) {\n        return;\n      }\n      const v = getValue(e, ref.current.react, duration);\n      if (ref.current.payload) {\n        ref.current.payload.tooltip = v;\n      } else {\n        ref.current.payload = { tooltip: v };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [duration, update],\n  );\n\n  const onResize = React.useCallback((e) => {\n    e.preventDefault();\n    if (!sliderRef || !sliderRef.current) {\n      return;\n    }\n    const react = sliderRef.current.getBoundingClientRect();\n    ref.current.react = { left: react.left, width: react.width };\n  }, []);\n\n  React.useEffect(() => {\n    global.addEventListener('resize', onResize);\n    return () => {\n      global.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current = {};\n    };\n  }, []);\n\n  const bufferedScaleX = getBufferedScaleX({ buffered, currentTime, sliding, duration });\n  const trackTranslateX = getTrackTranslateX({ duration, currentTime: sliding ? value : currentTime });\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={sliding ? styles.slidingSlider : styles.slider}\n      ref={sliderRef}\n      onClick={onClick}\n      onKeyDown={() => {}}\n      onMouseOver={onSliderMouseOver}\n      onMouseMove={onSliderMouseMove}\n      onFocus={() => {}}\n    >\n      <button type=\"button\" className={styles.sliderButton} onTouchStart={onMouseDown}>\n        <span className={styles.slidingTip} style={{ opacity: sliding ? 1 : 0 }}>\n          快进到：{numeral(value).format('00:00:00')}\n        </span>\n      </button>\n      <div className={styles.sliderRail}>\n        <div className={styles.sliderBuffered} style={{ transform: `scaleX(${bufferedScaleX})` }} />\n        <div className={styles.sliderTrack} style={{ transform: `translateX(${trackTranslateX}%)` }} />\n      </div>\n      <div className={styles.sliderHandleRail} style={{ transform: `translateX(${trackTranslateX}%)` }}>\n        <button type=\"button\" className={styles.sliderHandle} onMouseDown={onMouseDown} onTouchStart={onMouseDown} />\n      </div>\n      <MouseTooltip duration={duration} tooltip={sliding ? value : tooltip} />\n    </div>\n  );\n});\n\nTimeSlider.propTypes = {\n  currentTime: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  sliding: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n  tooltip: PropTypes.number.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nTimeSlider.defaultProps = {\n  buffered: null,\n};\n\nexport default React.memo(\n  TimeSlider,\n  (p, n) =>\n    p.currentTime === n.currentTime &&\n    p.duration === n.duration &&\n    p.buffered === n.buffered &&\n    p.onChange === n.onChange &&\n    p.sliding === n.sliding &&\n    p.value === n.value &&\n    p.tooltip === n.tooltip &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CaretRightOutlined, PauseOutlined } from '@ant-design/icons';\n// import styles from './index.module.less';\n\nconst PlayButton = ({ prevented, paused, ended, onPlayClick, onPauseClick }) => {\n  return prevented || paused || ended ? (\n    <button type=\"button\" onClick={onPlayClick}>\n      <CaretRightOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={onPauseClick}>\n      <PauseOutlined />\n    </button>\n  );\n};\n\nPlayButton.propTypes = {\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayButton,\n  (p, n) =>\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.ended === n.ended &&\n    p.onPlayClick === n.onPlayClick &&\n    p.onPauseClick === n.onPauseClick,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from 'antd';\nimport Icon from '@ant-design/icons';\n// import 'antd/lib/slider/style/index.css';\nimport styles from './index.module.less';\n\nimport { ReactComponent as MutedSvg } from './muted.svg';\nimport { ReactComponent as UnmutedSvg } from './unmuted.svg';\n\nconst Volume = ({ muted, volume, changeVolume, onMutedClick }) => {\n  return (\n    <span className={styles.volume}>\n      {(muted || 0 === volume) && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={MutedSvg} />\n        </button>\n      )}\n      {!muted && 0 !== volume && (\n        <button type=\"button\" onClick={onMutedClick}>\n          <Icon component={UnmutedSvg} />\n        </button>\n      )}\n      <span className={styles.volumeSlider}>\n        <Slider value={volume * 100} onChange={(v) => changeVolume(v / 100)} max={100} />\n      </span>\n    </span>\n  );\n};\n\nVolume.propTypes = {\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  Volume,\n  (p, n) =>\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolum,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport numeral from 'numeral';\n\nimport styles from './index.module.less';\n\nconst PlayTime = ({ live, duration, currentTime }) => {\n  return (\n    <span className={styles.controlText}>\n      {numeral(Math.round(currentTime)).format('00:00:00')}\n      {live ? (\n        <span className={styles.controlText}>\n          <span className={styles.liveDot} />\n          直播\n        </span>\n      ) : (\n        ` / ${numeral(Math.round(duration)).format('00:00:00')}`\n      )}\n    </span>\n  );\n};\n\nPlayTime.propTypes = {\n  live: PropTypes.bool.isRequired,\n  duration: PropTypes.number.isRequired,\n  currentTime: PropTypes.number.isRequired,\n};\n\nexport default React.memo(\n  PlayTime,\n  (p, n) => p.live === n.live && p.duration === n.duration && p.currentTime === n.currentTime,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, Menu } from 'antd';\n\nimport styles from './index.module.less';\n\nconst PlayRate = ({ live, playbackRate, changePlaybackRate, visible, dispatch }) => {\n  const show = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      dispatch({ type: 'update', payload: { rateMenuVisible: true } });\n    },\n    [dispatch],\n  );\n\n  const hide = React.useCallback(() => dispatch({ type: 'update', payload: { rateMenuVisible: false } }), [dispatch]);\n\n  const onMenuClick = React.useCallback(\n    (e) => {\n      changePlaybackRate(parseFloat(e.key, 10));\n      dispatch({ type: 'update', payload: { rateMenuVisible: false } });\n    },\n    [changePlaybackRate, dispatch],\n  );\n\n  React.useEffect(() => {\n    document.body.addEventListener('click', hide);\n    return () => document.body.removeEventListener('click', hide);\n  }, [hide]);\n\n  if (live) {\n    return null;\n  }\n\n  return (\n    <Dropdown\n      visible={visible}\n      overlay={\n        <Menu selectedKeys={[playbackRate.toString()]} onClick={onMenuClick}>\n          <Menu.Item key=\"0.25\">&nbsp;&nbsp;0.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"0.5\">&nbsp;&nbsp;0.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1\">&nbsp;&nbsp;1 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.25\">&nbsp;&nbsp;1.25 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"1.5\">&nbsp;&nbsp;1.5 倍速&nbsp;&nbsp;</Menu.Item>\n          <Menu.Item key=\"2\">&nbsp;&nbsp;2 倍速&nbsp;&nbsp;</Menu.Item>\n        </Menu>\n      }\n      placement=\"topRight\"\n      trigger={[]}\n    >\n      <button type=\"button\" className={styles.textBtn} onClick={show}>\n        倍速\n      </button>\n    </Dropdown>\n  );\n};\n\nPlayRate.propTypes = {\n  live: PropTypes.bool.isRequired,\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  visible: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PlayRate,\n  (p, n) =>\n    p.live === n.live &&\n    p.playbackRate === n.playbackRate &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.visible === n.visible &&\n    p.dispatch === n.dispatch,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FullscreenExitOutlined, FullscreenOutlined } from '@ant-design/icons';\n\nconst FullscreenButton = ({ fullscreen, requestFullscreen, exitFullscreen }) => {\n  return fullscreen ? (\n    <button type=\"button\" onClick={exitFullscreen}>\n      <FullscreenExitOutlined />\n    </button>\n  ) : (\n    <button type=\"button\" onClick={requestFullscreen}>\n      <FullscreenOutlined />\n    </button>\n  );\n};\n\nFullscreenButton.propTypes = {\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  FullscreenButton,\n  (p, n) =>\n    p.fullscreen === n.fullscreen &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './index.module.less';\n\nconst PictureInPicture = ({ pictureInPictureEnabled, pip, exitPictureInPicture, requestPictureInPicture }) => {\n  if (!pictureInPictureEnabled) {\n    return null;\n  }\n  return (\n    <button type=\"button\" className={styles.textBtn} onClick={pip ? exitPictureInPicture : requestPictureInPicture}>\n      画中画\n    </button>\n  );\n};\n\nPictureInPicture.propTypes = {\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n};\n\nexport default React.memo(\n  PictureInPicture,\n  (p, n) =>\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestPictureInPicture === n.requestPictureInPicture,\n);\n","import React from 'react';\n\nconst initialState = {\n  controlsHovering: false,\n  sliding: false,\n  value: 0,\n  tooltip: 0,\n  hiding: false,\n  rateMenuVisible: false,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default () => {\n  const [{ controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible }, dispatch] = React.useReducer(\n    reducer,\n    initialState,\n  );\n  // const ref = React.useRef({});\n\n  React.useEffect(() => {\n    // console.log('usePlayerSkin');\n    return () => {\n      dispatch({ type: 'reset' });\n    };\n  }, []);\n\n  return {\n    dispatch,\n    controlsHovering,\n    hiding,\n    sliding,\n    value,\n    tooltip,\n    rateMenuVisible,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PreventedTip from './PreventedTip';\nimport VideoMask from './VideoMask';\nimport PlayState from './PlayState';\nimport TopState from './TopState';\n\nimport Controls from './Controls';\nimport ControlBar from './ControlBar';\nimport TimeSlider from './TimeSlider';\nimport PlayButton from './Controls/PlayButton';\nimport Volume from './Volume';\nimport PlayTime from './PlayTime';\nimport PlayRate from './Controls/PlayRate';\nimport FullscreenButton from './Controls/FullscreenButton';\nimport PictureInPicture from './Controls/PictureInPicture';\n\nimport usePlayerSkin from './usePlayerSkin';\nimport useAutoHide from './useAutoHide';\nimport 'antd/lib/tooltip/style/index.css';\nimport 'antd/lib/slider/style/index.css';\nimport 'antd/lib/dropdown/style/index.css';\nimport styles from './index.module.less';\n\nconst PlayerSkin = ({\n  live,\n  src,\n  prevented,\n  loading,\n  paused,\n  ended,\n  seeking,\n  waiting,\n  onPlayClick,\n  onPauseClick,\n  duration,\n  buffered,\n  currentTime,\n  changeCurrentTime,\n  muted,\n  volume,\n  changeVolume,\n  onMutedClick,\n  playbackRate,\n  changePlaybackRate,\n  pictureInPictureEnabled,\n  pip,\n  requestPictureInPicture,\n  exitPictureInPicture,\n  fullscreen,\n  requestFullscreen,\n  exitFullscreen,\n  kernelMsg,\n}) => {\n  const { dispatch, controlsHovering, hiding, sliding, value, tooltip, rateMenuVisible } = usePlayerSkin();\n\n  const { show } = useAutoHide({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    kernelMsg,\n    dispatch,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n  });\n\n  return (\n    <div className={styles.playerSkin}>\n      <PreventedTip src={src} prevented={prevented} />\n      <VideoMask src={src} showControls={show} />\n      <PlayState\n        src={src}\n        loading={loading}\n        prevented={prevented}\n        paused={paused}\n        ended={ended}\n        waiting={waiting}\n        seeking={seeking}\n        kernelMsg={kernelMsg}\n        onPlayClick={onPlayClick}\n      />\n      <Controls hiding={hiding} dispatch={dispatch}>\n        {false === live && (\n          <TimeSlider\n            currentTime={currentTime}\n            duration={duration}\n            buffered={buffered}\n            onChange={changeCurrentTime}\n            sliding={sliding}\n            value={value}\n            tooltip={tooltip}\n            dispatch={dispatch}\n          />\n        )}\n        <ControlBar\n          extra={\n            <>\n              <PictureInPicture\n                pictureInPictureEnabled={pictureInPictureEnabled}\n                pip={pip}\n                requestPictureInPicture={requestPictureInPicture}\n                exitPictureInPicture={exitPictureInPicture}\n              />\n              <PlayRate\n                live={live}\n                playbackRate={playbackRate}\n                changePlaybackRate={changePlaybackRate}\n                dispatch={dispatch}\n                visible={rateMenuVisible}\n              />\n              <FullscreenButton\n                fullscreen={fullscreen}\n                requestFullscreen={requestFullscreen}\n                exitFullscreen={exitFullscreen}\n              />\n            </>\n          }\n        >\n          <PlayButton\n            prevented={prevented}\n            paused={paused}\n            ended={ended}\n            onPauseClick={onPauseClick}\n            onPlayClick={onPlayClick}\n          />\n          <Volume muted={muted} volume={volume} onMutedClick={onMutedClick} changeVolume={changeVolume} />\n          <PlayTime live={live} currentTime={currentTime} duration={duration} />\n        </ControlBar>\n      </Controls>\n      <TopState src={src} loading={loading} kernelMsg={kernelMsg} />\n    </div>\n  );\n};\n\nPlayerSkin.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string,\n  // controls: PropTypes.bool.isRequired,\n  // state\n  loading: PropTypes.bool.isRequired,\n  prevented: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n  ended: PropTypes.bool.isRequired,\n  seeking: PropTypes.bool.isRequired,\n  waiting: PropTypes.bool.isRequired,\n  onPlayClick: PropTypes.func.isRequired,\n  onPauseClick: PropTypes.func.isRequired,\n  // time\n  duration: PropTypes.number.isRequired,\n  buffered: PropTypes.object,\n  currentTime: PropTypes.number.isRequired,\n  changeCurrentTime: PropTypes.func.isRequired,\n  // volume\n  muted: PropTypes.bool.isRequired,\n  volume: PropTypes.number.isRequired,\n  changeVolume: PropTypes.func.isRequired,\n  onMutedClick: PropTypes.func.isRequired,\n  // playbackRate\n  playbackRate: PropTypes.number.isRequired,\n  changePlaybackRate: PropTypes.func.isRequired,\n  // pip\n  pictureInPictureEnabled: PropTypes.bool.isRequired,\n  pip: PropTypes.bool.isRequired,\n  requestPictureInPicture: PropTypes.func.isRequired,\n  exitPictureInPicture: PropTypes.func.isRequired,\n  // fullscreen\n  fullscreen: PropTypes.bool.isRequired,\n  requestFullscreen: PropTypes.func.isRequired,\n  exitFullscreen: PropTypes.func.isRequired,\n  // kernel\n  kernelMsg: PropTypes.object,\n};\n\nPlayerSkin.defaultProps = {\n  live: false,\n  src: '',\n  buffered: null,\n  kernelMsg: null,\n};\n\nexport default React.memo(\n  PlayerSkin,\n  (p, n) =>\n    p.live === n.live &&\n    p.src === n.src &&\n    // p.controls === n.controls &&\n    p.loading === n.loading &&\n    p.prevented === n.prevented &&\n    p.paused === n.paused &&\n    p.seeking === n.seeking &&\n    p.waiting === n.waiting &&\n    p.duration === n.duration &&\n    p.currentTime === n.currentTime &&\n    p.buffered === n.buffered &&\n    p.muted === n.muted &&\n    p.volume === n.volume &&\n    p.playbackRate === n.playbackRate &&\n    p.pictureInPictureEnabled === n.pictureInPictureEnabled &&\n    p.pip === n.pip &&\n    p.fullscreen === n.fullscreen &&\n    p.kernelMsg === n.kernelMsg &&\n    p.getVideoElement === n.getVideoElement &&\n    p.onPauseClick === n.onPauseClick &&\n    p.onPlayClick === n.onPlayClick &&\n    p.changeCurrentTime === n.changeCurrentTime &&\n    p.onMutedClick === n.onMutedClick &&\n    p.changeVolume === n.changeVolume &&\n    p.changePlaybackRate === n.changePlaybackRate &&\n    p.requestPictureInPicture === n.requestPictureInPicture &&\n    p.exitPictureInPicture === n.exitPictureInPicture &&\n    p.requestFullscreen === n.requestFullscreen &&\n    p.exitFullscreen === n.exitFullscreen,\n);\n","import React from 'react';\n\nexport default ({\n  src,\n  loading,\n  prevented,\n  paused,\n  ended,\n  waiting,\n  seeking,\n  kernelMsg,\n  controlsHovering,\n  sliding,\n  rateMenuVisible,\n  dispatch,\n}) => {\n  const ref = React.useRef({});\n\n  const animationFrameCallback = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.requestID || true === ref.current.hiding) {\n        return;\n      }\n      if (!ref.current.timestamp) {\n        ref.current.timestamp = timestamp;\n      }\n      if (3 * 1000 > timestamp - ref.current.timestamp) {\n        ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n        return;\n      }\n      dispatch({ type: 'update', payload: { hiding: true } });\n      ref.current.hiding = true;\n      delete ref.current.requestID;\n      delete ref.current.timestamp;\n    },\n    [dispatch],\n  );\n\n  const startAutoHide = React.useCallback(() => {\n    if (false !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    delete ref.current.timestamp;\n    if (ref.current.requestID) {\n      return;\n    }\n    ref.current.requestID = global.requestAnimationFrame(animationFrameCallback);\n  }, [dispatch, animationFrameCallback]);\n\n  const stopAutoHide = React.useCallback(() => {\n    if (true !== ref.current.hiding) {\n      dispatch({ type: 'update', payload: { hiding: false } });\n      ref.current.hiding = false;\n    }\n    if (ref.current.requestID) {\n      global.cancelAnimationFrame(ref.current.requestID);\n    }\n    delete ref.current.requestID;\n    delete ref.current.timestamp;\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    if (\n      !src ||\n      loading ||\n      prevented ||\n      paused ||\n      ended ||\n      waiting ||\n      seeking ||\n      sliding ||\n      rateMenuVisible ||\n      controlsHovering ||\n      kernelMsg\n    ) {\n      stopAutoHide();\n    } else {\n      startAutoHide();\n    }\n  }, [\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    waiting,\n    seeking,\n    controlsHovering,\n    sliding,\n    rateMenuVisible,\n    kernelMsg,\n    startAutoHide,\n    stopAutoHide,\n  ]);\n\n  return { show: startAutoHide };\n};\n","import React from 'react';\nimport PlayerContext from '../PlayerContext';\nimport PlayerSkin from '../PlayerSkin';\n\nconst PlayerSkinWapper = () => {\n  const props = React.useContext(PlayerContext);\n  return <PlayerSkin {...props} />;\n};\n\nexport default PlayerSkinWapper;\n","import React from 'react';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  playbackRate: 1,\n  enabled: !!document.pictureInPictureEnabled,\n  pictureInPictureEnabled: !!document.pictureInPictureEnabled,\n  pip: false,\n  fullscreen: false,\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      playbackRate,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n  const ref = React.useRef({ src });\n\n  const clearUpdateTimeout = React.useCallback(() => {\n    if (ref.current.timeout) {\n      global.clearTimeout(ref.current.timeout);\n    }\n    delete ref.current.timeout;\n    delete ref.current.payload;\n  }, []);\n\n  const timeoutCallback = React.useCallback(() => {\n    const { payload } = ref.current;\n    clearUpdateTimeout();\n    // debugger;\n    if (payload) {\n      dispatch({ type: 'update', payload });\n    }\n  }, [dispatch, clearUpdateTimeout]);\n\n  const updateState = React.useCallback(\n    (payload, sync = false) => {\n      ref.current.payload = { ...ref.current.payload, ...payload };\n      if (sync) {\n        timeoutCallback();\n        return;\n      }\n      if (ref.current.timeout) {\n        return;\n      }\n      ref.current.timeout = global.setTimeout(timeoutCallback, 100);\n    },\n    [timeoutCallback],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      if (ref.current.timeout) {\n        global.clearTimeout(ref.current.timeout);\n      }\n      ref.current = {};\n    };\n  }, []);\n\n  React.useEffect(() => {\n    clearUpdateTimeout();\n    dispatch({ type: 'reset' });\n    // ref.current.src = src;\n  }, [src, clearUpdateTimeout]);\n\n  return {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  };\n};\n","import React from 'react';\nimport usePlayerReducer from '../hooks/usePlayerReducer';\nimport useVideoState from '../hooks/useVideoState';\nimport useTime from '../hooks/useTime';\nimport useVolume from '../hooks/useVolume';\nimport usePlaybackRate from '../hooks/usePlaybackRate';\nimport usePiP from '../hooks/usePiP';\nimport useFullscreen from '../hooks/useFullscreen';\n\nexport default ({ src, live, onKernelError }) => {\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n\n  const {\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    updateState,\n  } = usePlayerReducer({ src });\n\n  const getVideoElement = React.useCallback(() => videoRef && videoRef.current, []);\n  const getPlayerElement = React.useCallback(() => playerRef && playerRef.current, []);\n\n  const onMsgChange = React.useCallback(\n    (msg) => {\n      // debugger;\n      updateState({ kernelMsg: msg });\n      if (onKernelError) {\n        onKernelError(msg);\n      }\n    },\n    [updateState, onKernelError],\n  );\n\n  const { onPauseClick, onPlayClick } = useVideoState({\n    src,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    updateState,\n    getVideoElement,\n  });\n\n  const { changeCurrentTime } = useTime({ src, duration, currentTime, buffered, updateState, getVideoElement });\n  const { onMutedClick, changeVolume } = useVolume({ src, muted, volume, updateState, getVideoElement });\n  const { changePlaybackRate } = usePlaybackRate({ src, live, playbackRate, updateState, getVideoElement });\n  const { requestPictureInPicture, exitPictureInPicture } = usePiP({ src, pip, updateState, getVideoElement });\n  const { requestFullscreen, exitFullscreen } = useFullscreen({ updateState, getVideoElement, getPlayerElement });\n\n  return {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  };\n};\n","import React from 'react';\n\nexport default ({ src, loading, prevented, ended, updateState, getVideoElement }) => {\n  const ref = React.useRef({ getVideoElement, loading, prevented, ended });\n\n  const onPlayClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      if (ref.current.ended) {\n        el.currentTime = 0;\n      }\n      const promise = el.play();\n      if (!promise || !promise.then) {\n        return;\n      }\n      // debugger;\n      // TODO: src 改变了\n      promise\n        .then(() => updateState({ prevented: false, loading: false }))\n        .catch(() => updateState({ prevented: true, loading: false }));\n    }\n    updateState({ paused: false }, true);\n  }, [updateState]);\n\n  const onPauseClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.pause();\n    }\n    updateState({ paused: true }, true);\n  }, [updateState]);\n\n  const onCanPlay = React.useCallback(() => {\n    if (ref.current.loading) {\n      updateState({ loading: false });\n      onPlayClick();\n    }\n    updateState({ waiting: false });\n    // setWaiting(false);\n  }, [updateState, onPlayClick]);\n\n  const onPause = React.useCallback(() => {\n    // setPaused(true);\n    updateState({ paused: true });\n  }, [updateState]);\n\n  const onPlay = React.useCallback(() => {\n    // setPaused(false);\n    // setEnded(false);\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onPlaying = React.useCallback(() => {\n    // setPaused(false);\n    // setEnded(false);\n    updateState({ paused: false, ended: false });\n  }, [updateState]);\n\n  const onEnded = React.useCallback(() => {\n    // setEnded(true);\n    updateState({ ended: true });\n  }, [updateState]);\n\n  const onSeeked = React.useCallback(() => {\n    // setSeeking(false);\n    updateState({ seeking: false });\n  }, [updateState]);\n\n  const onSeeking = React.useCallback(() => {\n    // setSeeking(true);\n    updateState({ seeking: true });\n  }, [updateState]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    // setWaiting(false);\n    updateState({ waiting: false });\n  }, [updateState]);\n\n  const onWaiting = React.useCallback(() => {\n    // setWaiting(true);\n    updateState({ waiting: true });\n  }, [updateState]);\n\n  const onDocumentClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return;\n    }\n    document.removeEventListener('click', onDocumentClick);\n    if (ref.current.prevented) {\n      el.play();\n      ref.current.loaded = true;\n      return;\n    }\n    if (ref.current.loaded) {\n      return;\n    }\n    ref.current.loaded = true;\n    if (!ref.current.src) {\n      el.src = '';\n      try {\n        el.play();\n      } catch (e) {}\n      el.pause();\n    }\n  }, []);\n\n  // DONE: src 改变后 reset\n  // React.useEffect(() => {\n  //   setLoading(!!src);\n  //   setPaused(false);\n  //   setEnded(false);\n  //   setSeeking(false);\n  //   setWaiting(false);\n  // }, [src]);\n  React.useEffect(() => {\n    ref.current.src = src;\n    if (src) {\n      updateState({ loading: true }, true);\n    }\n  }, [src, updateState]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.prevented = prevented;\n    ref.current.ended = ended;\n  }, [loading, prevented, ended]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('canplay', onCanPlay);\n    el.addEventListener('pause', onPause);\n    el.addEventListener('play', onPlay);\n    el.addEventListener('playing', onPlaying);\n    el.addEventListener('ended', onEnded);\n    el.addEventListener('seeked', onSeeked);\n    el.addEventListener('seeking', onSeeking);\n    el.addEventListener('canplaythrough', onCanPlayThrough);\n    el.addEventListener('waiting', onWaiting);\n    document.addEventListener('click', onDocumentClick);\n    return () => {\n      el.removeEventListener('canplay', onCanPlay);\n      el.removeEventListener('pause', onPause);\n      el.removeEventListener('play', onPlay);\n      el.removeEventListener('playing', onPlaying);\n      el.removeEventListener('ended', onEnded);\n      el.removeEventListener('seeked', onSeeked);\n      el.removeEventListener('seeking', onSeeking);\n      el.removeEventListener('canplaythrough', onCanPlayThrough);\n      el.removeEventListener('waiting', onWaiting);\n      document.removeEventListener('click', onDocumentClick);\n    };\n  }, [\n    onCanPlay,\n    onPause,\n    onPlay,\n    onPlaying,\n    onEnded,\n    onSeeked,\n    onSeeking,\n    onCanPlayThrough,\n    onWaiting,\n    onDocumentClick,\n  ]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ src, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement, timestamp: 0, payload: null });\n  // const updateRef = React.useRef(null);\n\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.target.duration;\n      // TODO: 同步更新\n      updateState({ duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 });\n    },\n    [updateState],\n  );\n\n  const update = React.useCallback(\n    (timestamp) => {\n      if (!ref.current.payload) {\n        return;\n      }\n      // TODO: ref.current.timestamp isNaN\n      if (200 > timestamp - ref.current.timestamp) {\n        global.requestAnimationFrame(update);\n        return;\n      }\n      updateState(ref.current.payload);\n      ref.current.timestamp = timestamp;\n      ref.current.payload = null;\n    },\n    [updateState],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (!ref.current || Number.isNaN(e.target.currentTime)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.currentTime = e.target.currentTime;\n      } else {\n        ref.current.payload = { currentTime: e.target.currentTime };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => {\n      if (!ref.current || !(e.target.buffered instanceof TimeRanges)) {\n        return;\n      }\n      if (ref.current.payload) {\n        ref.current.payload.buffered = e.target.buffered;\n      } else {\n        ref.current.payload = { buffered: e.target.buffered };\n        global.requestAnimationFrame(update);\n      }\n    },\n    [update],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v)) {\n        return;\n      }\n      const el = ref.current.getVideoElement();\n      if (el) {\n        el.currentTime = v;\n      }\n      ref.current.payload = null;\n      updateState({ currentTime: v });\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    ref.current.timestamp = 0;\n    ref.current.payload = null;\n  }, [src]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('durationchange', onDurationChange);\n    el.addEventListener('timeupdate', onTimeUpdate);\n    el.addEventListener('progress', onProgress);\n    return () => {\n      el.removeEventListener('durationchange', onDurationChange);\n      el.removeEventListener('timeupdate', onTimeUpdate);\n      el.removeEventListener('progress', onProgress);\n    };\n  }, [onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ src, muted, volume, updateState, getVideoElement }) => {\n  const ref = React.useRef({ muted, volume, getVideoElement });\n\n  const onVolumeChange = React.useCallback(\n    (e) => {\n      const v = e.target.volume;\n      // setVolume(v);\n      // setMuted(0 === v ? true : e.target.muted);\n      updateState({ volume: v, muted: 0 === v ? true : e.target.muted });\n    },\n    [updateState],\n  );\n\n  const onMutedClick = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      const payload = { muted: !ref.current.muted };\n      el.muted = payload.muted;\n      if (0 === ref.current.volume && ref.current.muted) {\n        payload.volume = 1;\n        el.volume = payload.volume;\n      }\n      updateState(payload, true);\n    }\n  }, [updateState]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      const el = ref.current.getVideoElement();\n      const payload = { volume: v };\n      if (el) {\n        el.volume = v;\n      }\n      if (0 !== v && ref.current.muted) {\n        payload.muted = false;\n      }\n      updateState(payload, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      el.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [onVolumeChange]);\n\n  React.useEffect(() => {\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [muted, volume]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.muted = false;\n      el.volume = 1;\n    }\n  }, [src]);\n\n  return { onMutedClick, changeVolume };\n};\n","import React from 'react';\n\nexport default ({ src, live, updateState, getVideoElement }) => {\n  const ref = React.useRef({ live, getVideoElement });\n\n  const onRateChange = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.target.playbackRate)) {\n        return;\n      }\n      updateState({ playbackRate: e.target.playbackRate });\n    },\n    [updateState],\n  );\n\n  const changePlaybackRate = React.useCallback(\n    (r) => {\n      if (Number.isNaN(r)) {\n        return;\n      }\n      const v = ref.current.live ? 1 : r;\n      const el = ref.current.getVideoElement();\n      if (!el) {\n        return;\n      }\n      el.playbackRate = v;\n      updateState({ playbackRate: v }, true);\n    },\n    [updateState],\n  );\n\n  React.useEffect(() => {\n    ref.current.live = live;\n    if (live) {\n      changePlaybackRate(1);\n    }\n  }, [live, changePlaybackRate]);\n\n  React.useEffect(() => {\n    const el = getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('ratechange', onRateChange);\n    return () => {\n      el.removeEventListener('ratechange', onRateChange);\n    };\n  }, [getVideoElement, onRateChange]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (el) {\n      el.playbackRate = 1;\n    }\n  }, [src]);\n\n  return { changePlaybackRate };\n};\n","import React from 'react';\n\nexport default ({ src, pip, updateState, getVideoElement }) => {\n  const ref = React.useRef({ src, getVideoElement });\n\n  const requestPictureInPicture = React.useCallback(() => {\n    const el = ref.current.getVideoElement();\n    if (el && el.requestPictureInPicture && ref.current.src) {\n      el.requestPictureInPicture();\n    }\n  }, []);\n\n  const exitPictureInPicture = React.useCallback(() => {\n    if (document.exitPictureInPicture) {\n      document.exitPictureInPicture();\n    }\n  }, []);\n\n  const onEnterPictureInPicture = React.useCallback(() => {\n    // setPiP(true);\n    updateState({ pip: true });\n  }, [updateState]);\n\n  const onLeavePictureInPicture = React.useCallback(() => {\n    // setPiP(false);\n    updateState({ pip: false });\n  }, [updateState]);\n\n  React.useEffect(() => {\n    const el = ref.current.getVideoElement();\n    if (!el) {\n      return () => {};\n    }\n    el.addEventListener('enterpictureinpicture', onEnterPictureInPicture);\n    el.addEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    return () => {\n      el.removeEventListener('enterpictureinpicture', onEnterPictureInPicture);\n      el.removeEventListener('leavepictureinpicture', onLeavePictureInPicture);\n    };\n  }, [onEnterPictureInPicture, onLeavePictureInPicture]);\n\n  React.useEffect(() => {\n    ref.current.src = src;\n    if (pip && !src) {\n      exitPictureInPicture();\n    }\n  }, [src, pip, exitPictureInPicture]);\n\n  return { requestPictureInPicture, exitPictureInPicture };\n};\n","import React from 'react';\n\nexport default ({ updateState, getVideoElement, getPlayerElement }) => {\n  const requestFullscreen = React.useCallback(() => {\n    const el = getPlayerElement();\n    if (!el) {\n      // debug('useVideoFullscreen: 全屏异常，unmounted');\n      return;\n    }\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.msRequestFullscreen) {\n      // 兼容 IE11\n      el.msRequestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      // 兼容微信 PC 版内置浏览器\n      el.webkitRequestFullscreen();\n    } else {\n      const videoEl = getVideoElement();\n      if (videoEl && videoEl.webkitEnterFullScreen) {\n        // 兼容 iOS Safari\n        videoEl.webkitEnterFullScreen();\n      } else {\n        // 异常分支，不应该进入\n        // debug('useVideoFullscreen: 全屏异常，浏览器不支持 requestFullscreen');\n      }\n    }\n  }, [getVideoElement, getPlayerElement]);\n\n  const exitFullscreen = React.useCallback(() => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else {\n      // 异常分支，不应该进入\n      // debug('useVideoFullscreen: 退出全屏异常，浏览器不支持 exitFullscreen');\n    }\n  }, []);\n\n  const onChange = React.useCallback(() => {\n    const el = getPlayerElement();\n    const fullscreenElement =\n      document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n    updateState({ fullscreen: !!el && fullscreenElement === el });\n  }, [updateState, getPlayerElement]);\n\n  React.useEffect(() => {\n    document.addEventListener('fullscreenchange', onChange);\n    document.addEventListener('webkitfullscreenchange', onChange);\n    document.onmsfullscreenchange = onChange;\n    return () => {\n      document.removeEventListener('fullscreenchange', onChange);\n      document.removeEventListener('webkitfullscreenchange', onChange);\n      document.onmsfullscreenchange = null;\n    };\n  }, [onChange]);\n\n  return { requestFullscreen, exitFullscreen };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Flvjs from '../Flvjs';\nimport Hlsjs from '../Hlsjs';\nimport Native from '../Native';\nimport SRSWebRTC from '../SRSWebRTC';\nimport PlayerSkinWapper from '../PlayerSkinWapper';\nimport PlayerContext from '../PlayerContext';\nimport useReactjsPlayer from './useReactjsPlayer';\nimport styles from './index.module.less';\n\nconst ReactjsPlayer = ({\n  kernel,\n  live,\n  config,\n  onKernelError,\n  src,\n  type,\n  controls,\n  className,\n  videoProps,\n  playerProps,\n  children,\n}) => {\n  const {\n    videoRef,\n    playerRef,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    playbackRate,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    kernelMsg,\n    getVideoElement,\n    onPauseClick,\n    onPlayClick,\n    changeCurrentTime,\n    onMutedClick,\n    changeVolume,\n    changePlaybackRate,\n    requestPictureInPicture,\n    exitPictureInPicture,\n    requestFullscreen,\n    exitFullscreen,\n    onMsgChange,\n  } = useReactjsPlayer({ src, live, onKernelError });\n\n  const kernelProps = { getVideoElement, src, config, onMsgChange };\n\n  return (\n    <div className={`${styles.reactjsPlayer} ${className}`} ref={playerRef} {...playerProps}>\n      {'flvjs' === kernel && <Flvjs {...kernelProps} />}\n      {'hlsjs' === kernel && <Hlsjs {...kernelProps} />}\n      {'native' === kernel && <Native {...kernelProps} />}\n      {'srswebrtc' === kernel && <SRSWebRTC {...kernelProps} />}\n      {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n      <video className={styles.video} ref={videoRef} controls={'controls' === controls} type={type} {...videoProps} />\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          loading,\n          prevented,\n          paused,\n          ended,\n          seeking,\n          waiting,\n          duration,\n          currentTime,\n          buffered,\n          muted,\n          volume,\n          playbackRate,\n          pictureInPictureEnabled,\n          pip,\n          fullscreen,\n          kernelMsg,\n          getVideoElement,\n          onPauseClick,\n          onPlayClick,\n          changeCurrentTime,\n          onMutedClick,\n          changeVolume,\n          changePlaybackRate,\n          requestPictureInPicture,\n          exitPictureInPicture,\n          requestFullscreen,\n          exitFullscreen,\n        }}\n      >\n        {true === controls && <PlayerSkinWapper />}\n        {children}\n      </PlayerContext.Provider>\n    </div>\n  );\n};\n\nReactjsPlayer.propTypes = {\n  kernel: PropTypes.oneOf(['hlsjs', 'flvjs', 'native', 'srswebrtc']).isRequired,\n  live: PropTypes.bool.isRequired,\n  config: PropTypes.object,\n  onKernelError: PropTypes.func,\n\n  src: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  controls: PropTypes.oneOf([false, true, 'controls']),\n\n  className: PropTypes.string,\n  videoProps: PropTypes.object,\n  playerProps: PropTypes.object,\n\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nReactjsPlayer.defaultProps = {\n  config: null,\n  onKernelError: null,\n\n  src: '',\n  controls: true,\n\n  className: '',\n  videoProps: null,\n  playerProps: null,\n\n  children: null,\n};\n\nexport default React.memo(\n  ReactjsPlayer,\n  (p, n) =>\n    p.kernel === n.kernel &&\n    p.live === n.live &&\n    p.config === n.config &&\n    p.onKernelError === n.onKernelError &&\n    p.src === n.src &&\n    p.type === n.type &&\n    p.controls === n.controls &&\n    p.className === n.className &&\n    p.videoProps === n.videoProps &&\n    p.playerProps === n.playerProps &&\n    p.children === n.children,\n);\n","import { EventEmitter } from 'fbemitter';\n\nlet emitter = null;\nlet index = 0;\n\nclass GrindPlayer {\n  /**\n   * 创建 GrindPlayer 实例\n   */\n  constructor(id) {\n    this.id = id;\n    this.el = null;\n    this.emitter = new EventEmitter();\n    this.tokenList = [];\n    this.eventMap = [];\n\n    this.addListener();\n  }\n\n  addListener() {\n    if (!emitter) {\n      emitter = new EventEmitter();\n    }\n\n    this.tokenList = [\n      emitter.addListener(`${this.id}.onJavaScriptBridgeCreated`, () => {\n        this.el = document.getElementById(this.id);\n        // this.el.addEventListener('mediaError', () => );\n      }),\n      emitter.addListener(`${this.id}.mediaSize`, (data) => {\n        if (0 === data.videoHeight && 0 === data.videoWidth) {\n          this.emitter.emit('canplay');\n        } else {\n          this.emitter.emit('canplaythrough');\n        }\n      }),\n      emitter.addListener(`${this.id}.paused`, () => this.emitter.emit('pause')),\n      emitter.addListener(`${this.id}.playing`, () => this.emitter.emit('playing')),\n      emitter.addListener(`${this.id}.seeking`, () => this.emitter.emit('seeking')),\n      emitter.addListener(`${this.id}.seeked`, () => this.emitter.emit('seeked')),\n      emitter.addListener(`${this.id}.complete`, () => this.emitter.emit('ended')),\n      emitter.addListener(`${this.id}.buffering`, () => this.emitter.emit('waiting')),\n\n      emitter.addListener(`${this.id}.durationChange`, (e) => this.emitter.emit('durationchange', e)),\n      emitter.addListener(`${this.id}.timeChange`, (e) => this.emitter.emit('timeupdate', e)),\n      emitter.addListener(`${this.id}.progress`, (e) => this.emitter.emit('progress', e)),\n\n      emitter.addListener(`${this.id}.volumeChange`, (e) => this.emitter.emit('volumechange', e)),\n    ];\n  }\n\n  invoker(methodName, ...args) {\n    if (!this.el) {\n      return;\n    }\n    this.el[methodName](...args);\n  }\n\n  addEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    const token = this.emitter.addListener(event, fn);\n    this.eventMap.push({ token, event, fn });\n  }\n\n  removeEventListener(event, fn) {\n    if (!this.eventMap) {\n      return;\n    }\n    this.eventMap = this.eventMap.filter((it) => {\n      if (it.event !== event) {\n        return true;\n      }\n      if (!fn && it.fn !== fn) {\n        return true;\n      }\n      it.token.remove();\n      return false;\n    });\n  }\n\n  destroy() {\n    if (this.eventMap) {\n      this.eventMap.map((it) => it.token.remove());\n      delete this.eventMap;\n    }\n\n    if (this.tokenList) {\n      this.tokenList.map((it) => it.remove());\n      delete this.tokenList;\n    }\n\n    if (this.emitter) {\n      this.emitter.removeAllListeners();\n    }\n    delete this.emitter;\n\n    delete this.id;\n    delete this.el;\n  }\n}\n\nconst onJSBridge = (playerId, event, data) => {\n  if (!emitter) {\n    emitter = new EventEmitter();\n  }\n  console.log(`${event}: ${JSON.stringify(data)}`);\n  emitter.emit(`${playerId}.${event}`, data);\n};\n\nexport default {\n  getPlayerId: () => `grindPlayer${index++}`,\n\n  getGrindPlayer: (id, javascriptCallbackFunction) => {\n    if (!global[javascriptCallbackFunction]) {\n      global[javascriptCallbackFunction] = onJSBridge;\n    }\n    return new GrindPlayer(id);\n  },\n};\n","import React from 'react';\nimport GrindPlayer from './GrindPlayer';\n\nconst initialState = {\n  loading: false,\n  prevented: false,\n  paused: false,\n  ended: false,\n  seeking: false,\n  waiting: false,\n  duration: 0,\n  currentTime: 0,\n  buffered: null,\n  muted: false,\n  volume: 1,\n  pictureInPictureEnabled: false,\n  pip: false,\n  fullscreen: false,\n  playbackRate: 1,\n  javascriptCallbackFunction: 'onJSBridge',\n  kernelMsg: null,\n};\n\nconst reducer = (state, action) => {\n  if ('reset' === action.type) {\n    return { ...initialState, ...action.payload };\n  }\n  return { ...state, ...action.payload };\n};\n\nexport default ({ src }) => {\n  const [\n    {\n      loading,\n      prevented,\n      paused,\n      ended,\n      seeking,\n      waiting,\n      duration,\n      currentTime,\n      buffered,\n      muted,\n      volume,\n      pictureInPictureEnabled,\n      pip,\n      fullscreen,\n      playbackRate,\n      javascriptCallbackFunction,\n      kernelMsg,\n    },\n    dispatch,\n  ] = React.useReducer(reducer, initialState);\n\n  const id = React.useMemo(() => GrindPlayer.getPlayerId(), []);\n  const ref = React.useRef({});\n\n  React.useEffect(() => {\n    const player = GrindPlayer.getGrindPlayer(id, javascriptCallbackFunction);\n    ref.current.player = player;\n    return () => {\n      player.destroy();\n      ref.current = null;\n    };\n  }, [id, javascriptCallbackFunction]);\n\n  React.useEffect(() => {\n    ref.current.loading = loading;\n    ref.current.ended = ended;\n    ref.current.muted = muted;\n    ref.current.volume = volume;\n  }, [loading, ended, muted, volume]);\n\n  React.useEffect(() => {\n    dispatch({ type: 'reset', payload: { loading: !!src } });\n  }, [src]);\n\n  return {\n    ref,\n    dispatch,\n    id,\n    loading,\n    prevented,\n    paused,\n    ended,\n    seeking,\n    waiting,\n    duration,\n    currentTime,\n    buffered,\n    muted,\n    volume,\n    pictureInPictureEnabled,\n    pip,\n    fullscreen,\n    playbackRate,\n    javascriptCallbackFunction,\n    kernelMsg,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactSWF from 'react-swf';\nimport './GrindPlayer.swf';\nimport './flashlsOSMF.swf';\nimport PlayerContext from '../PlayerContext';\nimport useGrindPlayer from './useGrindPlayer';\nimport useState from './useState';\nimport useTime from './useTime';\nimport useVolume from './useVolume';\nimport styles from './index.module.less';\n\nconst GrindPlayer = ({ live, src, type, grindPlayerSwf, flashlsOSMFSwf }) => {\n  const { ref, dispatch, id, javascriptCallbackFunction, ...state } = useGrindPlayer({ src });\n\n  const stateProps = useState({ ref, dispatch });\n  const timeProps = useTime({ ref, dispatch });\n  const volumeProps = useVolume({ ref, dispatch });\n\n  return (\n    <div className={styles.grindPlayer}>\n      {src && (\n        <ReactSWF\n          id={id}\n          src={grindPlayerSwf}\n          width=\"100%\"\n          height=\"100%\"\n          wmode=\"opaque\"\n          allowFullScreen\n          allowScriptAccess=\"always\"\n          bgcolor=\"#000000\"\n          flashVars={{\n            src,\n            autoPlay: true,\n            bufferTime: 0.5,\n            streamType: live ? 'live' : 'recorded',\n            plugin_hls: 'application/x-mpegURL' === type ? flashlsOSMFSwf : undefined,\n            javascriptCallbackFunction,\n          }}\n        />\n      )}\n      <PlayerContext.Provider\n        value={{\n          live,\n          src,\n          ...state,\n          ...stateProps,\n          ...timeProps,\n          ...volumeProps,\n        }}\n      />\n    </div>\n  );\n};\n\nGrindPlayer.propTypes = {\n  live: PropTypes.bool,\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  grindPlayerSwf: PropTypes.string,\n  flashlsOSMFSwf: PropTypes.string,\n};\n\nGrindPlayer.defaultProps = {\n  live: true,\n  grindPlayerSwf: 'http://unpkg.com/reactjs-player/dist/GrindPlayer.swf',\n  flashlsOSMFSwf: 'http://unpkg.com/reactjs-player/dist/flashlsOSMF.swf',\n};\n\nexport default React.memo(GrindPlayer);\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onPlayClick = React.useCallback(() => {\n    if (ref.current.player) {\n      if (ref.current.ended) {\n        ref.current.player.invoker('seek', 0);\n      }\n      ref.current.player.invoker('play2');\n    }\n    dispatch({ type: 'update', payload: { paused: false } });\n  }, [ref, dispatch]);\n\n  const onPauseClick = React.useCallback(() => {\n    if (ref.current.player) {\n      ref.current.player.invoker('pause');\n    }\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [ref, dispatch]);\n\n  const onCanPlayThrough = React.useCallback(() => {\n    if (ref.current.loading) {\n      dispatch({ type: 'update', payload: { loading: false } });\n    }\n    dispatch({ type: 'update', payload: { waiting: false } });\n  }, [ref, dispatch]);\n\n  const onPause = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: true } });\n  }, [dispatch]);\n\n  const onPlaying = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { paused: false, ended: false } });\n  }, [dispatch]);\n\n  const onEnded = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { ended: true } });\n  }, [dispatch]);\n\n  const onSeeked = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: false } });\n  }, [dispatch]);\n\n  const onSeeking = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { seeking: true } });\n  }, [dispatch]);\n\n  const onWaiting = React.useCallback(() => {\n    dispatch({ type: 'update', payload: { waiting: true } });\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('canplaythrough', onCanPlayThrough);\n    player.addEventListener('pause', onPause);\n    player.addEventListener('playing', onPlaying);\n    player.addEventListener('ended', onEnded);\n    player.addEventListener('seeked', onSeeked);\n    player.addEventListener('seeking', onSeeking);\n    player.addEventListener('waiting', onWaiting);\n    return () => {\n      player.removeEventListener('canplaythrough', onCanPlayThrough);\n      player.removeEventListener('pause', onPause);\n      player.removeEventListener('playing', onPlaying);\n      player.removeEventListener('ended', onEnded);\n      player.removeEventListener('seeked', onSeeked);\n      player.removeEventListener('seeking', onSeeking);\n      player.removeEventListener('waiting', onWaiting);\n    };\n  }, [ref, onCanPlayThrough, onPause, onPlaying, onEnded, onSeeked, onSeeking, onWaiting]);\n\n  return { onPauseClick, onPlayClick };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onDurationChange = React.useCallback(\n    (e) => {\n      const v = e.duration;\n      dispatch({ type: 'update', payload: { duration: Number.isNaN(v) || Number.isFinite(v) || !v ? v : 0 } });\n    },\n    [dispatch],\n  );\n\n  const onTimeUpdate = React.useCallback(\n    (e) => {\n      if (Number.isNaN(e.currentTime)) {\n        return;\n      }\n      dispatch({ type: 'update', payload: { currentTime: e.currentTime } });\n    },\n    [dispatch],\n  );\n\n  const onProgress = React.useCallback(\n    (e) => dispatch({ type: 'update', payload: { buffered: e.buffered } }),\n    [dispatch],\n  );\n\n  const changeCurrentTime = React.useCallback(\n    (t) => {\n      const v = parseFloat(t);\n      if (Number.isNaN(v) || !ref.current || !ref.current.player) {\n        return;\n      }\n      ref.current.player.invoker('seek', v);\n      dispatch({ type: 'update', payload: { currentTime: v } });\n    },\n    [ref, dispatch],\n  );\n\n  React.useEffect(() => {\n    const { player } = ref.current;\n    if (!player) {\n      return () => {};\n    }\n    player.addEventListener('durationchange', onDurationChange);\n    player.addEventListener('timeupdate', onTimeUpdate);\n    player.addEventListener('progress', onProgress);\n    return () => {\n      player.removeEventListener('durationchange', onDurationChange);\n      player.removeEventListener('timeupdate', onTimeUpdate);\n      player.removeEventListener('progress', onProgress);\n    };\n  }, [ref, onDurationChange, onTimeUpdate, onProgress]);\n\n  return { changeCurrentTime };\n};\n","import React from 'react';\n\nexport default ({ ref, dispatch }) => {\n  const onVolumeChange = React.useCallback((e) => dispatch({ type: 'update', payload: e }), [dispatch]);\n\n  const onMutedClick = React.useCallback(() => {\n    if (!ref.current || !ref.current.player) {\n      return;\n    }\n    const { muted } = ref.current;\n    ref.current.player.invoker('setMuted', !muted);\n    if (0 === ref.current.volume && muted) {\n      ref.current.player.invoker('setVolume', 1.0);\n    }\n  }, [ref]);\n\n  const changeVolume = React.useCallback(\n    (v) => {\n      if (ref.current && ref.current.player) {\n        ref.current.player.invoker('setVolume', v);\n      }\n    },\n    [ref],\n  );\n\n  React.useEffect(() => {\n    if (!ref.current || !ref.current.player) {\n      return () => {};\n    }\n    const { player } = ref.current;\n    player.addEventListener('volumechange', onVolumeChange);\n    return () => {\n      player.removeEventListener('volumechange', onVolumeChange);\n    };\n  }, [ref, onVolumeChange]);\n\n  return { onMutedClick, changeVolume };\n};\n","import ReactjsPlayer from './ReactjsPlayer';\nimport GrindPlayer from './GrindPlayer';\nimport PlayerContext from './PlayerContext';\nimport PlayerSkin from './PlayerSkin';\n\nReactjsPlayer.GrindPlayer = GrindPlayer;\nReactjsPlayer.PlayerContext = PlayerContext;\nReactjsPlayer.PlayerSkin = PlayerSkin;\n\nexport default ReactjsPlayer;\n","import React from 'react';\nimport UAParser from 'ua-parser-js';\nimport Hls from 'hls.js';\nimport flvjs from 'flv.js';\nimport { Form, Select, Input, Button, Tabs, Descriptions } from 'antd';\nimport { GithubOutlined } from '@ant-design/icons';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport ReactjsPlayer from 'reactjs-player';\nimport grindPlayerSwf from 'reactjs-player/dist/GrindPlayer.swf';\nimport flashlsOSMFSwf from 'reactjs-player/dist/flashlsOSMF.swf';\nimport blank16x9 from './blank16x9.png';\nimport './App.css';\n\nconst GrindPlayer = ReactjsPlayer.GrindPlayer;\n// const ReactPlayerContext = ReactjsPlayer.ReactPlayerContext;\n\nconst delay = (timeout) =>\n  new Promise((resolve) => {\n    global.setTimeout(resolve, timeout);\n  });\n\nconst getSupportedList = (ua) => {\n  if (ua.device.type) {\n    // 非 PC 浏览器\n    return [\n      {\n        key: 'native',\n        kernel: 'native',\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n      {\n        key: 'srswebrtc',\n        kernel: 'srswebrtc',\n        live: true,\n        src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n        type: '',\n      },\n    ];\n  }\n\n  global.Hls = Hls;\n  global.flvjs = flvjs;\n\n  const list = [];\n  if (flvjs.isSupported()) {\n    const featureList = flvjs.getFeatureList();\n    if (featureList.networkStreamIO) {\n      list.push({\n        key: 'flvjs',\n        kernel: 'flvjs',\n        live: true,\n        src: 'http://192.168.0.225/flv_srs/quick/ClpheNxgRBy_XDhXXDq_CQ.flv',\n        type: 'video/x-flv',\n        config: {\n          isLive: true,\n          enableStashBuffer: false,\n          autoCleanupSourceBuffer: true,\n          stashInitialSize: 16 * 1024,\n          fixAudioTimestampGap: false,\n        },\n      });\n    }\n  }\n  if (Hls.isSupported()) {\n    list.push({\n      key: 'hlsjs',\n      kernel: 'hlsjs',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    });\n  }\n\n  // mac OS 没有测试环境，暂且认为没有问题\n  if ('Mac OS' === ua.os.name) {\n    list.push(\n      {\n        key: 'native',\n        kernel: 'native',\n        live: false,\n        src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        type: 'application/x-mpegURL',\n      },\n      { key: 'nativelive', kernel: 'native', live: true, src: '', type: 'application/x-mpegURL' },\n    );\n  }\n  list.push(\n    { key: 'rtmp', kernel: 'flash', live: true, src: 'rtmp://livetv.dhtv.cn:1935/live/news', type: 'video/rtmp' },\n    {\n      key: 'flashls',\n      kernel: 'flash',\n      live: false,\n      src: 'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n      type: 'application/x-mpegURL',\n    },\n    {\n      key: 'native',\n      kernel: 'native',\n      live: false,\n      src: 'https://www.w3schools.com/html/mov_bbb.mp4',\n      type: 'video/mp4',\n    },\n    {\n      key: 'srswebrtc',\n      kernel: 'srswebrtc',\n      live: true,\n      src: 'webrtc://192.168.0.225/quick/ClpheNxgRBy_XDhXXDq_CQ?vc=ivWxqY',\n      type: '',\n    },\n  );\n  return list;\n};\n\nconst App = React.memo(() => {\n  const [list, setList] = React.useState(null);\n  const [info, setInfo] = React.useState(null);\n  const [src, setSrc] = React.useState('');\n  const [videoProps, setVideoProps] = React.useState(null);\n  const ref = React.useRef(list);\n\n  const [form] = Form.useForm();\n\n  const onChange = React.useCallback(\n    (v) => {\n      const item = list.find((it) => it.key === v);\n      form.setFieldsValue({ src: item.src });\n    },\n    [form, list],\n  );\n\n  const onSubmit = React.useCallback(async (values) => {\n    setSrc('');\n    await delay(50);\n    const item = ref.current.find((it) => it.key === values.type);\n    setInfo(item);\n    setSrc(values.src);\n  }, []);\n\n  React.useEffect(() => {\n    ref.current = list;\n  }, [list]);\n\n  React.useEffect(() => {\n    const ua = UAParser(global.navigator.userAgent);\n    if (ua.device.type) {\n      setVideoProps({\n        playsInline: true,\n        'webkit-playsinline': 'true',\n        'x5-video-player-type': 'h5-page',\n        'x5-video-orientation': 'landscape|portrait',\n      });\n    }\n    const supportedList = getSupportedList(ua);\n    setList(supportedList);\n    ref.current = supportedList;\n    setInfo(supportedList[0]);\n    // debugger;\n    onSubmit({ type: supportedList[0].key, src: supportedList[0].src });\n  }, [onSubmit]);\n\n  const onVideoEvent = React.useCallback((e) => {\n    const log = console.log;\n    log(`e.type: ${e.type}`);\n    // if ('durationchange' === e.type) {\n    //   log(`durationchange: ${e.target.duration}`);\n    // }\n  }, []);\n\n  if (!list || 0 === list.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"container\">\n      <header className=\"header\">\n        <Form\n          className=\"form\"\n          layout=\"inline\"\n          form={form}\n          onFinish={onSubmit}\n          initialValues={{\n            type: list[0].key,\n            src: list[0].src,\n          }}\n        >\n          <Form.Item className=\"type\" name=\"type\">\n            <Select onChange={onChange}>\n              {list.map((it) => (\n                <Select.Option key={it.key} value={it.key}>\n                  {it.key}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n          <Form.Item className=\"src\" name=\"src\">\n            <Input />\n          </Form.Item>\n          <Form.Item className=\"submit\">\n            <Button type=\"primary\" htmlType=\"submit\">\n              播放\n            </Button>\n          </Form.Item>\n        </Form>\n      </header>\n      <main className=\"main\">\n        <div className=\"player\">\n          <img className=\"blankImg\" src={blank16x9} alt=\"\" />\n          {'flash' !== info.kernel && (\n            <ReactjsPlayer\n              live={info.live}\n              kernel={info.kernel}\n              type={info.type}\n              config={info.config || {}}\n              src={src}\n              videoProps={{\n                ...videoProps,\n                onCanPlay: onVideoEvent,\n                onDurationChange: onVideoEvent,\n                onPause: onVideoEvent,\n                onPlay: onVideoEvent,\n                onPlaying: onVideoEvent,\n                onEnded: onVideoEvent,\n                onSeeked: onVideoEvent,\n                onSeeking: onVideoEvent,\n                onCanPlayThrough: onVideoEvent,\n                onEmptied: onVideoEvent,\n                onEncrypted: onVideoEvent,\n                onError: onVideoEvent,\n                onLoadedData: onVideoEvent,\n                onLoadedMetadata: onVideoEvent,\n                onLoadStart: onVideoEvent,\n                onRateChange: onVideoEvent,\n                onStalled: onVideoEvent,\n                onSuspend: onVideoEvent,\n                onVolumeChange: onVideoEvent,\n                onWaiting: onVideoEvent,\n                onAbort: onVideoEvent,\n              }}\n            />\n          )}\n          {'flash' === info.kernel && (\n            <GrindPlayer {...info} src={src} grindPlayerSwf={grindPlayerSwf} flashlsOSMFSwf={flashlsOSMFSwf} />\n          )}\n        </div>\n        <aside className=\"aside\">\n          <div className=\"asideContainer\">\n            <Tabs className=\"asideTabs\" defaultActiveKey=\"info\">\n              <Tabs.TabPane tab=\"信息\" key=\"info\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">\n                    <Descriptions title=\"参数\" column={1} size=\"small\">\n                      <Descriptions.Item label=\"kernel\">{info.kernel}</Descriptions.Item>\n                      <Descriptions.Item label=\"live\">{info.live ? '是' : '否'}</Descriptions.Item>\n                      <Descriptions.Item label=\"src\">\n                        <span className=\"srcValue\">{src}</span>\n                      </Descriptions.Item>\n                      <Descriptions.Item label=\"type\">{info.type}</Descriptions.Item>\n                    </Descriptions>\n                  </div>\n                </Scrollbars>\n              </Tabs.TabPane>\n              <Tabs.TabPane tab=\"接口测试\" key=\"interface\">\n                <Scrollbars>\n                  <div className=\"infoTabPane\">暂时删除接口测试功能</div>\n                </Scrollbars>\n              </Tabs.TabPane>\n            </Tabs>\n            <div className=\"asideFooter\">\n              <a href=\"https://github.com/goblin-laboratory/reactjs-player\">\n                <GithubOutlined />\n                &nbsp; Github\n              </a>\n            </div>\n          </div>\n        </aside>\n      </main>\n    </div>\n  );\n});\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/GrindPlayer.2a08c30c.swf\";","export default __webpack_public_path__ + \"static/media/flashlsOSMF.54c6b059.swf\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMi0yOFQxODoyNDozNCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDgtMjBUMTQ6Mzg6MzkrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDljYTEwNTMtNTU4Ny1lYjQ4LWEyMzEtZWY0MTUzNjRjYmY2IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Y2QyYjVhMTMtN2E2NC1lZDQ3LWE2NDctZWQwNDExMDgxMTFmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2NkZWQyZmItOWFmMi1lODQ2LWE5MGYtNTdhOGUyYzk3OGY2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozY2RlZDJmYi05YWYyLWU4NDYtYTkwZi01N2E4ZTJjOTc4ZjYiIHN0RXZ0OndoZW49IjIwMTgtMDItMjhUMTg6MjQ6MzQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5Y2ExMDUzLTU1ODctZWI0OC1hMjMxLWVmNDE1MzY0Y2JmNiIgc3RFdnQ6d2hlbj0iMjAxOC0wOC0yMFQxNDozODozOSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7p7qgTAAAAFklEQVQokWP4//8/AyWYIs2jBgwbAwCgra5gnLDJrQAAAABJRU5ErkJggg==\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}